/*! For license information please see main.js.LICENSE.txt */
(()=>{"use strict";var t={};t.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}();var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,n)};function n(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}var r=function(){return(r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function i(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{u(r.next(t))}catch(t){o(t)}}function a(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((r=r.apply(t,e||[])).next())}))}function o(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function s(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function a(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function u(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(a(arguments[e]));return t}function c(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}function h(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=h(t[n],e[n]));return t}var f=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}},t}();function l(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function d(){try{return"[object process]"===Object.prototype.toString.call(t.g.process)}catch(t){return!1}}var p=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,v.prototype.create),o}return n(e,t),e}(Error),v=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?m(o,r):"Error",a=this.serviceName+": "+s+" ("+i+").",u=new p(i,a,r);return u},t}();function m(t,e){return t.replace(y,(function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"}))}var y=/\{\$([^}]+)}/g;function g(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function b(t,e){var n=new w(t,e);return n.subscribe.bind(n)}!function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var o,s,a=this.chain_[0],u=this.chain_[1],c=this.chain_[2],h=this.chain_[3],f=this.chain_[4];for(r=0;r<80;r++)r<40?r<20?(o=h^u&(c^h),s=1518500249):(o=u^c^h,s=1859775393):r<60?(o=u&c|h&(u|c),s=2400959708):(o=u^c^h,s=3395469782),i=(a<<5|a>>>27)+o+f+s+n[r]&4294967295,f=h,h=c,c=4294967295&(u<<30|u>>>2),u=a,a=i;this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+f&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t}}();var w=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}return t.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},t.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},t.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=I),void 0===r.error&&(r.error=I),void 0===r.complete&&(r.complete=I);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}})),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}}))},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},t}();function I(){}var T,E=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t}(),_="[DEFAULT]",S=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return t.prototype.get=function(t){void 0===t&&(t=_);var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new f;this.instancesDeferred.set(e,n);try{var r=this.getOrInitializeService(e);r&&n.resolve(r)}catch(t){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=r({identifier:_,optional:!1},t),n=e.identifier,i=e.optional,o=this.normalizeInstanceIdentifier(n);try{var s=this.getOrInitializeService(o);if(!s){if(i)return null;throw Error("Service "+this.name+" is not available")}return s}catch(t){if(i)return null;throw t}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService(_)}catch(t){}try{for(var r=s(this.instancesDeferred.entries()),i=r.next();!i.done;i=r.next()){var o=a(i.value,2),u=o[0],c=o[1],h=this.normalizeInstanceIdentifier(u);try{var f=this.getOrInitializeService(h);c.resolve(f)}catch(t){}}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}},t.prototype.clearInstance=function(t){void 0===t&&(t=_),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return i(this,void 0,void 0,(function(){var t;return o(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(u(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})),t.filter((function(t){return"_delete"in t})).map((function(t){return t._delete()}))))];case 1:return e.sent(),[2]}}))}))},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.getOrInitializeService=function(t){var e=this.instances.get(t);return!e&&this.component&&(e=this.component.instanceFactory(this.container,function(t){return t===_?void 0:t}(t)),this.instances.set(t,e)),e||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:_:t},t}(),A=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new S(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}();function N(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}var k,D=[];!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(k||(k={}));var O,C={debug:k.DEBUG,verbose:k.VERBOSE,info:k.INFO,warn:k.WARN,error:k.ERROR,silent:k.SILENT},P=k.INFO,x=((T={})[k.DEBUG]="log",T[k.VERBOSE]="log",T[k.INFO]="info",T[k.WARN]="warn",T[k.ERROR]="error",T),L=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var i=(new Date).toISOString(),o=x[e];if(!o)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[o].apply(console,N(["["+i+"]  "+t.name+":"],n))}},R=function(){function t(t){this.name=t,this._logLevel=P,this._logHandler=L,this._userLogHandler=null,D.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in k))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?C[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,N([this,k.DEBUG],t)),this._logHandler.apply(this,N([this,k.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,N([this,k.VERBOSE],t)),this._logHandler.apply(this,N([this,k.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,N([this,k.INFO],t)),this._logHandler.apply(this,N([this,k.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,N([this,k.WARN],t)),this._logHandler.apply(this,N([this,k.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,N([this,k.ERROR],t)),this._logHandler.apply(this,N([this,k.ERROR],t))},t}();function M(t){D.forEach((function(e){e.setLogLevel(t)}))}var U,j=((O={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",O["bad-app-name"]="Illegal App name: '{$appName}",O["duplicate-app"]="Firebase App named '{$appName}' already exists",O["app-deleted"]="Firebase App named '{$appName}' already deleted",O["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",O["invalid-log-argument"]="First argument to `onLog` must be null or a function.",O),V=new v("app","Firebase",j),F="@firebase/app",q="[DEFAULT]",H=((U={})[F]="fire-core",U["@firebase/analytics"]="fire-analytics",U["@firebase/auth"]="fire-auth",U["@firebase/database"]="fire-rtdb",U["@firebase/functions"]="fire-fn",U["@firebase/installations"]="fire-iid",U["@firebase/messaging"]="fire-fcm",U["@firebase/performance"]="fire-perf",U["@firebase/remote-config"]="fire-rc",U["@firebase/storage"]="fire-gcs",U["@firebase/firestore"]="fire-fst",U["fire-js"]="fire-js",U["firebase-wrapper"]="fire-js-all",U),B=new R("@firebase/app"),G=function(){function t(t,e,n){var r,i,o=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=h(void 0,t),this.container=new A(e.name),this._addComponent(new E("app",(function(){return o}),"PUBLIC"));try{for(var a=s(this.firebase_.INTERNAL.components.values()),u=a.next();!u.done;u=a.next()){var c=u.value;this._addComponent(c)}}catch(t){r={error:t}}finally{try{u&&!u.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise((function(e){t.checkDestroyed_(),e()})).then((function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map((function(t){return t.delete()})))})).then((function(){t.isDeleted_=!0}))},t.prototype._getService=function(t,e){return void 0===e&&(e=q),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=q),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){B.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw V.create("app-deleted",{appName:this.name_})},t}();G.prototype.name&&G.prototype.options||G.prototype.delete||console.log("dc");var z=function t(){var e=function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"==typeof i&&null!==i||(i={name:i});var o=i;void 0===o.name&&(o.name=q);var s=o.name;if("string"!=typeof s||!s)throw V.create("bad-app-name",{appName:String(s)});if(g(e,s))throw V.create("duplicate-app",{appName:s});var a=new t(n,o,r);return e[s]=a,a},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=H[t])&&void 0!==r?r:t;n&&(i+="-"+n);var s=i.match(/\s|\//),a=e.match(/\s|\//);if(s||a){var u=['Unable to register library "'+i+'" with version "'+e+'":'];return s&&u.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),s&&a&&u.push("and"),a&&u.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void B.warn(u.join(" "))}o(new E(i+"-version",(function(){return{library:i,version:e}}),"VERSION"))},setLogLevel:M,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw V.create("invalid-log-argument",{appName:name});!function(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=C[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var s=i.map((function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(t){return null}})).filter((function(t){return t})).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:k[n].toLowerCase(),message:s,args:i,type:e.name})}},r=0,i=D;r<i.length;r++)n(i[r])}(t,e)},apps:null,SDK_VERSION:"8.0.1",INTERNAL:{registerComponent:o,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){return"serverAuth"===e?null:e}}};function i(t){if(!g(e,t=t||q))throw V.create("no-app",{appName:t});return e[t]}function o(o){var a,u,c=o.name;if(n.has(c))return B.debug("There were multiple attempts to register component "+c+"."),"PUBLIC"===o.type?r[c]:null;if(n.set(c,o),"PUBLIC"===o.type){var f=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[c])throw V.create("invalid-app-argument",{appName:c});return t[c]()};void 0!==o.serviceProps&&h(f,o.serviceProps),r[c]=f,t.prototype[c]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,c).apply(this,o.multipleInstances?t:[])}}try{for(var l=s(Object.keys(e)),d=l.next();!d.done;d=l.next()){var p=d.value;e[p]._addComponent(o)}}catch(t){a={error:t}}finally{try{d&&!d.done&&(u=l.return)&&u.call(l)}finally{if(a)throw a.error}}return"PUBLIC"===o.type?r[c]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map((function(t){return e[t]}))}}),i.App=t,r}(G);return e.INTERNAL=r(r({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){h(e,t)},createSubscribe:b,ErrorFactory:v,deepExtend:h}),e}(),K=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null})).filter((function(t){return t})).join(" ")},t}();if("object"==typeof self&&self.self===self&&void 0!==self.firebase){B.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var W=self.firebase.SDK_VERSION;W&&W.indexOf("LITE")>=0&&B.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var J=z.initializeApp;z.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return d()&&B.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),J.apply(void 0,t)};var X=z;!function(t,e){t.INTERNAL.registerComponent(new E("platform-logger",(function(t){return new K(t)}),"PRIVATE")),t.registerVersion(F,"0.6.13",void 0),t.registerVersion("fire-js","")}(X);const Y=X;Y.registerVersion("firebase","8.2.1","app"),function(){var e,n="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)},r=function(e){e=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof t.g&&t.g,e];for(var n=0;n<e.length;++n){var r=e[n];if(r&&r.Math==Math)return r}return globalThis}(this);function i(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}function o(t){var e="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return e?e.call(t):{next:i(t)}}!function(t,e){if(e){var i=r;t=t.split(".");for(var o=0;o<t.length-1;o++){var s=t[o];s in i||(i[s]={}),i=i[s]}(e=e(o=i[t=t[t.length-1]]))!=o&&null!=e&&n(i,t,{configurable:!0,writable:!0,value:e})}}("Promise",(function(t){function e(t){this.b=0,this.c=void 0,this.a=[];var e=this.f();try{t(e.resolve,e.reject)}catch(t){e.reject(t)}}function n(){this.a=null}function i(t){return t instanceof e?t:new e((function(e){e(t)}))}if(t)return t;n.prototype.b=function(t){if(null==this.a){this.a=[];var e=this;this.c((function(){e.g()}))}this.a.push(t)};var s=r.setTimeout;n.prototype.c=function(t){s(t,0)},n.prototype.g=function(){for(;this.a&&this.a.length;){var t=this.a;this.a=[];for(var e=0;e<t.length;++e){var n=t[e];t[e]=null;try{n()}catch(t){this.f(t)}}}this.a=null},n.prototype.f=function(t){this.c((function(){throw t}))},e.prototype.f=function(){function t(t){return function(r){n||(n=!0,t.call(e,r))}}var e=this,n=!1;return{resolve:t(this.v),reject:t(this.g)}},e.prototype.v=function(t){if(t===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof e)this.s(t);else{t:switch(typeof t){case"object":var n=null!=t;break t;case"function":n=!0;break t;default:n=!1}n?this.m(t):this.i(t)}},e.prototype.m=function(t){var e=void 0;try{e=t.then}catch(t){return void this.g(t)}"function"==typeof e?this.u(e,t):this.i(t)},e.prototype.g=function(t){this.h(2,t)},e.prototype.i=function(t){this.h(1,t)},e.prototype.h=function(t,e){if(0!=this.b)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.b);this.b=t,this.c=e,this.l()},e.prototype.l=function(){if(null!=this.a){for(var t=0;t<this.a.length;++t)a.b(this.a[t]);this.a=null}};var a=new n;return e.prototype.s=function(t){var e=this.f();t.Pa(e.resolve,e.reject)},e.prototype.u=function(t,e){var n=this.f();try{t.call(e,n.resolve,n.reject)}catch(t){n.reject(t)}},e.prototype.then=function(t,n){function r(t,e){return"function"==typeof t?function(e){try{i(t(e))}catch(t){o(t)}}:e}var i,o,s=new e((function(t,e){i=t,o=e}));return this.Pa(r(t,i),r(n,o)),s},e.prototype.catch=function(t){return this.then(void 0,t)},e.prototype.Pa=function(t,e){function n(){switch(r.b){case 1:t(r.c);break;case 2:e(r.c);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?a.b(n):this.a.push(n)},e.resolve=i,e.reject=function(t){return new e((function(e,n){n(t)}))},e.race=function(t){return new e((function(e,n){for(var r=o(t),s=r.next();!s.done;s=r.next())i(s.value).Pa(e,n)}))},e.all=function(t){var n=o(t),r=n.next();return r.done?i([]):new e((function(t,e){function o(e){return function(n){s[e]=n,0==--a&&t(s)}}var s=[],a=0;do{s.push(void 0),a++,i(r.value).Pa(o(s.length-1),e),r=n.next()}while(!r.done)}))},e}));var s=s||{},a=this||self,u=/^[\w+/_-]+[=]{0,2}$/,c=null;function h(t){return(t=t.querySelector&&t.querySelector("script[nonce]"))&&(t=t.nonce||t.getAttribute("nonce"))&&u.test(t)?t:""}function f(){}function l(t){var e=typeof t;return"object"!=e?e:t?Array.isArray(t)?"array":e:"null"}function d(t){var e=l(t);return"array"==e||"object"==e&&"number"==typeof t.length}function p(t){return"function"==l(t)}function v(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}function m(t){return Object.prototype.hasOwnProperty.call(t,y)&&t[y]||(t[y]=++g)}var y="closure_uid_"+(1e9*Math.random()>>>0),g=0;function b(t,e,n){return t.call.apply(t.bind,arguments)}function w(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function I(t,e,n){return(I=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?b:w).apply(null,arguments)}function T(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var E=Date.now;function _(t,e){function n(){}n.prototype=e.prototype,t.$a=e.prototype,t.prototype=new n,t.prototype.constructor=t}function S(t){return t}function A(t,e,n){this.code=D+t,this.message=e||O[t]||"",this.a=n||null}function N(t){var e=t&&t.code;return e?new A(e.substring(D.length),t.message,t.serverResponse):null}_(A,Error),A.prototype.w=function(){var t={code:this.code,message:this.message};return this.a&&(t.serverResponse=this.a),t},A.prototype.toJSON=function(){return this.w()};var k,D="auth/",O={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},C={kd:{Sa:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Ya:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Va:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},rd:{Sa:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",Ya:"https://securetoken.googleapis.com/v1/token",Va:"https://identitytoolkit.googleapis.com/v2/",id:"p"},td:{Sa:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Ya:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Va:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},ud:{Sa:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",Ya:"https://test-securetoken.sandbox.googleapis.com/v1/token",Va:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function P(t){for(var e in C)if(C[e].id===t)return{firebaseEndpoint:(t=C[e]).Sa,secureTokenEndpoint:t.Ya,identityPlatformEndpoint:t.Va};return null}function x(t){if(!t)return!1;try{return!!t.$goog_Thenable}catch(t){return!1}}function L(t){if(Error.captureStackTrace)Error.captureStackTrace(this,L);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t))}function R(t,e){for(var n="",r=(t=t.split("%s")).length-1,i=0;i<r;i++)n+=t[i]+(i<e.length?e[i]:"%s");L.call(this,n+t[r])}function M(t,e){throw new R("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function U(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function j(t,e){t.f(e),100>t.b&&(t.b++,e.next=t.a,t.a=e)}function V(){this.b=this.a=null}k=P("__EID__")?"__EID__":void 0,_(L,Error),L.prototype.name="CustomError",_(R,L),R.prototype.name="AssertionError",U.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};var F=new U((function(){return new H}),(function(t){t.reset()}));function q(){var t=we,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function H(){this.next=this.b=this.a=null}V.prototype.add=function(t,e){var n=F.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},H.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},H.prototype.reset=function(){this.next=this.b=this.a=null};var B=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},G=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)},z=Array.prototype.filter?function(t,e){return Array.prototype.filter.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=[],i=0,o="string"==typeof t?t.split(""):t,s=0;s<n;s++)if(s in o){var a=o[s];e.call(void 0,a,s,t)&&(r[i++]=a)}return r},K=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=Array(n),i="string"==typeof t?t.split(""):t,o=0;o<n;o++)o in i&&(r[o]=e.call(void 0,i[o],o,t));return r},W=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(t,e){for(var n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t))return!0;return!1};function J(t,e){return 0<=B(t,e)}function X(t,e){var n;return(n=0<=(e=B(t,e)))&&Array.prototype.splice.call(t,e,1),n}function $(t,e){!function(t,e){for(var n="string"==typeof t?t.split(""):t,r=t.length-1;0<=r;--r)r in n&&e.call(void 0,n[r],r,t)}(t,(function(n,r){e.call(void 0,n,r,t)&&Array.prototype.splice.call(t,r,1).length}))}function Q(t){return Array.prototype.concat.apply([],arguments)}function Z(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}var tt,et=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]},nt=/&/g,rt=/</g,it=/>/g,ot=/"/g,st=/'/g,at=/\x00/g,ut=/[\x00&<>"']/;function ct(t,e){return-1!=t.indexOf(e)}function ht(t,e){return t<e?-1:t>e?1:0}t:{var ft=a.navigator;if(ft){var lt=ft.userAgent;if(lt){tt=lt;break t}}tt=""}function dt(t){return ct(tt,t)}function pt(t,e){for(var n in t)e.call(void 0,t[n],n,t)}function vt(t){for(var e in t)return!1;return!0}function mt(t){var e,n={};for(e in t)n[e]=t[e];return n}var yt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function gt(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<yt.length;o++)n=yt[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function bt(t,e){t:{try{var n=t&&t.ownerDocument,r=n&&(n.defaultView||n.parentWindow);if((r=r||a).Element&&r.Location){var i=r;break t}}catch(t){}i=null}if(i&&void 0!==i[e]&&(!t||!(t instanceof i[e])&&(t instanceof i.Location||t instanceof i.Element))){if(v(t))try{var o=t.constructor.displayName||t.constructor.name||Object.prototype.toString.call(t)}catch(t){o="<object could not be stringified>"}else o=void 0===t?"undefined":null===t?"null":typeof t;M("Argument is not a %s (or a non-Element, non-Location mock); got: %s",e,o)}}function wt(t,e){this.a=t===_t&&e||"",this.b=Et}function It(t){return t instanceof wt&&t.constructor===wt&&t.b===Et?t.a:(M("expected object of type Const, got '"+t+"'"),"type_error:Const")}wt.prototype.sa=!0,wt.prototype.ra=function(){return this.a},wt.prototype.toString=function(){return"Const{"+this.a+"}"};var Tt,Et={},_t={};function St(){if(void 0===Tt){var t=null,e=a.trustedTypes;if(e&&e.createPolicy){try{t=e.createPolicy("goog#html",{createHTML:S,createScript:S,createScriptURL:S})}catch(t){a.console&&a.console.error(t.message)}Tt=t}else Tt=t}return Tt}function At(t,e){this.a=e===Ct?t:""}function Nt(t){return t instanceof At&&t.constructor===At?t.a:(M("expected object of type TrustedResourceUrl, got '"+t+"' of type "+l(t)),"type_error:TrustedResourceUrl")}function kt(t,e){var n=It(t);if(!Ot.test(n))throw Error("Invalid TrustedResourceUrl format: "+n);return function(t){var e=St();return new At(t=e?e.createScriptURL(t):t,Ct)}(t=n.replace(Dt,(function(t,r){if(!Object.prototype.hasOwnProperty.call(e,r))throw Error('Found marker, "'+r+'", in format string, "'+n+'", but no valid label mapping found in args: '+JSON.stringify(e));return(t=e[r])instanceof wt?It(t):encodeURIComponent(String(t))})))}At.prototype.sa=!0,At.prototype.ra=function(){return this.a.toString()},At.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var Dt=/%{(\w+)}/g,Ot=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,Ct={};function Pt(t,e){this.a=e===Vt?t:""}function xt(t){return t instanceof Pt&&t.constructor===Pt?t.a:(M("expected object of type SafeUrl, got '"+t+"' of type "+l(t)),"type_error:SafeUrl")}Pt.prototype.sa=!0,Pt.prototype.ra=function(){return this.a.toString()},Pt.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var Lt=/^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-matroska|x-wav|wav|webm)|font\/\w+|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime|x-matroska))(?:;\w+=(?:\w+|"[\w;,= ]+"))*$/i,Rt=/^data:(.*);base64,[a-z0-9+\/]+=*$/i,Mt=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function Ut(t){if(t instanceof Pt)return t;if(t="object"==typeof t&&t.sa?t.ra():String(t),Mt.test(t))t=new Pt(t,Vt);else{var e=(t=(t=String(t)).replace(/(%0A|%0D)/g,"")).match(Rt);t=e&&Lt.test(e[1])?new Pt(t,Vt):null}return t}function jt(t){return t instanceof Pt?t:(t="object"==typeof t&&t.sa?t.ra():String(t),Mt.test(t)||(t="about:invalid#zClosurez"),new Pt(t,Vt))}var Vt={},Ft=new Pt("about:invalid#zClosurez",Vt);function qt(t,e,n){this.a=n===Ht?t:""}qt.prototype.sa=!0,qt.prototype.ra=function(){return this.a.toString()},qt.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var Ht={};function Bt(t,e,n,r){return t=t instanceof Pt?t:jt(t),e=e||a,n=n instanceof wt?It(n):n||"",e.open(xt(t),n,r,void 0)}function Gt(t,e){for(var n=t.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}function zt(t){return ut.test(t)&&(-1!=t.indexOf("&")&&(t=t.replace(nt,"&amp;")),-1!=t.indexOf("<")&&(t=t.replace(rt,"&lt;")),-1!=t.indexOf(">")&&(t=t.replace(it,"&gt;")),-1!=t.indexOf('"')&&(t=t.replace(ot,"&quot;")),-1!=t.indexOf("'")&&(t=t.replace(st,"&#39;")),-1!=t.indexOf("\0")&&(t=t.replace(at,"&#0;"))),t}function Kt(t){return Kt[" "](t),t}Kt[" "]=f;var Wt,Jt,Xt=dt("Opera"),Yt=dt("Trident")||dt("MSIE"),$t=dt("Edge"),Qt=$t||Yt,Zt=dt("Gecko")&&!(ct(tt.toLowerCase(),"webkit")&&!dt("Edge"))&&!(dt("Trident")||dt("MSIE"))&&!dt("Edge"),te=ct(tt.toLowerCase(),"webkit")&&!dt("Edge");function ee(){var t=a.document;return t?t.documentMode:void 0}t:{var ne="",re=(Jt=tt,Zt?/rv:([^\);]+)(\)|;)/.exec(Jt):$t?/Edge\/([\d\.]+)/.exec(Jt):Yt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Jt):te?/WebKit\/(\S+)/.exec(Jt):Xt?/(?:Version)[ \/]?(\S+)/.exec(Jt):void 0);if(re&&(ne=re?re[1]:""),Yt){var ie=ee();if(null!=ie&&ie>parseFloat(ne)){Wt=String(ie);break t}}Wt=ne}var oe,se={};function ae(t){return function(t,e){var n=se;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,(function(){for(var e=0,n=et(String(Wt)).split("."),r=et(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=ht(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||ht(0==s[2].length,0==a[2].length)||ht(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e}))}a.document&&Yt?oe=ee()||parseInt(Wt,10)||void 0:oe=void 0;var ue=oe;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch(Jt){}var ce=!Yt||9<=Number(ue);function he(t){var e=document;return"string"==typeof t?e.getElementById(t):t}function fe(t,e){pt(e,(function(e,n){e&&"object"==typeof e&&e.sa&&(e=e.ra()),"style"==n?t.style.cssText=e:"class"==n?t.className=e:"for"==n?t.htmlFor=e:pe.hasOwnProperty(n)?t.setAttribute(pe[n],e):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?t.setAttribute(n,e):t[n]=e}))}var le,de,pe={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function ve(t,e,n){function r(n){n&&e.appendChild("string"==typeof n?t.createTextNode(n):n)}for(var i=2;i<n.length;i++){var o=n[i];if(!d(o)||v(o)&&0<o.nodeType)r(o);else{t:{if(o&&"number"==typeof o.length){if(v(o)){var s="function"==typeof o.item||"string"==typeof o.item;break t}if(p(o)){s="function"==typeof o.item;break t}}s=!1}G(s?Z(o):o,r)}}}function me(t,e){return e=String(e),"application/xhtml+xml"===t.contentType&&(e=e.toLowerCase()),t.createElement(e)}function ye(t){a.setTimeout((function(){throw t}),0)}function ge(t,e){de||function(){if(a.Promise&&a.Promise.resolve){var t=a.Promise.resolve(void 0);de=function(){t.then(Ie)}}else de=function(){var t=Ie;!p(a.setImmediate)||a.Window&&a.Window.prototype&&!dt("Edge")&&a.Window.prototype.setImmediate==a.setImmediate?(le||(le=function(){var t=a.MessageChannel;if(void 0===t&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!dt("Presto")&&(t=function(){var t=me(document,"IFRAME");t.style.display="none",document.documentElement.appendChild(t);var e=t.contentWindow;(t=e.document).open(),t.close();var n="callImmediate"+Math.random(),r="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=I((function(t){"*"!=r&&t.origin!=r||t.data!=n||this.port1.onmessage()}),this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(n,r)}}}),void 0!==t&&!dt("Trident")&&!dt("MSIE")){var e=new t,n={},r=n;return e.port1.onmessage=function(){if(void 0!==n.next){var t=(n=n.next).Fb;n.Fb=null,t()}},function(t){r.next={Fb:t},r=r.next,e.port2.postMessage(0)}}return function(t){a.setTimeout(t,0)}}()),le(t)):a.setImmediate(t)}}(),be||(de(),be=!0),we.add(t,e)}var be=!1,we=new V;function Ie(){for(var t;t=q();){try{t.a.call(t.b)}catch(t){ye(t)}j(F,t)}be=!1}function Te(t,e){if(this.a=Ee,this.h=void 0,this.f=this.b=this.c=null,this.g=this.i=!1,t!=f)try{var n=this;t.call(e,(function(t){Me(n,_e,t)}),(function(t){if(!(t instanceof Be))try{if(t instanceof Error)throw t;throw Error("Promise rejected.")}catch(t){}Me(n,Se,t)}))}catch(t){Me(this,Se,t)}}var Ee=0,_e=2,Se=3;function Ae(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}Ae.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var Ne=new U((function(){return new Ae}),(function(t){t.reset()}));function ke(t,e,n){var r=Ne.get();return r.g=t,r.b=e,r.f=n,r}function De(t){if(t instanceof Te)return t;var e=new Te(f);return Me(e,_e,t),e}function Oe(t){return new Te((function(e,n){n(t)}))}function Ce(t,e,n){Ue(t,e,n,null)||ge(T(e,t))}function Pe(t){return new Te((function(e){var n=t.length,r=[];if(n)for(var i=function(t,i,o){n--,r[t]=i?{Ob:!0,value:o}:{Ob:!1,reason:o},0==n&&e(r)},o=0;o<t.length;o++)Ce(t[o],T(i,o,!0),T(i,o,!1));else e(r)}))}function xe(t,e){if(t.a==Ee)if(t.c){var n=t.c;if(n.b){for(var r=0,i=null,o=null,s=n.b;s&&(s.c||(r++,s.a==t&&(i=s),!(i&&1<r)));s=s.next)i||(o=s);i&&(n.a==Ee&&1==r?xe(n,e):(o?((r=o).next==n.f&&(n.f=r),r.next=r.next.next):Ve(n),Fe(n,i,Se,e)))}t.c=null}else Me(t,Se,e)}function Le(t,e){t.b||t.a!=_e&&t.a!=Se||je(t),t.f?t.f.next=e:t.b=e,t.f=e}function Re(t,e,n,r){var i=ke(null,null,null);return i.a=new Te((function(t,o){i.g=e?function(n){try{var i=e.call(r,n);t(i)}catch(t){o(t)}}:t,i.b=n?function(e){try{var i=n.call(r,e);void 0===i&&e instanceof Be?o(e):t(i)}catch(t){o(t)}}:o})),i.a.c=t,Le(t,i),i.a}function Me(t,e,n){t.a==Ee&&(t===n&&(e=Se,n=new TypeError("Promise cannot resolve to itself")),t.a=1,Ue(n,t.Zc,t.$c,t)||(t.h=n,t.a=e,t.c=null,je(t),e!=Se||n instanceof Be||function(t,e){t.g=!0,ge((function(){t.g&&He.call(null,e)}))}(t,n)))}function Ue(t,e,n,r){if(t instanceof Te)return Le(t,ke(e||f,n||null,r)),!0;if(x(t))return t.then(e,n,r),!0;if(v(t))try{var i=t.then;if(p(i))return function(t,e,n,r,i){function o(t){s||(s=!0,r.call(i,t))}var s=!1;try{e.call(t,(function(t){s||(s=!0,n.call(i,t))}),o)}catch(t){o(t)}}(t,i,e,n,r),!0}catch(t){return n.call(r,t),!0}return!1}function je(t){t.i||(t.i=!0,ge(t.fc,t))}function Ve(t){var e=null;return t.b&&(e=t.b,t.b=e.next,e.next=null),t.b||(t.f=null),e}function Fe(t,e,n,r){if(n==Se&&e.b&&!e.c)for(;t&&t.g;t=t.c)t.g=!1;if(e.a)e.a.c=null,qe(e,n,r);else try{e.c?e.g.call(e.f):qe(e,n,r)}catch(t){He.call(null,t)}j(Ne,e)}function qe(t,e,n){e==_e?t.g.call(t.f,n):t.b&&t.b.call(t.f,n)}Te.prototype.then=function(t,e,n){return Re(this,p(t)?t:null,p(e)?e:null,n)},Te.prototype.$goog_Thenable=!0,(e=Te.prototype).na=function(t,e){return(t=ke(t,t,e)).c=!0,Le(this,t),this},e.o=function(t,e){return Re(this,null,t,e)},e.cancel=function(t){if(this.a==Ee){var e=new Be(t);ge((function(){xe(this,e)}),this)}},e.Zc=function(t){this.a=Ee,Me(this,_e,t)},e.$c=function(t){this.a=Ee,Me(this,Se,t)},e.fc=function(){for(var t;t=Ve(this);)Fe(this,t,this.a,this.h);this.i=!1};var He=ye;function Be(t){L.call(this,t)}function Ge(){0!=ze&&(Ke[m(this)]=this),this.xa=this.xa,this.oa=this.oa}_(Be,L),Be.prototype.name="cancel";var ze=0,Ke={};function We(t){if(!t.xa&&(t.xa=!0,t.Da(),0!=ze)){var e=m(t);if(0!=ze&&t.oa&&0<t.oa.length)throw Error(t+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete Ke[e]}}Ge.prototype.xa=!1,Ge.prototype.Da=function(){if(this.oa)for(;this.oa.length;)this.oa.shift()()};var Je=Object.freeze||function(t){return t},Xe=!Yt||9<=Number(ue),Ye=Yt&&!ae("9"),$e=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{a.addEventListener("test",f,e),a.removeEventListener("test",f,e)}catch(t){}return t}();function Qe(t,e){this.type=t,this.b=this.target=e,this.defaultPrevented=!1}function Ze(t,e){if(Qe.call(this,t?t.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.b=e,e=t.relatedTarget){if(Zt){t:{try{Kt(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:tn[t.pointerType]||"",this.a=t,t.defaultPrevented&&this.preventDefault()}}Qe.prototype.preventDefault=function(){this.defaultPrevented=!0},_(Ze,Qe);var tn=Je({2:"touch",3:"pen",4:"mouse"});Ze.prototype.preventDefault=function(){Ze.$a.preventDefault.call(this);var t=this.a;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Ye)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(t){}},Ze.prototype.g=function(){return this.a};var en="closure_listenable_"+(1e6*Math.random()|0),nn=0;function rn(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.Ua=i,this.key=++nn,this.va=this.Oa=!1}function on(t){t.va=!0,t.listener=null,t.proxy=null,t.src=null,t.Ua=null}function sn(t){this.src=t,this.a={},this.b=0}function an(t,e){var n=e.type;n in t.a&&X(t.a[n],e)&&(on(e),0==t.a[n].length&&(delete t.a[n],t.b--))}function un(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.va&&o.listener==e&&o.capture==!!n&&o.Ua==r)return i}return-1}sn.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=un(t,e,r,i);return-1<s?(e=t[s],n||(e.Oa=!1)):((e=new rn(e,this.src,o,!!r,i)).Oa=n,t.push(e)),e};var cn="closure_lm_"+(1e6*Math.random()|0),hn={};function fn(t,e,n,r,i){if(r&&r.once)dn(t,e,n,r,i);else if(Array.isArray(e))for(var o=0;o<e.length;o++)fn(t,e[o],n,r,i);else n=Tn(n),t&&t[en]?_n(t,e,n,v(r)?!!r.capture:!!r,i):ln(t,e,n,!1,r,i)}function ln(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=v(i)?!!i.capture:!!i,a=wn(t);if(a||(t[cn]=a=new sn(t)),!(n=a.add(e,n,r,s,o)).proxy)if(r=function(){var t=bn,e=Xe?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)$e||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(mn(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}}function dn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)dn(t,e[o],n,r,i);else n=Tn(n),t&&t[en]?Sn(t,e,n,v(r)?!!r.capture:!!r,i):ln(t,e,n,!0,r,i)}function pn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)pn(t,e[o],n,r,i);else r=v(r)?!!r.capture:!!r,n=Tn(n),t&&t[en]?(t=t.v,(e=String(e).toString())in t.a&&-1<(n=un(o=t.a[e],n,r,i))&&(on(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--))):t&&(t=wn(t))&&(e=t.a[e.toString()],t=-1,e&&(t=un(e,n,r,i)),(n=-1<t?e[t]:null)&&vn(n))}function vn(t){if("number"!=typeof t&&t&&!t.va){var e=t.src;if(e&&e[en])an(e.v,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(mn(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=wn(e))?(an(n,t),0==n.b&&(n.src=null,e[cn]=null)):on(t)}}}function mn(t){return t in hn?hn[t]:hn[t]="on"+t}function yn(t,e,n,r){var i=!0;if((t=wn(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.va&&(o=gn(o,r),i=i&&!1!==o)}return i}function gn(t,e){var n=t.listener,r=t.Ua||t.src;return t.Oa&&vn(t),n.call(r,e)}function bn(t,e){if(t.va)return!0;if(!Xe){if(!e)t:{e=["window","event"];for(var n=a,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}if(e=new Ze(r=e,this),n=!0,!(0>r.keyCode||null!=r.returnValue)){t:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break t}catch(t){i=!0}(i||null==r.returnValue)&&(r.returnValue=!0)}for(r=[],i=e.b;i;i=i.parentNode)r.push(i);for(t=t.type,i=r.length-1;0<=i;i--){e.b=r[i];var o=yn(r[i],t,!0,e);n=n&&o}for(i=0;i<r.length;i++)e.b=r[i],o=yn(r[i],t,!1,e),n=n&&o}return n}return gn(t,new Ze(e,this))}function wn(t){return(t=t[cn])instanceof sn?t:null}var In="__closure_events_fn_"+(1e9*Math.random()>>>0);function Tn(t){return p(t)?t:(t[In]||(t[In]=function(e){return t.handleEvent(e)}),t[In])}function En(){Ge.call(this),this.v=new sn(this),this.$b=this,this.fb=null}function _n(t,e,n,r,i){t.v.add(String(e),n,!1,r,i)}function Sn(t,e,n,r,i){t.v.add(String(e),n,!0,r,i)}function An(t,e,n,r){if(!(e=t.v.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.va&&s.capture==n){var a=s.listener,u=s.Ua||s.src;s.Oa&&an(t.v,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}function Nn(t,e,n){if(p(t))n&&(t=I(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=I(t.handleEvent,t)}return 2147483647<Number(e)?-1:a.setTimeout(t,e||0)}function kn(t){var e=null;return new Te((function(n,r){-1==(e=Nn((function(){n(void 0)}),t))&&r(Error("Failed to schedule timer."))})).o((function(t){throw a.clearTimeout(e),t}))}function Dn(t){if(t.V&&"function"==typeof t.V)return t.V();if("string"==typeof t)return t.split("");if(d(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}function On(t){if(t.Y&&"function"==typeof t.Y)return t.Y();if(!t.V||"function"!=typeof t.V){if(d(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}for(var r in e=[],n=0,t)e[n++]=r;return e}}function Cn(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Cn)for(n=t.Y(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Pn(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];xn(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)xn(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function xn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}_(En,Ge),En.prototype[en]=!0,En.prototype.addEventListener=function(t,e,n,r){fn(this,t,e,n,r)},En.prototype.removeEventListener=function(t,e,n,r){pn(this,t,e,n,r)},En.prototype.dispatchEvent=function(t){var e,n=this.fb;if(n)for(e=[];n;n=n.fb)e.push(n);n=this.$b;var r=t.type||t;if("string"==typeof t)t=new Qe(t,n);else if(t instanceof Qe)t.target=t.target||n;else{var i=t;gt(t=new Qe(r,n),i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var s=t.b=e[o];i=An(s,r,!0,t)&&i}if(i=An(s=t.b=n,r,!0,t)&&i,i=An(s,r,!1,t)&&i,e)for(o=0;o<e.length;o++)i=An(s=t.b=e[o],r,!1,t)&&i;return i},En.prototype.Da=function(){if(En.$a.Da.call(this),this.v){var t,e=this.v;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)on(n[r]);delete e.a[t],e.b--}}this.fb=null},(e=Cn.prototype).V=function(){Pn(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},e.Y=function(){return Pn(this),this.a.concat()},e.clear=function(){this.b={},this.c=this.a.length=0},e.get=function(t,e){return xn(this.b,t)?this.b[t]:e},e.set=function(t,e){xn(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},e.forEach=function(t,e){for(var n=this.Y(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Ln=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Rn(t,e){var n;this.a=this.l=this.f="",this.g=null,this.i=this.c="",this.h=!1,t instanceof Rn?(this.h=void 0!==e?e:t.h,Mn(this,t.f),this.l=t.l,this.a=t.a,Un(this,t.g),this.c=t.c,jn(this,rr(t.b)),this.i=t.i):t&&(n=String(t).match(Ln))?(this.h=!!e,Mn(this,n[1]||"",!0),this.l=Bn(n[2]||""),this.a=Bn(n[3]||"",!0),Un(this,n[4]),this.c=Bn(n[5]||"",!0),jn(this,n[6]||"",!0),this.i=Bn(n[7]||"")):(this.h=!!e,this.b=new $n(null,this.h))}function Mn(t,e,n){t.f=n?Bn(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function Un(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.g=e}else t.g=null}function jn(t,e,n){e instanceof $n?(t.b=e,function(t,e){e&&!t.f&&(Qn(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(tr(this,e),nr(this,n,t))}),t)),t.f=e}(t.b,t.h)):(n||(e=Gn(e,Xn)),t.b=new $n(e,t.h))}function Vn(t,e,n){t.b.set(e,n)}function Fn(t,e){return t.b.get(e)}function qn(t){return t instanceof Rn?new Rn(t):new Rn(t,void 0)}function Hn(t,e,n,r){var i=new Rn(null,void 0);return t&&Mn(i,t),e&&(i.a=e),n&&Un(i,n),r&&(i.c=r),i}function Bn(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Gn(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,zn),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function zn(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Rn.prototype.toString=function(){var t=[],e=this.f;e&&t.push(Gn(e,Kn,!0),":");var n=this.a;return(n||"file"==e)&&(t.push("//"),(e=this.l)&&t.push(Gn(e,Kn,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.g)&&t.push(":",String(n))),(n=this.c)&&(this.a&&"/"!=n.charAt(0)&&t.push("/"),t.push(Gn(n,"/"==n.charAt(0)?Jn:Wn,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",Gn(n,Yn)),t.join("")},Rn.prototype.resolve=function(t){var e=new Rn(this),n=!!t.f;n?Mn(e,t.f):n=!!t.l,n?e.l=t.l:n=!!t.a,n?e.a=t.a:n=null!=t.g;var r=t.c;if(n)Un(e,t.g);else if(n=!!t.c){if("/"!=r.charAt(0))if(this.a&&!this.c)r="/"+r;else{var i=e.c.lastIndexOf("/");-1!=i&&(r=e.c.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(ct(i,"./")||ct(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],s=0;s<i.length;){var a=i[s++];"."==a?r&&s==i.length&&o.push(""):".."==a?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&s==i.length&&o.push("")):(o.push(a),r=!0)}r=o.join("/")}else r=i}return n?e.c=r:n=""!==t.b.toString(),n?jn(e,rr(t.b)):n=!!t.i,n&&(e.i=t.i),e};var Kn=/[#\/\?@]/g,Wn=/[#\?:]/g,Jn=/[#\?]/g,Xn=/[#\?@]/g,Yn=/#/g;function $n(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Qn(t){t.a||(t.a=new Cn,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function Zn(t){var e=On(t);if(void 0===e)throw Error("Keys are undefined");var n=new $n(null,void 0);t=Dn(t);for(var r=0;r<e.length;r++){var i=e[r],o=t[r];Array.isArray(o)?nr(n,i,o):n.add(i,o)}return n}function tr(t,e){Qn(t),e=ir(t,e),xn(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,xn((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Pn(t)))}function er(t,e){return Qn(t),e=ir(t,e),xn(t.a.b,e)}function nr(t,e,n){tr(t,e),0<n.length&&(t.c=null,t.a.set(ir(t,e),Z(n)),t.b+=n.length)}function rr(t){var e=new $n;return e.c=t.c,t.a&&(e.a=new Cn(t.a),e.b=t.b),e}function ir(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function or(t){var e=[];return ar(new sr,t,e),e.join("")}function sr(){}function ar(t,e,n){if(null==e)n.push("null");else{if("object"==typeof e){if(Array.isArray(e)){var r=e;e=r.length,n.push("[");for(var i="",o=0;o<e;o++)n.push(i),ar(t,r[o],n),i=",";return void n.push("]")}if(!(e instanceof String||e instanceof Number||e instanceof Boolean)){for(r in n.push("{"),i="",e)Object.prototype.hasOwnProperty.call(e,r)&&"function"!=typeof(o=e[r])&&(n.push(i),hr(r,n),n.push(":"),ar(t,o,n),i=",");return void n.push("}")}e=e.valueOf()}switch(typeof e){case"string":hr(e,n);break;case"number":n.push(isFinite(e)&&!isNaN(e)?String(e):"null");break;case"boolean":n.push(String(e));break;case"function":n.push("null");break;default:throw Error("Unknown type: "+typeof e)}}}(e=$n.prototype).add=function(t,e){Qn(this),this.c=null,t=ir(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},e.clear=function(){this.a=this.c=null,this.b=0},e.forEach=function(t,e){Qn(this),this.a.forEach((function(n,r){G(n,(function(n){t.call(e,n,r,this)}),this)}),this)},e.Y=function(){Qn(this);for(var t=this.a.V(),e=this.a.Y(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},e.V=function(t){Qn(this);var e=[];if("string"==typeof t)er(this,t)&&(e=Q(e,this.a.get(ir(this,t))));else{t=this.a.V();for(var n=0;n<t.length;n++)e=Q(e,t[n])}return e},e.set=function(t,e){return Qn(this),this.c=null,er(this,t=ir(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},e.get=function(t,e){return t&&0<(t=this.V(t)).length?String(t[0]):e},e.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.Y(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.V(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var ur={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},cr=/\uffff/.test("￿")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function hr(t,e){e.push('"',t.replace(cr,(function(t){var e=ur[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),ur[t]=e),e})),'"')}function fr(){var t=Cr();return Yt&&!!ue&&11==ue||/Edge\/\d+/.test(t)}function lr(){return a.window&&a.window.location.href||self&&self.location&&self.location.href||""}function dr(t,e){e=e||a.window;var n="about:blank";t&&(n=xt(Ut(t)||Ft)),e.location.href=n}function pr(t,e){var n,r=[];for(n in t)n in e?typeof t[n]!=typeof e[n]?r.push(n):"object"==typeof t[n]&&null!=t[n]&&null!=e[n]?0<pr(t[n],e[n]).length&&r.push(n):t[n]!==e[n]&&r.push(n):r.push(n);for(n in e)n in t||r.push(n);return r}function vr(t){return!!((t=(t||Cr()).toLowerCase()).match(/android/)||t.match(/webos/)||t.match(/iphone|ipad|ipod/)||t.match(/blackberry/)||t.match(/windows phone/)||t.match(/iemobile/))}function mr(t){t=t||a.window;try{t.close()}catch(t){}}function yr(t,e,n){var r=Math.floor(1e9*Math.random()).toString();e=e||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-e)/2;for(s in e={width:e,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=Cr().toLowerCase(),r&&(e.target=r,ct(n,"crios/")&&(e.target="_blank")),kr(Cr())==Ar&&(t=t||"http://localhost",e.scrollbars=!0),n=t||"",(t=e)||(t={}),r=window,e=n instanceof Pt?n:Ut(void 0!==n.href?n.href:String(n))||Ft,n=t.target||n.target,i=[],t)switch(s){case"width":case"height":case"top":case"left":i.push(s+"="+t[s]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(s+"="+(t[s]?1:0))}var s=i.join(",");if((dt("iPhone")&&!dt("iPod")&&!dt("iPad")||dt("iPad")||dt("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(bt(s=me(document,"A"),"HTMLAnchorElement"),e=e instanceof Pt?e:jt(e),s.href=xt(e),s.setAttribute("target",n),t.noreferrer&&s.setAttribute("rel","noreferrer"),(t=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,r,1),s.dispatchEvent(t),s={}):t.noreferrer?(s=Bt("",r,n,s),t=xt(e),s&&(Qt&&ct(t,";")&&(t="'"+t.replace(/'/g,"%27")+"'"),s.opener=null,t='<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+zt(t)+'">',t=new qt(t=(r=St())?r.createHTML(t):t,null,Ht),r=s.document)&&(r.write(function(t){return t instanceof qt&&t.constructor===qt?t.a:(M("expected object of type SafeHtml, got '"+t+"' of type "+l(t)),"type_error:SafeHtml")}(t)),r.close())):(s=Bt(e,r,n,s))&&t.noopener&&(s.opener=null),s)try{s.focus()}catch(t){}return s}var gr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,br=/^[^@]+@[^@]+$/;function wr(){var t=null;return new Te((function(e){"complete"==a.document.readyState?e():(t=function(){e()},dn(window,"load",t))})).o((function(e){throw pn(window,"load",t),e}))}function Ir(t){return t=t||Cr(),!("file:"!==Mr()&&"ionic:"!==Mr()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function Tr(){var t=a.window;try{return!(!t||t==t.top)}catch(t){return!1}}function Er(){return void 0!==a.WorkerGlobalScope&&"function"==typeof a.importScripts}function _r(){return Y.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":Y.INTERNAL.hasOwnProperty("node")?"Node":Er()?"Worker":"Browser"}function Sr(){var t=_r();return"ReactNative"===t||"Node"===t}var Ar="Firefox",Nr="Chrome";function kr(t){var e=t.toLowerCase();return ct(e,"opera/")||ct(e,"opr/")||ct(e,"opios/")?"Opera":ct(e,"iemobile")?"IEMobile":ct(e,"msie")||ct(e,"trident/")?"IE":ct(e,"edge/")?"Edge":ct(e,"firefox/")?Ar:ct(e,"silk/")?"Silk":ct(e,"blackberry")?"Blackberry":ct(e,"webos")?"Webos":!ct(e,"safari/")||ct(e,"chrome/")||ct(e,"crios/")||ct(e,"android")?!ct(e,"chrome/")&&!ct(e,"crios/")||ct(e,"edge/")?ct(e,"android")?"Android":(t=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==t.length?t[1]:"Other":Nr:"Safari"}var Dr={ld:"FirebaseCore-web",nd:"FirebaseUI-web"};function Or(t,e){e=e||[];var n,r=[],i={};for(n in Dr)i[Dr[n]]=!0;for(n=0;n<e.length;n++)void 0!==i[e[n]]&&(delete i[e[n]],r.push(e[n]));return r.sort(),(e=r).length||(e=["FirebaseCore-web"]),"Browser"===(r=_r())?r=kr(i=Cr()):"Worker"===r&&(r=kr(i=Cr())+"-"+r),r+"/JsCore/"+t+"/"+e.join(",")}function Cr(){return a.navigator&&a.navigator.userAgent||""}function Pr(t,e){t=t.split("."),e=e||a;for(var n=0;n<t.length&&"object"==typeof e&&null!=e;n++)e=e[t[n]];return n!=t.length&&(e=void 0),e}function xr(){try{var t=a.localStorage,e=qr();if(t)return t.setItem(e,"1"),t.removeItem(e),!fr()||!!a.indexedDB}catch(t){return Er()&&!!a.indexedDB}return!1}function Lr(){return(Rr()||"chrome-extension:"===Mr()||Ir())&&!Sr()&&xr()&&!Er()}function Rr(){return"http:"===Mr()||"https:"===Mr()}function Mr(){return a.location&&a.location.protocol||null}function Ur(t){return!vr(t=t||Cr())&&kr(t)!=Ar}function jr(t){return void 0===t?null:or(t)}function Vr(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&null!==t[e]&&void 0!==t[e]&&(n[e]=t[e]);return n}function Fr(t){if(null!==t)return JSON.parse(t)}function qr(t){return t||Math.floor(1e9*Math.random()).toString()}function Hr(t){return"Safari"!=kr(t=t||Cr())&&!t.toLowerCase().match(/iphone|ipad|ipod/)}function Br(){var t=a.___jsl;if(t&&t.H)for(var e in t.H)if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=t.H[e].L.concat(),t.CP)for(var n=0;n<t.CP.length;n++)t.CP[n]=null}function Gr(t,e){if(t>e)throw Error("Short delay should be less than long delay!");this.a=t,this.c=e,t=Cr(),e=_r(),this.b=vr(t)||"ReactNative"===e}function zr(){var t=a.document;return!t||void 0===t.visibilityState||"visible"==t.visibilityState}function Kr(t){try{var e=new Date(parseInt(t,10));if(!isNaN(e.getTime())&&!/[^0-9]/.test(t))return e.toUTCString()}catch(t){}return null}function Wr(){return!(!Pr("fireauth.oauthhelper",a)&&!Pr("fireauth.iframe",a))}Gr.prototype.get=function(){var t=a.navigator;return!t||"boolean"!=typeof t.onLine||!Rr()&&"chrome-extension:"!==Mr()&&void 0===t.connection||t.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var Jr,Xr={};function Yr(t){Xr[t]||(Xr[t]=!0,"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(t))}try{var $r={};Object.defineProperty($r,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty($r,"abcd",{configurable:!0,enumerable:!0,value:2}),Jr=2==$r.abcd}catch(Jt){Jr=!1}function Qr(t,e,n){Jr?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:n}):t[e]=n}function Zr(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&Qr(t,n,e[n])}function ti(t){var e={};return Zr(e,t),e}function ei(t){var e=t;if("object"==typeof t&&null!=t)for(var n in e="length"in t?[]:{},t)Qr(e,n,ei(t[n]));return e}function ni(t){var e=t&&(t[ai]?"phone":null);if(!(e&&t&&t[si]))throw new A("internal-error","Internal assert: invalid MultiFactorInfo object");Qr(this,"uid",t[si]),Qr(this,"displayName",t[ii]||null);var n=null;t[oi]&&(n=new Date(t[oi]).toUTCString()),Qr(this,"enrollmentTime",n),Qr(this,"factorId",e)}function ri(t){try{var e=new ui(t)}catch(t){e=null}return e}ni.prototype.w=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};var ii="displayName",oi="enrolledAt",si="mfaEnrollmentId",ai="phoneInfo";function ui(t){ni.call(this,t),Qr(this,"phoneNumber",t[ai])}function ci(t){var e={},n=t[di],r=t[vi],i=t[mi];if(t=ri(t[pi]),!i||i!=fi&&i!=li&&!n||i==li&&!r||i==hi&&!t)throw Error("Invalid checkActionCode response!");i==li?(e[gi]=n||null,e[wi]=n||null,e[yi]=r):(e[gi]=r||null,e[wi]=r||null,e[yi]=n||null),e[bi]=t||null,Qr(this,Ti,i),Qr(this,Ii,ei(e))}_(ui,ni),ui.prototype.w=function(){var t=ui.$a.w.call(this);return t.phoneNumber=this.phoneNumber,t};var hi="REVERT_SECOND_FACTOR_ADDITION",fi="EMAIL_SIGNIN",li="VERIFY_AND_CHANGE_EMAIL",di="email",pi="mfaInfo",vi="newEmail",mi="requestType",yi="email",gi="fromEmail",bi="multiFactorInfo",wi="previousEmail",Ii="data",Ti="operation";function Ei(t){var e=Fn(t=qn(t),_i)||null,n=Fn(t,Si)||null,r=Fn(t,ki)||null;if(r=r&&Oi[r]||null,!e||!n||!r)throw new A("argument-error",_i+", "+Si+"and "+ki+" are required in a valid action code URL.");Zr(this,{apiKey:e,operation:r,code:n,continueUrl:Fn(t,Ai)||null,languageCode:Fn(t,Ni)||null,tenantId:Fn(t,Di)||null})}var _i="apiKey",Si="oobCode",Ai="continueUrl",Ni="languageCode",ki="mode",Di="tenantId",Oi={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:hi,signIn:fi,verifyAndChangeEmail:li,verifyEmail:"VERIFY_EMAIL"};function Ci(t){try{return new Ei(t)}catch(t){return null}}function Pi(t){var e=t[Ui];if(void 0===e)throw new A("missing-continue-uri");if("string"!=typeof e||"string"==typeof e&&!e.length)throw new A("invalid-continue-uri");this.i=e,this.b=this.a=null,this.g=!1;var n=t[xi];if(n&&"object"==typeof n){e=n[Fi];var r=n[ji];if(n=n[Vi],"string"==typeof e&&e.length){if(this.a=e,void 0!==r&&"boolean"!=typeof r)throw new A("argument-error",ji+" property must be a boolean when specified.");if(this.g=!!r,void 0!==n&&("string"!=typeof n||"string"==typeof n&&!n.length))throw new A("argument-error",Vi+" property must be a non empty string when specified.");this.b=n||null}else{if(void 0!==e)throw new A("argument-error",Fi+" property must be a non empty string when specified.");if(void 0!==r||void 0!==n)throw new A("missing-android-pkg-name")}}else if(void 0!==n)throw new A("argument-error",xi+" property must be a non null object when specified.");if(this.f=null,(e=t[Mi])&&"object"==typeof e){if("string"==typeof(e=e[qi])&&e.length)this.f=e;else if(void 0!==e)throw new A("argument-error",qi+" property must be a non empty string when specified.")}else if(void 0!==e)throw new A("argument-error",Mi+" property must be a non null object when specified.");if(void 0!==(e=t[Ri])&&"boolean"!=typeof e)throw new A("argument-error",Ri+" property must be a boolean when specified.");if(this.c=!!e,void 0!==(t=t[Li])&&("string"!=typeof t||"string"==typeof t&&!t.length))throw new A("argument-error",Li+" property must be a non empty string when specified.");this.h=t||null}var xi="android",Li="dynamicLinkDomain",Ri="handleCodeInApp",Mi="iOS",Ui="url",ji="installApp",Vi="minimumVersion",Fi="packageName",qi="bundleId";function Hi(t){var e={};for(var n in e.continueUrl=t.i,e.canHandleCodeInApp=t.c,(e.androidPackageName=t.a)&&(e.androidMinimumVersion=t.b,e.androidInstallApp=t.g),e.iOSBundleId=t.f,e.dynamicLinkDomain=t.h,e)null===e[n]&&delete e[n];return e}var Bi=null;function Gi(t){var e=Ki(t);if(!(e&&e.sub&&e.iss&&e.aud&&e.exp))throw Error("Invalid JWT");this.i=t,this.a=e.exp,this.h=e.sub,t=Date.now()/1e3,this.g=e.iat||(t>this.a?this.a:t),this.b=e.provider_id||e.firebase&&e.firebase.sign_in_provider||null,this.f=e.firebase&&e.firebase.tenant||null,this.c=!!e.is_anonymous||"anonymous"==this.b}function zi(t){try{return new Gi(t)}catch(t){return null}}function Ki(t){if(!t)return null;if(3!=(t=t.split(".")).length)return null;for(var e=(4-(t=t[1]).length%4)%4,n=0;n<e;n++)t+=".";try{return JSON.parse(function(t){var e="";return function(t,e){function n(e){for(;r<t.length;){var n=t.charAt(r++),i=Bi[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return e}!function(){if(!Bi){Bi={};for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),e=["+/=","+/","-_=","-_.","-_"],n=0;5>n;n++)for(var r=t.concat(e[n].split("")),i=0;i<r.length;i++){var o=r[i];void 0===Bi[o]&&(Bi[o]=i)}}}();for(var r=0;;){var i=n(-1),o=n(0),s=n(64),a=n(64);if(64===a&&-1===i)break;e(i<<2|o>>4),64!=s&&(e(o<<4&240|s>>2),64!=a&&e(s<<6&192|a))}}(t,(function(t){e+=String.fromCharCode(t)})),e}(t))}catch(t){}return null}Gi.prototype.S=function(){return this.f},Gi.prototype.l=function(){return this.c},Gi.prototype.toString=function(){return this.i};var Wi="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),Ji=["client_id","response_type","scope","redirect_uri","state"],Xi={md:{Ja:"locale",ua:700,ta:600,fa:"facebook.com",Wa:Ji},od:{Ja:null,ua:500,ta:750,fa:"github.com",Wa:Ji},pd:{Ja:"hl",ua:515,ta:680,fa:"google.com",Wa:Ji},vd:{Ja:"lang",ua:485,ta:705,fa:"twitter.com",Wa:Wi},jd:{Ja:"locale",ua:640,ta:600,fa:"apple.com",Wa:[]}};function Yi(t){for(var e in Xi)if(Xi[e].fa==t)return Xi[e];return null}function $i(t){var e={};e["facebook.com"]=no,e["google.com"]=io,e["github.com"]=ro,e["twitter.com"]=oo;var n=t&&t[Zi];try{if(n)return e[n]?new e[n](t):new eo(t);if(void 0!==t[Qi])return new to(t)}catch(t){}return null}var Qi="idToken",Zi="providerId";function to(t){var e=t[Zi];if(!e&&t[Qi]){var n=zi(t[Qi]);n&&n.b&&(e=n.b)}if(!e)throw Error("Invalid additional user info!");"anonymous"!=e&&"custom"!=e||(e=null),n=!1,void 0!==t.isNewUser?n=!!t.isNewUser:"identitytoolkit#SignupNewUserResponse"===t.kind&&(n=!0),Qr(this,"providerId",e),Qr(this,"isNewUser",n)}function eo(t){to.call(this,t),Qr(this,"profile",ei((t=Fr(t.rawUserInfo||"{}"))||{}))}function no(t){if(eo.call(this,t),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function ro(t){if(eo.call(this,t),"github.com"!=this.providerId)throw Error("Invalid provider ID!");Qr(this,"username",this.profile&&this.profile.login||null)}function io(t){if(eo.call(this,t),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function oo(t){if(eo.call(this,t),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");Qr(this,"username",t.screenName||null)}function so(t){var e=qn(t),n=Fn(e,"link"),r=Fn(qn(n),"link");return e=Fn(e,"deep_link_id"),Fn(qn(e),"link")||e||r||n||t}function ao(t,e){if(!t&&!e)throw new A("internal-error","Internal assert: no raw session string available");if(t&&e)throw new A("internal-error","Internal assert: unable to determine the session type");this.a=t||null,this.b=e||null,this.type=this.a?uo:co}_(eo,to),_(no,eo),_(ro,eo),_(io,eo),_(oo,eo);var uo="enroll",co="signin";function ho(){}function fo(t,e){return t.then((function(t){if(t[Zs]){var n=zi(t[Zs]);if(!n||e!=n.h)throw new A("user-mismatch");return t}throw new A("user-mismatch")})).o((function(t){throw t&&t.code&&t.code==D+"user-not-found"?new A("user-mismatch"):t}))}function lo(t,e){if(!e)throw new A("internal-error","failed to construct a credential");this.a=e,Qr(this,"providerId",t),Qr(this,"signInMethod",t)}function po(t){return{pendingToken:t.a,requestUri:"http://localhost"}}function vo(t){if(t&&t.providerId&&t.signInMethod&&0==t.providerId.indexOf("saml.")&&t.pendingToken)try{return new lo(t.providerId,t.pendingToken)}catch(t){}return null}function mo(t,e,n){if(this.a=null,e.idToken||e.accessToken)e.idToken&&Qr(this,"idToken",e.idToken),e.accessToken&&Qr(this,"accessToken",e.accessToken),e.nonce&&!e.pendingToken&&Qr(this,"nonce",e.nonce),e.pendingToken&&(this.a=e.pendingToken);else{if(!e.oauthToken||!e.oauthTokenSecret)throw new A("internal-error","failed to construct a credential");Qr(this,"accessToken",e.oauthToken),Qr(this,"secret",e.oauthTokenSecret)}Qr(this,"providerId",t),Qr(this,"signInMethod",n)}function yo(t){var e={};return t.idToken&&(e.id_token=t.idToken),t.accessToken&&(e.access_token=t.accessToken),t.secret&&(e.oauth_token_secret=t.secret),e.providerId=t.providerId,t.nonce&&!t.a&&(e.nonce=t.nonce),e={postBody:Zn(e).toString(),requestUri:"http://localhost"},t.a&&(delete e.postBody,e.pendingToken=t.a),e}function go(t){if(t&&t.providerId&&t.signInMethod){var e={idToken:t.oauthIdToken,accessToken:t.oauthTokenSecret?null:t.oauthAccessToken,oauthTokenSecret:t.oauthTokenSecret,oauthToken:t.oauthTokenSecret&&t.oauthAccessToken,nonce:t.nonce,pendingToken:t.pendingToken};try{return new mo(t.providerId,e,t.signInMethod)}catch(t){}}return null}function bo(t,e){this.Pc=e||[],Zr(this,{providerId:t,isOAuthProvider:!0}),this.Hb={},this.ob=(Yi(t)||{}).Ja||null,this.nb=null}function wo(t){if("string"!=typeof t||0!=t.indexOf("saml."))throw new A("argument-error",'SAML provider IDs must be prefixed with "saml."');bo.call(this,t,[])}function Io(t){bo.call(this,t,Ji),this.a=[]}function To(){Io.call(this,"facebook.com")}function Eo(t){if(!t)throw new A("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return v(t)&&(e=t.accessToken),(new To).credential({accessToken:e})}function _o(){Io.call(this,"github.com")}function So(t){if(!t)throw new A("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return v(t)&&(e=t.accessToken),(new _o).credential({accessToken:e})}function Ao(){Io.call(this,"google.com"),this.Ca("profile")}function No(t,e){var n=t;return v(t)&&(n=t.idToken,e=t.accessToken),(new Ao).credential({idToken:n,accessToken:e})}function ko(){bo.call(this,"twitter.com",Wi)}function Do(t,e){var n=t;if(v(n)||(n={oauthToken:t,oauthTokenSecret:e}),!n.oauthToken||!n.oauthTokenSecret)throw new A("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new mo("twitter.com",n,"twitter.com")}function Oo(t,e,n){this.a=t,this.f=e,Qr(this,"providerId","password"),Qr(this,"signInMethod",n===Po.EMAIL_LINK_SIGN_IN_METHOD?Po.EMAIL_LINK_SIGN_IN_METHOD:Po.EMAIL_PASSWORD_SIGN_IN_METHOD)}function Co(t){return t&&t.email&&t.password?new Oo(t.email,t.password,t.signInMethod):null}function Po(){Zr(this,{providerId:"password",isOAuthProvider:!1})}function xo(t,e){if(!(e=Lo(e)))throw new A("argument-error","Invalid email link!");return new Oo(t,e.code,Po.EMAIL_LINK_SIGN_IN_METHOD)}function Lo(t){return(t=Ci(t=so(t)))&&t.operation===fi?t:null}function Ro(t){if(!(t.cb&&t.bb||t.La&&t.ea))throw new A("internal-error");this.a=t,Qr(this,"providerId","phone"),this.fa="phone",Qr(this,"signInMethod","phone")}function Mo(t){if(t&&"phone"===t.providerId&&(t.verificationId&&t.verificationCode||t.temporaryProof&&t.phoneNumber)){var e={};return G(["verificationId","verificationCode","temporaryProof","phoneNumber"],(function(n){t[n]&&(e[n]=t[n])})),new Ro(e)}return null}function Uo(t){return t.a.La&&t.a.ea?{temporaryProof:t.a.La,phoneNumber:t.a.ea}:{sessionInfo:t.a.cb,code:t.a.bb}}function jo(t){try{this.a=t||Y.auth()}catch(t){throw new A("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}Zr(this,{providerId:"phone",isOAuthProvider:!1})}function Vo(t,e){if(!t)throw new A("missing-verification-id");if(!e)throw new A("missing-verification-code");return new Ro({cb:t,bb:e})}function Fo(t){if(t.temporaryProof&&t.phoneNumber)return new Ro({La:t.temporaryProof,ea:t.phoneNumber});var e=t&&t.providerId;if(!e||"password"===e)return null;var n=t&&t.oauthAccessToken,r=t&&t.oauthTokenSecret,i=t&&t.nonce,o=t&&t.oauthIdToken,s=t&&t.pendingToken;try{switch(e){case"google.com":return No(o,n);case"facebook.com":return Eo(n);case"github.com":return So(n);case"twitter.com":return Do(n,r);default:return n||r||o||s?s?0==e.indexOf("saml.")?new lo(e,s):new mo(e,{pendingToken:s,idToken:t.oauthIdToken,accessToken:t.oauthAccessToken},e):new Io(e).credential({idToken:o,accessToken:n,rawNonce:i}):null}}catch(t){return null}}function qo(t){if(!t.isOAuthProvider)throw new A("invalid-oauth-provider")}function Ho(t,e,n,r,i,o,s){if(this.c=t,this.b=e||null,this.g=n||null,this.f=r||null,this.h=o||null,this.i=s||null,this.a=i||null,!this.g&&!this.a)throw new A("invalid-auth-event");if(this.g&&this.a)throw new A("invalid-auth-event");if(this.g&&!this.f)throw new A("invalid-auth-event")}function Bo(t){return(t=t||{}).type?new Ho(t.type,t.eventId,t.urlResponse,t.sessionId,t.error&&N(t.error),t.postBody,t.tenantId):null}function Go(){this.b=null,this.a=[]}ao.prototype.Ha=function(){return this.a?De(this.a):De(this.b)},ao.prototype.w=function(){return this.type==uo?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}},ho.prototype.ja=function(){},ho.prototype.b=function(){},ho.prototype.c=function(){},ho.prototype.w=function(){},lo.prototype.ja=function(t){return wa(t,po(this))},lo.prototype.b=function(t,e){var n=po(this);return n.idToken=e,Ia(t,n)},lo.prototype.c=function(t,e){return fo(Ta(t,po(this)),e)},lo.prototype.w=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},mo.prototype.ja=function(t){return wa(t,yo(this))},mo.prototype.b=function(t,e){var n=yo(this);return n.idToken=e,Ia(t,n)},mo.prototype.c=function(t,e){return fo(Ta(t,yo(this)),e)},mo.prototype.w=function(){var t={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(t.oauthIdToken=this.idToken),this.accessToken&&(t.oauthAccessToken=this.accessToken),this.secret&&(t.oauthTokenSecret=this.secret),this.nonce&&(t.nonce=this.nonce),this.a&&(t.pendingToken=this.a),t},bo.prototype.Ka=function(t){return this.Hb=mt(t),this},_(wo,bo),_(Io,bo),Io.prototype.Ca=function(t){return J(this.a,t)||this.a.push(t),this},Io.prototype.Pb=function(){return Z(this.a)},Io.prototype.credential=function(t,e){var n;if(!(n=v(t)?{idToken:t.idToken||null,accessToken:t.accessToken||null,nonce:t.rawNonce||null}:{idToken:t||null,accessToken:e||null}).idToken&&!n.accessToken)throw new A("argument-error","credential failed: must provide the ID token and/or the access token.");return new mo(this.providerId,n,this.providerId)},_(To,Io),Qr(To,"PROVIDER_ID","facebook.com"),Qr(To,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),_(_o,Io),Qr(_o,"PROVIDER_ID","github.com"),Qr(_o,"GITHUB_SIGN_IN_METHOD","github.com"),_(Ao,Io),Qr(Ao,"PROVIDER_ID","google.com"),Qr(Ao,"GOOGLE_SIGN_IN_METHOD","google.com"),_(ko,bo),Qr(ko,"PROVIDER_ID","twitter.com"),Qr(ko,"TWITTER_SIGN_IN_METHOD","twitter.com"),Oo.prototype.ja=function(t){return this.signInMethod==Po.EMAIL_LINK_SIGN_IN_METHOD?ru(t,Oa,{email:this.a,oobCode:this.f}):ru(t,Qa,{email:this.a,password:this.f})},Oo.prototype.b=function(t,e){return this.signInMethod==Po.EMAIL_LINK_SIGN_IN_METHOD?ru(t,Ca,{idToken:e,email:this.a,oobCode:this.f}):ru(t,Ga,{idToken:e,email:this.a,password:this.f})},Oo.prototype.c=function(t,e){return fo(this.ja(t),e)},Oo.prototype.w=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}},Zr(Po,{PROVIDER_ID:"password"}),Zr(Po,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),Zr(Po,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),Ro.prototype.ja=function(t){return t.eb(Uo(this))},Ro.prototype.b=function(t,e){var n=Uo(this);return n.idToken=e,ru(t,tu,n)},Ro.prototype.c=function(t,e){var n=Uo(this);return n.operation="REAUTH",fo(t=ru(t,eu,n),e)},Ro.prototype.w=function(){var t={providerId:"phone"};return this.a.cb&&(t.verificationId=this.a.cb),this.a.bb&&(t.verificationCode=this.a.bb),this.a.La&&(t.temporaryProof=this.a.La),this.a.ea&&(t.phoneNumber=this.a.ea),t},jo.prototype.eb=function(t,e){var n=this.a.a;return De(e.verify()).then((function(r){if("string"!=typeof r)throw new A("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(e.type){case"recaptcha":var i=v(t)?t.session:null,o=v(t)?t.phoneNumber:t;return(i&&i.type==uo?i.Ha().then((function(t){return function(t,e){return ru(t,Ka,e).then((function(t){return t.phoneSessionInfo.sessionInfo}))}(n,{idToken:t,phoneEnrollmentInfo:{phoneNumber:o,recaptchaToken:r}})})):i&&i.type==co?i.Ha().then((function(e){return function(t,e){return ru(t,Wa,e).then((function(t){return t.phoneResponseInfo.sessionInfo}))}(n,{mfaPendingCredential:e,mfaEnrollmentId:t.multiFactorHint&&t.multiFactorHint.uid||t.multiFactorUid,phoneSignInInfo:{recaptchaToken:r}})})):function(t,e){return ru(t,Ha,e)}(n,{phoneNumber:o,recaptchaToken:r})).then((function(t){return"function"==typeof e.reset&&e.reset(),t}),(function(t){throw"function"==typeof e.reset&&e.reset(),t}));default:throw new A("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}}))},Zr(jo,{PROVIDER_ID:"phone"}),Zr(jo,{PHONE_SIGN_IN_METHOD:"phone"}),Ho.prototype.getUid=function(){var t=[];return t.push(this.c),this.b&&t.push(this.b),this.f&&t.push(this.f),this.i&&t.push(this.i),t.join("-")},Ho.prototype.S=function(){return this.i},Ho.prototype.w=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.h,tenantId:this.i,error:this.a&&this.a.w()}};var zo,Ko=null;function Wo(t){var e="unauthorized-domain",n=void 0,r=qn(t);t=r.a,"chrome-extension"==(r=r.f)?n=Gt("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):"http"==r||"https"==r?n=Gt("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):e="operation-not-supported-in-this-environment",A.call(this,e,n)}function Jo(t,e,n){A.call(this,t,n),(t=e||{}).Ib&&Qr(this,"email",t.Ib),t.ea&&Qr(this,"phoneNumber",t.ea),t.credential&&Qr(this,"credential",t.credential),t.Yb&&Qr(this,"tenantId",t.Yb)}function Xo(t){if(t.code){var e=t.code||"";0==e.indexOf(D)&&(e=e.substring(D.length));var n={credential:Fo(t),Yb:t.tenantId};if(t.email)n.Ib=t.email;else if(t.phoneNumber)n.ea=t.phoneNumber;else if(!n.credential)return new A(e,t.message||void 0);return new Jo(e,n,t.message)}return null}function Yo(){}function $o(t){return t.c||(t.c=t.b())}function Qo(){}function Zo(t){if(!t.f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<e.length;n++){var r=e[n];try{return new ActiveXObject(r),t.f=r}catch(t){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return t.f}function ts(){}function es(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=I(this.pc,this),this.a.onerror=I(this.Rb,this),this.a.onprogress=I(this.qc,this),this.a.ontimeout=I(this.uc,this)}function ns(t,e){t.readyState=e,t.onreadystatechange&&t.onreadystatechange()}function rs(t,e,n){this.reset(t,e,n,void 0,void 0)}function is(t){this.f=t,this.b=this.c=this.a=null}function os(t,e){this.name=t,this.value=e}_(Wo,A),_(Jo,A),Jo.prototype.w=function(){var t={code:this.code,message:this.message};this.email&&(t.email=this.email),this.phoneNumber&&(t.phoneNumber=this.phoneNumber),this.tenantId&&(t.tenantId=this.tenantId);var e=this.credential&&this.credential.w();return e&&gt(t,e),t},Jo.prototype.toJSON=function(){return this.w()},Yo.prototype.c=null,_(Qo,Yo),Qo.prototype.a=function(){var t=Zo(this);return t?new ActiveXObject(t):new XMLHttpRequest},Qo.prototype.b=function(){var t={};return Zo(this)&&(t[0]=!0,t[1]=!0),t},zo=new Qo,_(ts,Yo),ts.prototype.a=function(){var t=new XMLHttpRequest;if("withCredentials"in t)return t;if("undefined"!=typeof XDomainRequest)return new es;throw Error("Unsupported browser")},ts.prototype.b=function(){return{}},(e=es.prototype).open=function(t,e,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(t,e)},e.send=function(t){if(t){if("string"!=typeof t)throw Error("Only string data is supported");this.a.send(t)}else this.a.send()},e.abort=function(){this.a.abort()},e.setRequestHeader=function(){},e.getResponseHeader=function(t){return"content-type"==t.toLowerCase()?this.a.contentType:""},e.pc=function(){this.status=200,this.response=this.responseText=this.a.responseText,ns(this,4)},e.Rb=function(){this.status=500,this.response=this.responseText="",ns(this,4)},e.uc=function(){this.Rb()},e.qc=function(){this.status=200,ns(this,1)},e.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},rs.prototype.a=null,rs.prototype.reset=function(t,e,n,r,i){r||E(),delete this.a},os.prototype.toString=function(){return this.name};var ss=new os("SEVERE",1e3),as=new os("WARNING",900),us=new os("CONFIG",700),cs=new os("FINE",500);function hs(t){return t.c?t.c:t.a?hs(t.a):(M("Root logger has no level set."),null)}is.prototype.log=function(t,e,n){if(t.value>=hs(this).value)for(p(e)&&(e=e()),t=new rs(t,String(e),this.f),n&&(t.a=n),n=this;n;)n=n.a};var fs={},ls=null;function ds(t){var e;if(ls||(ls=new is(""),fs[""]=ls,ls.c=us),!(e=fs[t])){e=new is(t);var n=t.lastIndexOf("."),r=t.substr(n+1);(n=ds(t.substr(0,n))).b||(n.b={}),n.b[r]=e,e.a=n,fs[t]=e}return e}function ps(t,e){t&&t.log(cs,e,void 0)}function vs(t){this.f=t}function ms(t){En.call(this),this.u=t,this.i=void 0,this.readyState=ys,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.l=new Headers,this.b=null,this.s="GET",this.f="",this.a=!1,this.h=ds("goog.net.FetchXmlHttp"),this.m=this.c=this.g=null}_(vs,Yo),vs.prototype.a=function(){return new ms(this.f)},vs.prototype.b=function(t){return function(){return t}}({}),_(ms,En);var ys=0;function gs(t){t.c.read().then(t.oc.bind(t)).catch(t.Ta.bind(t))}function bs(t){t.readyState=4,t.g=null,t.c=null,t.m=null,ws(t)}function ws(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function Is(t){En.call(this),this.headers=new Cn,this.O=t||null,this.c=!1,this.A=this.a=null,this.i=this.P=this.l="",this.f=this.N=this.h=this.G=!1,this.g=0,this.s=null,this.m=Ts,this.u=this.R=!1}(e=ms.prototype).open=function(t,e){if(this.readyState!=ys)throw this.abort(),Error("Error reopening a connection");this.s=t,this.f=e,this.readyState=1,ws(this)},e.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var e={headers:this.l,method:this.s,credentials:this.i,cache:void 0};t&&(e.body=t),this.u.fetch(new Request(this.f,e)).then(this.tc.bind(this),this.Ta.bind(this))},e.abort=function(){this.response=this.responseText="",this.l=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,bs(this)),this.readyState=ys},e.tc=function(t){this.a&&(this.g=t,this.b||(this.status=this.g.status,this.statusText=this.g.statusText,this.b=t.headers,this.readyState=2,ws(this)),this.a&&(this.readyState=3,ws(this),this.a&&("arraybuffer"===this.responseType?t.arrayBuffer().then(this.rc.bind(this),this.Ta.bind(this)):void 0!==a.ReadableStream&&"body"in t?(this.response=this.responseText="",this.c=t.body.getReader(),this.m=new TextDecoder,gs(this)):t.text().then(this.sc.bind(this),this.Ta.bind(this)))))},e.oc=function(t){if(this.a){var e=this.m.decode(t.value?t.value:new Uint8Array(0),{stream:!t.done});e&&(this.response=this.responseText+=e),t.done?bs(this):ws(this),3==this.readyState&&gs(this)}},e.sc=function(t){this.a&&(this.response=this.responseText=t,bs(this))},e.rc=function(t){this.a&&(this.response=t,bs(this))},e.Ta=function(t){var e=this.h;e&&e.log(as,"Failed to fetch url "+this.f,t instanceof Error?t:Error(t)),this.a&&bs(this)},e.setRequestHeader=function(t,e){this.l.append(t,e)},e.getResponseHeader=function(t){return this.b?this.b.get(t.toLowerCase())||"":((t=this.h)&&t.log(as,"Attempting to get response header but no headers have been received for url: "+this.f,void 0),"")},e.getAllResponseHeaders=function(){if(!this.b){var t=this.h;return t&&t.log(as,"Attempting to get all response headers but no headers have been received for url: "+this.f,void 0),""}t=[];for(var e=this.b.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(ms.prototype,"withCredentials",{get:function(){return"include"===this.i},set:function(t){this.i=t?"include":"same-origin"}}),_(Is,En);var Ts="";Is.prototype.b=ds("goog.net.XhrIo");var Es=/^https?$/i,_s=["POST","PUT"];function Ss(t){return"content-type"==t.toLowerCase()}function As(t,e){t.c=!1,t.a&&(t.f=!0,t.a.abort(),t.f=!1),t.i=e,Ns(t),Ds(t)}function Ns(t){t.G||(t.G=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function ks(t){if(t.c&&void 0!==s)if(t.A[1]&&4==Cs(t)&&2==Ps(t))ps(t.b,xs(t,"Local request error detected and ignored"));else if(t.h&&4==Cs(t))Nn(t.Ub,0,t);else if(t.dispatchEvent("readystatechange"),4==Cs(t)){ps(t.b,xs(t,"Request complete")),t.c=!1;try{var e,n=Ps(t);t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.l).match(Ln)[1]||null;if(!o&&a.self&&a.self.location){var u=a.self.location.protocol;o=u.substr(0,u.length-1)}i=!Es.test(o?o.toLowerCase():"")}e=i}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{try{var c=2<Cs(t)?t.a.statusText:""}catch(e){ps(t.b,"Can not get status: "+e.message),c=""}t.i=c+" ["+Ps(t)+"]",Ns(t)}}finally{Ds(t)}}}function Ds(t,e){if(t.a){Os(t);var n=t.a,r=t.A[0]?f:null;t.a=null,t.A=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(e){(t=t.b)&&t.log(ss,"Problem encountered resetting onreadystatechange: "+e.message,void 0)}}}function Os(t){t.a&&t.u&&(t.a.ontimeout=null),t.s&&(a.clearTimeout(t.s),t.s=null)}function Cs(t){return t.a?t.a.readyState:0}function Ps(t){try{return 2<Cs(t)?t.a.status:-1}catch(t){return-1}}function xs(t,e){return e+" ["+t.P+" "+t.l+" "+Ps(t)+"]"}function Ls(t){var e=zs;this.g=[],this.u=e,this.s=t||null,this.f=this.a=!1,this.c=void 0,this.m=this.A=this.h=!1,this.i=0,this.b=null,this.l=0}function Rs(t,e,n){t.a=!0,t.c=n,t.f=!e,Vs(t)}function Ms(t){if(t.a){if(!t.m)throw new Fs(t);t.m=!1}}function Us(t,e,n,r){t.g.push([e,n,r]),t.a&&Vs(t)}function js(t){return W(t.g,(function(t){return p(t[1])}))}function Vs(t){if(t.i&&t.a&&js(t)){var e=t.i,n=Bs[e];n&&(a.clearTimeout(n.a),delete Bs[e]),t.i=0}t.b&&(t.b.l--,delete t.b),e=t.c;for(var r=n=!1;t.g.length&&!t.h;){var i=t.g.shift(),o=i[0],s=i[1];if(i=i[2],o=t.f?s:o)try{var u=o.call(i||t.s,e);void 0!==u&&(t.f=t.f&&(u==e||u instanceof Error),t.c=e=u),(x(e)||"function"==typeof a.Promise&&e instanceof a.Promise)&&(r=!0,t.h=!0)}catch(r){e=r,t.f=!0,js(t)||(n=!0)}}t.c=e,r&&(u=I(t.v,t,!0),r=I(t.v,t,!1),e instanceof Ls?(Us(e,u,r),e.A=!0):e.then(u,r)),n&&(e=new Hs(e),Bs[e.a]=e,t.i=e.a)}function Fs(){L.call(this)}function qs(){L.call(this)}function Hs(t){this.a=a.setTimeout(I(this.c,this),0),this.b=t}(e=Is.prototype).Ma=function(){void 0!==s&&this.a&&(this.i="Timed out after "+this.g+"ms, aborting",ps(this.b,xs(this,this.i)),this.dispatchEvent("timeout"),this.abort(8))},e.abort=function(){this.a&&this.c&&(ps(this.b,xs(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Ds(this))},e.Da=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),Ds(this,!0)),Is.$a.Da.call(this)},e.Ub=function(){this.xa||(this.N||this.h||this.f?ks(this):this.Ic())},e.Ic=function(){ks(this)},e.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case Ts:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var t=this.b;return t&&t.log(ss,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(t){return ps(this.b,"Can not get response: "+t.message),null}},Ls.prototype.cancel=function(t){if(this.a)this.c instanceof Ls&&this.c.cancel();else{if(this.b){var e=this.b;delete this.b,t?e.cancel(t):(e.l--,0>=e.l&&e.cancel())}this.u?this.u.call(this.s,this):this.m=!0,this.a||(t=new qs(this),Ms(this),Rs(this,!1,t))}},Ls.prototype.v=function(t,e){this.h=!1,Rs(this,t,e)},Ls.prototype.then=function(t,e,n){var r,i,o=new Te((function(t,e){r=t,i=e}));return Us(this,r,(function(t){t instanceof qs?o.cancel():i(t)})),o.then(t,e,n)},Ls.prototype.$goog_Thenable=!0,_(Fs,L),Fs.prototype.message="Deferred has already fired",Fs.prototype.name="AlreadyCalledError",_(qs,L),qs.prototype.message="Deferred was canceled",qs.prototype.name="CanceledError",Hs.prototype.c=function(){throw delete Bs[this.a],this.b};var Bs={};function Gs(t){var e={},n=e.document||document,r=Nt(t).toString(),i=me(document,"SCRIPT"),o={Vb:i,Ma:void 0},s=new Ls(o),u=null,f=null!=e.timeout?e.timeout:5e3;return 0<f&&(u=window.setTimeout((function(){Ks(i,!0);var t=new Xs(Js,"Timeout reached for loading script "+r);Ms(s),Rs(s,!1,t)}),f),o.Ma=u),i.onload=i.onreadystatechange=function(){i.readyState&&"loaded"!=i.readyState&&"complete"!=i.readyState||(Ks(i,e.wd||!1,u),Ms(s),Rs(s,!0,null))},i.onerror=function(){Ks(i,!0,u);var t=new Xs(Ws,"Error while loading script "+r);Ms(s),Rs(s,!1,t)},gt(o=e.attributes||{},{type:"text/javascript",charset:"UTF-8"}),fe(i,o),function(t,e){bt(t,"HTMLScriptElement"),t.src=Nt(e),(e=t.ownerDocument&&t.ownerDocument.defaultView)&&e!=a?e=h(e.document):(null===c&&(c=h(a.document)),e=c),e&&t.setAttribute("nonce",e)}(i,t),function(t){var e;return(e=(t||document).getElementsByTagName("HEAD"))&&0!=e.length?e[0]:t.documentElement}(n).appendChild(i),s}function zs(){if(this&&this.Vb){var t=this.Vb;t&&"SCRIPT"==t.tagName&&Ks(t,!0,this.Ma)}}function Ks(t,e,n){null!=n&&a.clearTimeout(n),t.onload=f,t.onerror=f,t.onreadystatechange=f,e&&window.setTimeout((function(){t&&t.parentNode&&t.parentNode.removeChild(t)}),0)}var Ws=0,Js=1;function Xs(t,e){var n="Jsloader error (code #"+t+")";e&&(n+=": "+e),L.call(this,n),this.code=t}function Ys(t){this.f=t}function $s(t,e,n){if(this.c=t,t=e||{},this.l=t.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.v=t.secureTokenTimeout||ta,this.g=mt(t.secureTokenHeaders||ea),this.i=t.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.h=t.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.m=t.firebaseTimeout||na,this.a=mt(t.firebaseHeaders||ra),n&&(this.a["X-Client-Version"]=n,this.g["X-Client-Version"]=n),n="Node"==_r(),!(n=a.XMLHttpRequest||n&&Y.INTERNAL.node&&Y.INTERNAL.node.XMLHttpRequest)&&!Er())throw new A("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,Er()?this.f=new vs(self):Sr()?this.f=new Ys(n):this.f=new ts,this.b=null}_(Xs,L),_(Ys,Yo),Ys.prototype.a=function(){return new this.f},Ys.prototype.b=function(){return{}};var Qs,Zs="idToken",ta=new Gr(3e4,6e4),ea={"Content-Type":"application/x-www-form-urlencoded"},na=new Gr(3e4,6e4),ra={"Content-Type":"application/json"};function ia(t,e){e?t.a["X-Firebase-Locale"]=e:delete t.a["X-Firebase-Locale"]}function oa(t,e){e&&(t.l=sa("https://securetoken.googleapis.com/v1/token",e),t.i=sa("https://www.googleapis.com/identitytoolkit/v3/relyingparty/",e),t.h=sa("https://identitytoolkit.googleapis.com/v2/",e))}function sa(t,e){return t=qn(t),e=qn(e.url),t.c=t.a+t.c,Mn(t,e.f),t.a=e.a,Un(t,e.g),t.toString()}function aa(t,e){e?(t.a["X-Client-Version"]=e,t.g["X-Client-Version"]=e):(delete t.a["X-Client-Version"],delete t.g["X-Client-Version"])}function ua(t,e,n,r,i,o,s){(function(){var t=Cr();return!((t=kr(t)!=Nr?null:(t=t.match(/\sChrome\/(\d+)/i))&&2==t.length?parseInt(t[1],10):null)&&30>t||Yt&&ue&&!(9<ue))})()||Er()?t=I(t.u,t):(Qs||(Qs=new Te((function(t,e){!function(t,e){((window.gapi||{}).client||{}).request?t():(a[ha]=function(){((window.gapi||{}).client||{}).request?t():e(Error("CORS_UNSUPPORTED"))},function(t,e){Us(t,null,e,void 0)}(Gs(kt(ca,{onload:ha})),(function(){e(Error("CORS_UNSUPPORTED"))})))}(t,e)}))),t=I(t.s,t)),t(e,n,r,i,o,s)}$s.prototype.S=function(){return this.b},$s.prototype.u=function(t,e,n,r,i,o){if(Er()&&(void 0===a.fetch||void 0===a.Headers||void 0===a.Request))throw new A("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var s=new Is(this.f);if(o){s.g=Math.max(0,o);var u=setTimeout((function(){s.dispatchEvent("timeout")}),o)}_n(s,"complete",(function(){u&&clearTimeout(u);var t=null;try{t=JSON.parse(function(t){try{return t.a?t.a.responseText:""}catch(e){return ps(t.b,"Can not get responseText: "+e.message),""}}(this))||null}catch(e){t=null}e&&e(t)})),Sn(s,"ready",(function(){u&&clearTimeout(u),We(this)})),Sn(s,"timeout",(function(){u&&clearTimeout(u),We(this),e&&e(null)})),function(t,e,n,r,i){if(t.a)throw Error("[goog.net.XhrIo] Object is active with another request="+t.l+"; newUri="+e);n=n?n.toUpperCase():"GET",t.l=e,t.i="",t.P=n,t.G=!1,t.c=!0,t.a=t.O?t.O.a():zo.a(),t.A=t.O?$o(t.O):$o(zo),t.a.onreadystatechange=I(t.Ub,t);try{ps(t.b,xs(t,"Opening Xhr")),t.N=!0,t.a.open(n,String(e),!0),t.N=!1}catch(e){return ps(t.b,xs(t,"Error opening Xhr: "+e.message)),void As(t,e)}e=r||"";var o=new Cn(t.headers);i&&function(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(d(t)||"string"==typeof t)G(t,e,void 0);else for(var n=On(t),r=Dn(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}(i,(function(t,e){o.set(e,t)})),i=function(t){t:{for(var e=Ss,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(o.Y()),r=a.FormData&&e instanceof a.FormData,!J(_s,n)||i||r||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach((function(t,e){this.a.setRequestHeader(e,t)}),t),t.m&&(t.a.responseType=t.m),"withCredentials"in t.a&&t.a.withCredentials!==t.R&&(t.a.withCredentials=t.R);try{Os(t),0<t.g&&(t.u=function(t){return Yt&&ae(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(t.a),ps(t.b,xs(t,"Will abort after "+t.g+"ms if incomplete, xhr2 "+t.u)),t.u?(t.a.timeout=t.g,t.a.ontimeout=I(t.Ma,t)):t.s=Nn(t.Ma,t.g,t)),ps(t.b,xs(t,"Sending request")),t.h=!0,t.a.send(e),t.h=!1}catch(e){ps(t.b,xs(t,"Send error: "+e.message)),As(t,e)}}(s,t,n,r,i)};var ca=new wt(_t,"https://apis.google.com/js/client.js?onload=%{onload}"),ha="__fcb"+Math.floor(1e6*Math.random()).toString();function fa(t){if("string"!=typeof(t=t.email)||!br.test(t))throw new A("invalid-email")}function la(t){"email"in t&&fa(t)}function da(t){if(!t[Zs]){if(t.mfaPendingCredential)throw new A("multi-factor-auth-required",null,mt(t));throw new A("internal-error")}}function pa(t){if(t.phoneNumber||t.temporaryProof){if(!t.phoneNumber||!t.temporaryProof)throw new A("internal-error")}else{if(!t.sessionInfo)throw new A("missing-verification-id");if(!t.code)throw new A("missing-verification-code")}}$s.prototype.s=function(t,e,n,r,i){var o=this;Qs.then((function(){window.gapi.client.setApiKey(o.c);var s=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:t,method:n,body:r,headers:i,authType:"none",callback:function(t){window.gapi.auth.setToken(s),e&&e(t)}})})).o((function(t){e&&e({error:{message:t&&t.message||"CORS_UNSUPPORTED"}})}))},$s.prototype.yb=function(){return ru(this,za,{})},$s.prototype.Ab=function(t,e){return ru(this,Ba,{idToken:t,email:e})},$s.prototype.Bb=function(t,e){return ru(this,Ga,{idToken:t,password:e})};var va={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function ma(t){if(!t.phoneVerificationInfo)throw new A("internal-error");if(!t.phoneVerificationInfo.sessionInfo)throw new A("missing-verification-id");if(!t.phoneVerificationInfo.code)throw new A("missing-verification-code")}function ya(t){if(!t.requestUri||!t.sessionId&&!t.postBody&&!t.pendingToken)throw new A("internal-error")}function ga(t,e){return e.oauthIdToken&&e.providerId&&0==e.providerId.indexOf("oidc.")&&!e.pendingToken&&(t.sessionId?e.nonce=t.sessionId:t.postBody&&er(t=new $n(t.postBody),"nonce")&&(e.nonce=t.get("nonce"))),e}function ba(t){var e=null;if(t.needConfirmation?(t.code="account-exists-with-different-credential",e=Xo(t)):"FEDERATED_USER_ID_ALREADY_LINKED"==t.errorMessage?(t.code="credential-already-in-use",e=Xo(t)):"EMAIL_EXISTS"==t.errorMessage?(t.code="email-already-in-use",e=Xo(t)):t.errorMessage&&(e=iu(t.errorMessage)),e)throw e;da(t)}function wa(t,e){return e.returnIdpCredential=!0,ru(t,Ja,e)}function Ia(t,e){return e.returnIdpCredential=!0,ru(t,Ya,e)}function Ta(t,e){return e.returnIdpCredential=!0,e.autoCreate=!1,ru(t,Xa,e)}function Ea(t){if(!t.oobCode)throw new A("invalid-action-code")}(e=$s.prototype).Cb=function(t,e){var n={idToken:t},r=[];return pt(va,(function(t,i){var o=e[i];null===o?r.push(t):i in e&&(n[i]=o)})),r.length&&(n.deleteAttribute=r),ru(this,Ba,n)},e.ub=function(t,e){return gt(t={requestType:"PASSWORD_RESET",email:t},e),ru(this,ja,t)},e.vb=function(t,e){return gt(t={requestType:"EMAIL_SIGNIN",email:t},e),ru(this,Ra,t)},e.tb=function(t,e){return gt(t={requestType:"VERIFY_EMAIL",idToken:t},e),ru(this,Ma,t)},e.Db=function(t,e,n){return gt(t={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:t,newEmail:e},n),ru(this,Ua,t)},e.eb=function(t){return ru(this,Za,t)},e.mb=function(t,e){return ru(this,qa,{oobCode:t,newPassword:e})},e.Qa=function(t){return ru(this,Sa,{oobCode:t})},e.ib=function(t){return ru(this,_a,{oobCode:t})};var _a={endpoint:"setAccountInfo",B:Ea,Z:"email",C:!0},Sa={endpoint:"resetPassword",B:Ea,F:function(t){var e=t.requestType;if(!e||!t.email&&"EMAIL_SIGNIN"!=e&&"VERIFY_AND_CHANGE_EMAIL"!=e)throw new A("internal-error")},C:!0},Aa={endpoint:"signupNewUser",B:function(t){if(fa(t),!t.password)throw new A("weak-password")},F:da,U:!0,C:!0},Na={endpoint:"createAuthUri",C:!0},ka={endpoint:"deleteAccount",M:["idToken"]},Da={endpoint:"setAccountInfo",M:["idToken","deleteProvider"],B:function(t){if(!Array.isArray(t.deleteProvider))throw new A("internal-error")}},Oa={endpoint:"emailLinkSignin",M:["email","oobCode"],B:fa,F:da,U:!0,C:!0},Ca={endpoint:"emailLinkSignin",M:["idToken","email","oobCode"],B:fa,F:da,U:!0},Pa={endpoint:"accounts/mfaEnrollment:finalize",M:["idToken","phoneVerificationInfo"],B:ma,F:da,C:!0,Na:!0},xa={endpoint:"accounts/mfaSignIn:finalize",M:["mfaPendingCredential","phoneVerificationInfo"],B:ma,F:da,C:!0,Na:!0},La={endpoint:"getAccountInfo"},Ra={endpoint:"getOobConfirmationCode",M:["requestType"],B:function(t){if("EMAIL_SIGNIN"!=t.requestType)throw new A("internal-error");fa(t)},Z:"email",C:!0},Ma={endpoint:"getOobConfirmationCode",M:["idToken","requestType"],B:function(t){if("VERIFY_EMAIL"!=t.requestType)throw new A("internal-error")},Z:"email",C:!0},Ua={endpoint:"getOobConfirmationCode",M:["idToken","newEmail","requestType"],B:function(t){if("VERIFY_AND_CHANGE_EMAIL"!=t.requestType)throw new A("internal-error")},Z:"email",C:!0},ja={endpoint:"getOobConfirmationCode",M:["requestType"],B:function(t){if("PASSWORD_RESET"!=t.requestType)throw new A("internal-error");fa(t)},Z:"email",C:!0},Va={kb:!0,endpoint:"getProjectConfig",Tb:"GET"},Fa={kb:!0,endpoint:"getRecaptchaParam",Tb:"GET",F:function(t){if(!t.recaptchaSiteKey)throw new A("internal-error")}},qa={endpoint:"resetPassword",B:Ea,Z:"email",C:!0},Ha={endpoint:"sendVerificationCode",M:["phoneNumber","recaptchaToken"],Z:"sessionInfo",C:!0},Ba={endpoint:"setAccountInfo",M:["idToken"],B:la,U:!0},Ga={endpoint:"setAccountInfo",M:["idToken"],B:function(t){if(la(t),!t.password)throw new A("weak-password")},F:da,U:!0},za={endpoint:"signupNewUser",F:da,U:!0,C:!0},Ka={endpoint:"accounts/mfaEnrollment:start",M:["idToken","phoneEnrollmentInfo"],B:function(t){if(!t.phoneEnrollmentInfo)throw new A("internal-error");if(!t.phoneEnrollmentInfo.phoneNumber)throw new A("missing-phone-number");if(!t.phoneEnrollmentInfo.recaptchaToken)throw new A("missing-app-credential")},F:function(t){if(!t.phoneSessionInfo||!t.phoneSessionInfo.sessionInfo)throw new A("internal-error")},C:!0,Na:!0},Wa={endpoint:"accounts/mfaSignIn:start",M:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],B:function(t){if(!t.phoneSignInInfo||!t.phoneSignInInfo.recaptchaToken)throw new A("missing-app-credential")},F:function(t){if(!t.phoneResponseInfo||!t.phoneResponseInfo.sessionInfo)throw new A("internal-error")},C:!0,Na:!0},Ja={endpoint:"verifyAssertion",B:ya,Xa:ga,F:ba,U:!0,C:!0},Xa={endpoint:"verifyAssertion",B:ya,Xa:ga,F:function(t){if(t.errorMessage&&"USER_NOT_FOUND"==t.errorMessage)throw new A("user-not-found");if(t.errorMessage)throw iu(t.errorMessage);da(t)},U:!0,C:!0},Ya={endpoint:"verifyAssertion",B:function(t){if(ya(t),!t.idToken)throw new A("internal-error")},Xa:ga,F:ba,U:!0},$a={endpoint:"verifyCustomToken",B:function(t){if(!t.token)throw new A("invalid-custom-token")},F:da,U:!0,C:!0},Qa={endpoint:"verifyPassword",B:function(t){if(fa(t),!t.password)throw new A("wrong-password")},F:da,U:!0,C:!0},Za={endpoint:"verifyPhoneNumber",B:pa,F:da,C:!0},tu={endpoint:"verifyPhoneNumber",B:function(t){if(!t.idToken)throw new A("internal-error");pa(t)},F:function(t){if(t.temporaryProof)throw t.code="credential-already-in-use",Xo(t);da(t)}},eu={Gb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",B:pa,F:da,C:!0},nu={endpoint:"accounts/mfaEnrollment:withdraw",M:["idToken","mfaEnrollmentId"],F:function(t){if(!!t[Zs]^!!t.refreshToken)throw new A("internal-error")},C:!0,Na:!0};function ru(t,e,n){if(!function(t,e){if(!e||!e.length)return!0;if(!t)return!1;for(var n=0;n<e.length;n++){var r=t[e[n]];if(null==r||""===r)return!1}return!0}(n,e.M))return Oe(new A("internal-error"));var r,i=!!e.Na,o=e.Tb||"POST";return De(n).then(e.B).then((function(){return e.U&&(n.returnSecureToken=!0),e.C&&t.b&&void 0===n.tenantId&&(n.tenantId=t.b),function(t,e,n,r,i,o,s){var a=qn(e+n);Vn(a,"key",t.c),s&&Vn(a,"cb",E().toString());var u="GET"==r;if(u)for(var c in i)i.hasOwnProperty(c)&&Vn(a,c,i[c]);return new Te((function(e,n){ua(t,a.toString(),(function(t){t?t.error?n(ou(t,o||{})):e(t):n(new A("network-request-failed"))}),r,u?void 0:or(Vr(i)),t.a,t.m.get())}))}(t,i?t.h:t.i,e.endpoint,o,n,e.Gb,e.kb||!1)})).then((function(t){return r=t,e.Xa?e.Xa(n,r):r})).then(e.F).then((function(){if(!e.Z)return r;if(!(e.Z in r))throw new A("internal-error");return r[e.Z]}))}function iu(t){return ou({error:{errors:[{message:t}],code:400,message:t}})}function ou(t,e){var n=(t.error&&t.error.errors&&t.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new A(r[n]):null)return n;for(var i in n=t.error&&t.error.message||"",gt(r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},e||{}),e=(e=n.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<e.length?e[1]:void 0,r)if(0===n.indexOf(i))return new A(r[i],e);return!e&&t&&(e=jr(t)),new A("internal-error",e)}function su(t){this.b=t,this.a=null,this.qb=function(t){return(hu||(hu=new Te((function(t,e){function n(){Br(),Pr("gapi.load")("gapi.iframes",{callback:t,ontimeout:function(){Br(),e(Error("Network Error"))},timeout:uu.get()})}if(Pr("gapi.iframes.Iframe"))t();else if(Pr("gapi.load"))n();else{var r="__iframefcb"+Math.floor(1e6*Math.random()).toString();a[r]=function(){Pr("gapi.load")?n():e(Error("Network Error"))},De(Gs(r=kt(au,{onload:r}))).o((function(){e(Error("Network Error"))}))}})).o((function(t){throw hu=null,t})))).then((function(){return new Te((function(e,n){Pr("gapi.iframes.getContext")().open({where:document.body,url:t.b,messageHandlersFilter:Pr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},(function(r){function i(){clearTimeout(o),e()}t.a=r,t.a.restyle({setHideOnLeave:!1});var o=setTimeout((function(){n(Error("Network Error"))}),cu.get());r.ping(i).then(i,(function(){n(Error("Network Error"))}))}))}))}))}(this)}var au=new wt(_t,"https://apis.google.com/js/api.js?onload=%{onload}"),uu=new Gr(3e4,6e4),cu=new Gr(5e3,15e3),hu=null;function fu(t,e,n,r){this.l=t,this.i=e,this.h=n,this.g=r,this.f=null,t=this.g?Hn((t=qn(this.g.url)).f,t.a,t.g,"/emulator/auth/iframe"):Hn("https",this.l,null,"/__/auth/iframe"),this.a=t,Vn(this.a,"apiKey",this.i),Vn(this.a,"appName",this.h),this.b=null,this.c=[]}function lu(t,e,n,r,i,o){this.u=t,this.s=e,this.c=n,this.v=r,this.m=o,this.h=this.g=this.l=null,this.a=i,this.i=this.f=null}function du(t){try{return Y.app(t).auth().Ga()}catch(t){return[]}}function pu(t,e,n,r,i,o){this.s=t,this.g=e,this.b=n,this.f=o,this.c=r||null,this.h=i||null,this.l=this.u=this.A=null,this.i=[],this.v=this.a=null}function vu(t){var e=lr();return function(t){return ru(t,Va,{}).then((function(t){return t.authorizedDomains||[]}))}(t).then((function(t){t:{var n=qn(e),r=n.f;n=n.a;for(var i=0;i<t.length;i++){var o=t[i],s=n,a=r;if(0==o.indexOf("chrome-extension://")?s=qn(o).a==s&&"chrome-extension"==a:"http"!=a&&"https"!=a?s=!1:gr.test(o)?s=s==o:(o=o.split(".").join("\\."),s=new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)),s){t=!0;break t}}t=!1}if(!t)throw new Wo(lr())}))}function mu(t){return t.v||(t.v=wr().then((function(){if(!t.u){var e=t.c,n=t.h,r=du(t.b),i=new fu(t.s,t.g,t.b,t.f);i.f=e,i.b=n,i.c=Z(r||[]),t.u=i.toString()}t.m=new su(t.u),function(t){if(!t.m)throw Error("IfcHandler must be initialized!");!function(t,e){t.qb.then((function(){t.a.register("authEvent",e,Pr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}(t.m,(function(e){var n={};if(e&&e.authEvent){var r=!1;for(e=Bo(e.authEvent),n=0;n<t.i.length;n++)r=t.i[n](e)||r;return(n={}).status=r?"ACK":"ERROR",De(n)}return n.status="ERROR",De(n)}))}(t)}))),t.v}function yu(t){return t.l||(t.A=t.c?Or(t.c,du(t.b)):null,t.l=new $s(t.g,P(t.h),t.A),t.f&&oa(t.l,t.f)),t.l}function gu(t,e,n,r,i,o,s,a,u,c,h,f){return(t=new lu(t,e,n,r,i,f)).l=o,t.g=s,t.h=a,t.b=mt(u||null),t.f=c,t.xb(h).toString()}function bu(t){if(this.a=t||Y.INTERNAL.reactNative&&Y.INTERNAL.reactNative.AsyncStorage,!this.a)throw new A("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function wu(t){this.b=t,this.a={},this.f=I(this.c,this)}fu.prototype.toString=function(){return this.f?Vn(this.a,"v",this.f):tr(this.a.b,"v"),this.b?Vn(this.a,"eid",this.b):tr(this.a.b,"eid"),this.c.length?Vn(this.a,"fw",this.c.join(",")):tr(this.a.b,"fw"),this.a.toString()},lu.prototype.xb=function(t){return this.i=t,this},lu.prototype.toString=function(){if(this.m){var t=qn(this.m.url);t=Hn(t.f,t.a,t.g,"/emulator/auth/handler")}else t=Hn("https",this.u,null,"/__/auth/handler");if(Vn(t,"apiKey",this.s),Vn(t,"appName",this.c),Vn(t,"authType",this.v),this.a.isOAuthProvider){var e=this.a;try{var n=Y.app(this.c).auth().ka()}catch(t){n=null}for(var r in e.nb=n,Vn(t,"providerId",this.a.providerId),e=Vr((n=this.a).Hb))e[r]=e[r].toString();r=n.Pc,e=mt(e);for(var i=0;i<r.length;i++){var o=r[i];o in e&&delete e[o]}n.ob&&n.nb&&!e[n.ob]&&(e[n.ob]=n.nb),vt(e)||Vn(t,"customParameters",jr(e))}if("function"==typeof this.a.Pb&&(n=this.a.Pb()).length&&Vn(t,"scopes",n.join(",")),this.l?Vn(t,"redirectUrl",this.l):tr(t.b,"redirectUrl"),this.g?Vn(t,"eventId",this.g):tr(t.b,"eventId"),this.h?Vn(t,"v",this.h):tr(t.b,"v"),this.b)for(var s in this.b)this.b.hasOwnProperty(s)&&!Fn(t,s)&&Vn(t,s,this.b[s]);return this.i?Vn(t,"tid",this.i):tr(t.b,"tid"),this.f?Vn(t,"eid",this.f):tr(t.b,"eid"),(s=du(this.c)).length&&Vn(t,"fw",s.join(",")),t.toString()},(e=pu.prototype).Nb=function(t,e,n){var r=new A("popup-closed-by-user"),i=new A("web-storage-unsupported"),o=this,s=!1;return this.la().then((function(){(function(t){var e={type:"webStorageSupport"};return mu(t).then((function(){return function(t,e){return t.qb.then((function(){return new Te((function(n){t.a.send(e.type,e,n,Pr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}))}(t.m,e)})).then((function(t){if(t&&t.length&&void 0!==t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()}))})(o).then((function(n){n||(t&&mr(t),e(i),s=!0)}))})).o((function(){})).then((function(){if(!s)return function(t){return new Te((function(e){return function n(){kn(2e3).then((function(){if(t&&!t.closed)return n();e()}))}()}))}(t)})).then((function(){if(!s)return kn(n).then((function(){e(r)}))}))},e.Wb=function(){var t=Cr();return!Ur(t)&&!Hr(t)},e.Sb=function(){return!1},e.Lb=function(t,e,n,r,i,o,s,a){if(!t)return Oe(new A("popup-blocked"));if(s&&!Ur())return this.la().o((function(e){mr(t),i(e)})),r(),De();this.a||(this.a=vu(yu(this)));var u=this;return this.a.then((function(){var e=u.la().o((function(e){throw mr(t),i(e),e}));return r(),e})).then((function(){qo(n),s||dr(gu(u.s,u.g,u.b,e,n,null,o,u.c,void 0,u.h,a,u.f),t)})).o((function(t){throw"auth/network-request-failed"==t.code&&(u.a=null),t}))},e.Mb=function(t,e,n,r){this.a||(this.a=vu(yu(this)));var i=this;return this.a.then((function(){qo(e),dr(gu(i.s,i.g,i.b,t,e,lr(),n,i.c,void 0,i.h,r,i.f))})).o((function(t){throw"auth/network-request-failed"==t.code&&(i.a=null),t}))},e.la=function(){var t=this;return mu(this).then((function(){return t.m.qb})).o((function(){throw t.a=null,new A("network-request-failed")}))},e.Zb=function(){return!0},e.Ea=function(t){this.i.push(t)},e.Ra=function(t){$(this.i,(function(e){return e==t}))},(e=bu.prototype).get=function(t){return De(this.a.getItem(t)).then((function(t){return t&&Fr(t)}))},e.set=function(t,e){return De(this.a.setItem(t,jr(e)))},e.T=function(t){return De(this.a.removeItem(t))},e.ca=function(){},e.ia=function(){};var Iu,Tu=[];function Eu(t,e,n){vt(t.a)&&t.b.addEventListener("message",t.f),void 0===t.a[e]&&(t.a[e]=[]),t.a[e].push(n)}function _u(t){this.a=t}function Su(t){this.c=t,this.b=!1,this.a=[]}function Au(t,e,n,r){var i,o,s,a,u=n||{},c=null;if(t.b)return Oe(Error("connection_unavailable"));var h=r?800:50,f="undefined"!=typeof MessageChannel?new MessageChannel:null;return new Te((function(n,r){f?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),f.port1.start(),s=setTimeout((function(){r(Error("unsupported_event"))}),h),c={messageChannel:f,onMessage:o=function(t){t.data.eventId===i&&("ack"===t.data.status?(clearTimeout(s),a=setTimeout((function(){r(Error("timeout"))}),3e3)):"done"===t.data.status?(clearTimeout(a),void 0!==t.data.response?n(t.data.response):r(Error("unknown_error"))):(clearTimeout(s),clearTimeout(a),r(Error("invalid_response"))))}},t.a.push(c),f.port1.addEventListener("message",o),t.c.postMessage({eventType:e,eventId:i,data:u},[f.port2])):r(Error("connection_unavailable"))})).then((function(e){return Nu(t,c),e})).o((function(e){throw Nu(t,c),e}))}function Nu(t,e){if(e){var n=e.messageChannel,r=e.onMessage;n&&(n.port1.removeEventListener("message",r),n.port1.close()),$(t.a,(function(t){return t==e}))}}function ku(){if(!Pu())throw new A("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.v=a.indexedDB,this.type="indexedDB",this.g=this.m=this.f=this.l=null,this.s=!1,this.i=null;var t=this;Er()&&self?(this.m=function(){var t=Er()?self:null;if(G(Tu,(function(n){n.b==t&&(e=n)})),!e){var e=new wu(t);Tu.push(e)}return e}(),Eu(this.m,"keyChanged",(function(e,n){return Uu(t).then((function(e){return 0<e.length&&G(t.a,(function(t){t(e)})),{keyProcessed:J(e,n.key)}}))})),Eu(this.m,"ping",(function(){return De(["keyChanged"])}))):function(){var t=a.navigator;return t&&t.serviceWorker?De().then((function(){return t.serviceWorker.ready})).then((function(t){return t.active||null})).o((function(){return null})):De(null)}().then((function(e){(t.i=e)&&(t.g=new Su(new _u(e)),Au(t.g,"ping",null,!0).then((function(e){e[0].fulfilled&&J(e[0].value,"keyChanged")&&(t.s=!0)})).o((function(){})))}))}function Du(t){return new Te((function(e,n){var r=t.v.open("firebaseLocalStorageDb",1);r.onerror=function(t){try{t.preventDefault()}catch(t){}n(Error(t.target.error))},r.onupgradeneeded=function(t){t=t.target.result;try{t.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(t){n(t)}},r.onsuccess=function(r){(r=r.target.result).objectStoreNames.contains("firebaseLocalStorage")?e(r):function(t){return new Te((function(e,n){var r=t.v.deleteDatabase("firebaseLocalStorageDb");r.onsuccess=function(){e()},r.onerror=function(t){n(Error(t.target.error))}}))}(t).then((function(){return Du(t)})).then((function(t){e(t)})).o((function(t){n(t)}))}}))}function Ou(t){return t.h||(t.h=Du(t)),t.h}function Cu(t,e){var n=0;return new Te((function r(i,o){Ou(t).then(e).then(i).o((function(e){if(!(3<++n))return Ou(t).then((function(e){return e.close(),t.h=void 0,r(i,o)})).o((function(t){o(t)}));o(e)}))}))}function Pu(){try{return!!a.indexedDB}catch(t){return!1}}function xu(t){return t.objectStore("firebaseLocalStorage")}function Lu(t,e){return t.transaction(["firebaseLocalStorage"],e?"readwrite":"readonly")}function Ru(t){return new Te((function(e,n){t.onsuccess=function(t){t&&t.target?e(t.target.result):e()},t.onerror=function(t){n(t.target.error)}}))}function Mu(t,e){return t.g&&t.i&&function(){var t=a.navigator;return t&&t.serviceWorker&&t.serviceWorker.controller||null}()===t.i?Au(t.g,"keyChanged",{key:e},t.s).then((function(){})).o((function(){})):De()}function Uu(t){return Ou(t).then((function(t){var e=xu(Lu(t,!1));return e.getAll?Ru(e.getAll()):new Te((function(t,n){var r=[],i=e.openCursor();i.onsuccess=function(e){(e=e.target.result)?(r.push(e.value),e.continue()):t(r)},i.onerror=function(t){n(t.target.error)}}))})).then((function(e){var n={},r=[];if(0==t.b){for(r=0;r<e.length;r++)n[e[r].fbase_key]=e[r].value;r=pr(t.c,n),t.c=n}return r}))}function ju(t){t.l&&t.l.cancel("STOP_EVENT"),t.f&&(clearTimeout(t.f),t.f=null)}function Vu(t){var e=this,n=null;this.a=[],this.type="indexedDB",this.c=t,this.b=De().then((function(){if(Pu()){var t=qr(),r="__sak"+t;return Iu||(Iu=new ku),(n=Iu).set(r,t).then((function(){return n.get(r)})).then((function(e){if(e!==t)throw Error("indexedDB not supported!");return n.T(r)})).then((function(){return n})).o((function(){return e.c}))}return e.c})).then((function(t){return e.type=t.type,t.ca((function(t){G(e.a,(function(e){e(t)}))})),t}))}function Fu(){this.a={},this.type="inMemory"}function qu(){if(!function(){var t="Node"==_r();if(!(t=Hu()||t&&Y.INTERNAL.node&&Y.INTERNAL.node.localStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==_r())throw new A("internal-error","The LocalStorage compatibility library was not found.");throw new A("web-storage-unsupported")}this.a=Hu()||Y.INTERNAL.node.localStorage,this.type="localStorage"}function Hu(){try{var t=a.localStorage,e=qr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function Bu(){this.type="nullStorage"}function Gu(){if(!function(){var t="Node"==_r();if(!(t=zu()||t&&Y.INTERNAL.node&&Y.INTERNAL.node.sessionStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==_r())throw new A("internal-error","The SessionStorage compatibility library was not found.");throw new A("web-storage-unsupported")}this.a=zu()||Y.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function zu(){try{var t=a.sessionStorage,e=qr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function Ku(){var t={};t.Browser=Xu,t.Node=Yu,t.ReactNative=$u,t.Worker=Qu,this.a=t[_r()]}wu.prototype.c=function(t){var e=t.data.eventType,n=t.data.eventId,r=this.a[e];if(r&&0<r.length){t.ports[0].postMessage({status:"ack",eventId:n,eventType:e,response:null});var i=[];G(r,(function(e){i.push(De().then((function(){return e(t.origin,t.data.data)})))})),Pe(i).then((function(r){var i=[];G(r,(function(t){i.push({fulfilled:t.Ob,value:t.value,reason:t.reason?t.reason.message:void 0})})),G(i,(function(t){for(var e in t)void 0===t[e]&&delete t[e]})),t.ports[0].postMessage({status:"done",eventId:n,eventType:e,response:i})}))}},_u.prototype.postMessage=function(t,e){this.a.postMessage(t,e)},Su.prototype.close=function(){for(;0<this.a.length;)Nu(this,this.a[0]);this.b=!0},(e=ku.prototype).set=function(t,e){var n=this,r=!1;return Cu(this,(function(e){return Ru((e=xu(Lu(e,!0))).get(t))})).then((function(i){return Cu(n,(function(o){if(o=xu(Lu(o,!0)),i)return i.value=e,Ru(o.put(i));n.b++,r=!0;var s={};return s.fbase_key=t,s.value=e,Ru(o.add(s))}))})).then((function(){return n.c[t]=e,Mu(n,t)})).na((function(){r&&n.b--}))},e.get=function(t){return Cu(this,(function(e){return Ru(xu(Lu(e,!1)).get(t))})).then((function(t){return t&&t.value}))},e.T=function(t){var e=this,n=!1;return Cu(this,(function(r){return n=!0,e.b++,Ru(xu(Lu(r,!0)).delete(t))})).then((function(){return delete e.c[t],Mu(e,t)})).na((function(){n&&e.b--}))},e.ca=function(t){0==this.a.length&&function(t){ju(t),function e(){t.f=setTimeout((function(){t.l=Uu(t).then((function(e){0<e.length&&G(t.a,(function(t){t(e)}))})).then((function(){e()})).o((function(t){"STOP_EVENT"!=t.message&&e()}))}),800)}()}(this),this.a.push(t)},e.ia=function(t){$(this.a,(function(e){return e==t})),0==this.a.length&&ju(this)},(e=Vu.prototype).get=function(t){return this.b.then((function(e){return e.get(t)}))},e.set=function(t,e){return this.b.then((function(n){return n.set(t,e)}))},e.T=function(t){return this.b.then((function(e){return e.T(t)}))},e.ca=function(t){this.a.push(t)},e.ia=function(t){$(this.a,(function(e){return e==t}))},(e=Fu.prototype).get=function(t){return De(this.a[t])},e.set=function(t,e){return this.a[t]=e,De()},e.T=function(t){return delete this.a[t],De()},e.ca=function(){},e.ia=function(){},(e=qu.prototype).get=function(t){var e=this;return De().then((function(){return Fr(e.a.getItem(t))}))},e.set=function(t,e){var n=this;return De().then((function(){var r=jr(e);null===r?n.T(t):n.a.setItem(t,r)}))},e.T=function(t){var e=this;return De().then((function(){e.a.removeItem(t)}))},e.ca=function(t){a.window&&fn(a.window,"storage",t)},e.ia=function(t){a.window&&pn(a.window,"storage",t)},(e=Bu.prototype).get=function(){return De(null)},e.set=function(){return De()},e.T=function(){return De()},e.ca=function(){},e.ia=function(){},(e=Gu.prototype).get=function(t){var e=this;return De().then((function(){return Fr(e.a.getItem(t))}))},e.set=function(t,e){var n=this;return De().then((function(){var r=jr(e);null===r?n.T(t):n.a.setItem(t,r)}))},e.T=function(t){var e=this;return De().then((function(){e.a.removeItem(t)}))},e.ca=function(){},e.ia=function(){};var Wu,Ju,Xu={D:qu,ab:Gu},Yu={D:qu,ab:Gu},$u={D:bu,ab:Bu},Qu={D:qu,ab:Bu},Zu={qd:"local",NONE:"none",sd:"session"};function tc(){var t=!(Hr(Cr())||!Tr()),e=Ur(),n=xr();this.v=t,this.i=e,this.l=n,this.a={},Wu||(Wu=new Ku),t=Wu;try{this.g=!fr()&&Wr()||!a.indexedDB?new t.a.D:new Vu(Er()?new Fu:new t.a.D)}catch(t){this.g=new Fu,this.i=!0}try{this.h=new t.a.ab}catch(t){this.h=new Fu}this.m=new Fu,this.f=I(this.Xb,this),this.b={}}function ec(){return Ju||(Ju=new tc),Ju}function nc(t,e){switch(e){case"session":return t.h;case"none":return t.m;default:return t.g}}function rc(t,e){return"firebase:"+t.name+(e?":"+e:"")}function ic(t,e,n){return n=rc(e,n),"local"==e.D&&(t.b[n]=null),nc(t,e.D).T(n)}function oc(t){t.c&&(clearInterval(t.c),t.c=null)}function sc(t){this.a=t,this.b=ec()}(e=tc.prototype).get=function(t,e){return nc(this,t.D).get(rc(t,e))},e.set=function(t,e,n){var r=rc(t,n),i=this,o=nc(this,t.D);return o.set(r,e).then((function(){return o.get(r)})).then((function(e){"local"==t.D&&(i.b[r]=e)}))},e.addListener=function(t,e,n){t=rc(t,e),this.l&&(this.b[t]=a.localStorage.getItem(t)),vt(this.a)&&(nc(this,"local").ca(this.f),this.i||(fr()||!Wr())&&a.indexedDB||!this.l||function(t){oc(t),t.c=setInterval((function(){for(var e in t.a){var n=a.localStorage.getItem(e),r=t.b[e];n!=r&&(t.b[e]=n,n=new Ze({type:"storage",key:e,target:window,oldValue:r,newValue:n,a:!0}),t.Xb(n))}}),1e3)}(this)),this.a[t]||(this.a[t]=[]),this.a[t].push(n)},e.removeListener=function(t,e,n){t=rc(t,e),this.a[t]&&($(this.a[t],(function(t){return t==n})),0==this.a[t].length&&delete this.a[t]),vt(this.a)&&(nc(this,"local").ia(this.f),oc(this))},e.Xb=function(t){if(t&&t.g){var e=t.a.key;if(null==e)for(var n in this.a){var r=this.b[n];void 0===r&&(r=null);var i=a.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.lb(n))}else if(0==e.indexOf("firebase:")&&this.a[e]){if(void 0!==t.a.a?nc(this,"local").ia(this.f):oc(this),this.v)if(n=a.localStorage.getItem(e),(r=t.a.newValue)!==n)null!==r?a.localStorage.setItem(e,r):a.localStorage.removeItem(e);else if(this.b[e]===r&&void 0===t.a.a)return;var o=this;n=function(){void 0===t.a.a&&o.b[e]===a.localStorage.getItem(e)||(o.b[e]=a.localStorage.getItem(e),o.lb(e))},Yt&&ue&&10==ue&&a.localStorage.getItem(e)!==t.a.newValue&&t.a.newValue!==t.a.oldValue?setTimeout(n,10):n()}}else G(t,I(this.lb,this))},e.lb=function(t){this.a[t]&&G(this.a[t],(function(t){t()}))};var ac,uc={name:"authEvent",D:"local"};function cc(){this.a=ec()}function hc(t,e){this.b=fc,this.f=a.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.h=t,this.i=e,this.l=a.Int32Array?new Int32Array(64):Array(64),void 0===ac&&(ac=a.Int32Array?new Int32Array(gc):gc),this.reset()}_(hc,(function(){this.b=-1}));for(var fc=64,lc=fc-1,dc=[],pc=0;pc<lc;pc++)dc[pc]=0;var vc=Q(128,dc);function mc(t){for(var e=t.f,n=t.l,r=0,i=0;i<e.length;)n[r++]=e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3],i=4*r;for(e=16;64>e;e++){i=0|n[e-15],r=0|n[e-2];var o=(0|n[e-16])+((i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,s=(0|n[e-7])+((r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[e]=o+s|0}r=0|t.a[0],i=0|t.a[1];var a=0|t.a[2],u=0|t.a[3],c=0|t.a[4],h=0|t.a[5],f=0|t.a[6];for(o=0|t.a[7],e=0;64>e;e++){var l=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&a^i&a)|0;s=(o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0)+((s=(s=c&h^~c&f)+(0|ac[e])|0)+(0|n[e])|0)|0,o=f,f=h,h=c,c=u+s|0,u=a,a=i,i=r,r=s+l|0}t.a[0]=t.a[0]+r|0,t.a[1]=t.a[1]+i|0,t.a[2]=t.a[2]+a|0,t.a[3]=t.a[3]+u|0,t.a[4]=t.a[4]+c|0,t.a[5]=t.a[5]+h|0,t.a[6]=t.a[6]+f|0,t.a[7]=t.a[7]+o|0}function yc(t,e,n){void 0===n&&(n=e.length);var r=0,i=t.c;if("string"==typeof e)for(;r<n;)t.f[i++]=e.charCodeAt(r++),i==t.b&&(mc(t),i=0);else{if(!d(e))throw Error("message must be string or array");for(;r<n;){var o=e[r++];if(!("number"==typeof o&&0<=o&&255>=o&&o==(0|o)))throw Error("message must be a byte array");t.f[i++]=o,i==t.b&&(mc(t),i=0)}}t.c=i,t.g+=n}hc.prototype.reset=function(){this.g=this.c=0,this.a=a.Int32Array?new Int32Array(this.i):Z(this.i)};var gc=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function bc(){hc.call(this,8,wc)}_(bc,hc);var wc=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function Ic(t,e,n,r,i,o){this.m=t,this.h=e,this.l=n,this.v=r||null,this.u=i||null,this.s=o,this.i=e+":"+n,this.A=new cc,this.g=new sc(this.i),this.f=null,this.b=[],this.a=this.c=null}function Tc(t){return new A("invalid-cordova-configuration",t)}function Ec(t,e){for(var n=0;n<t.b.length;n++)try{t.b[n](e)}catch(t){}}function _c(t){return t.f||(t.f=t.la().then((function(){return new Te((function(e){t.Ea((function n(r){return e(r),t.Ra(n),!1})),function(t){function e(e){r=!0,i&&i.cancel(),Sc(t).then((function(r){var i=n;if(r&&e&&e.url){var o=null;-1!=(i=so(e.url)).indexOf("/__/auth/callback")&&(o=(o="object"==typeof(o=Fr(Fn(o=qn(i),"firebaseError")||null))?N(o):null)?new Ho(r.c,r.b,null,null,o,null,r.S()):new Ho(r.c,r.b,i,r.f,null,null,r.S())),i=o||n}Ec(t,i)}))}var n=new Ho("unknown",null,null,null,new A("no-auth-event")),r=!1,i=kn(500).then((function(){return Sc(t).then((function(){r||Ec(t,n)}))})),o=a.handleOpenURL;a.handleOpenURL=function(t){if(0==t.toLowerCase().indexOf(Pr("BuildInfo.packageName",a).toLowerCase()+"://")&&e({url:t}),"function"==typeof o)try{o(t)}catch(t){console.error(t)}},Ko||(Ko=new Go),function(t){var e=Ko;e.a.push(t),e.b||(e.b=function(t){for(var n=0;n<e.a.length;n++)e.a[n](t)},"function"==typeof(t=Pr("universalLinks.subscribe",a))&&t(null,e.b))}(e)}(t)}))}))),t.f}function Sc(t){var e=null;return function(t){return t.b.get(uc,t.a).then((function(t){return Bo(t)}))}(t.g).then((function(n){return e=n,ic((n=t.g).b,uc,n.a)})).then((function(){return e}))}function Ac(t){this.a=t,this.b=ec()}(e=Ic.prototype).la=function(){return this.Ia?this.Ia:this.Ia=(Ir(void 0)?wr().then((function(){return new Te((function(t,e){var n=a.document,r=setTimeout((function(){e(Error("Cordova framework is not ready."))}),1e3);n.addEventListener("deviceready",(function(){clearTimeout(r),t()}),!1)}))})):Oe(Error("Cordova must run in an Android or iOS file scheme."))).then((function(){if("function"!=typeof Pr("universalLinks.subscribe",a))throw Tc("cordova-universal-links-plugin-fix is not installed");if(void 0===Pr("BuildInfo.packageName",a))throw Tc("cordova-plugin-buildinfo is not installed");if("function"!=typeof Pr("cordova.plugins.browsertab.openUrl",a))throw Tc("cordova-plugin-browsertab is not installed");if("function"!=typeof Pr("cordova.InAppBrowser.open",a))throw Tc("cordova-plugin-inappbrowser is not installed")}),(function(){throw new A("cordova-not-ready")}))},e.Nb=function(t,e){return e(new A("operation-not-supported-in-this-environment")),De()},e.Lb=function(){return Oe(new A("operation-not-supported-in-this-environment"))},e.Zb=function(){return!1},e.Wb=function(){return!0},e.Sb=function(){return!0},e.Mb=function(t,e,n,r){if(this.c)return Oe(new A("redirect-operation-pending"));var i=this,o=a.document,s=null,u=null,c=null,h=null;return this.c=De().then((function(){return qo(e),_c(i)})).then((function(){return function(t,e,n,r,i){var o=function(){for(var t=20,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}(),s=new Ho(e,r,null,o,new A("no-auth-event"),null,i),u=Pr("BuildInfo.packageName",a);if("string"!=typeof u)throw new A("invalid-cordova-configuration");var c=Pr("BuildInfo.displayName",a),h={};if(Cr().toLowerCase().match(/iphone|ipad|ipod/))h.ibi=u;else{if(!Cr().toLowerCase().match(/android/))return Oe(new A("operation-not-supported-in-this-environment"));h.apn=u}c&&(h.appDisplayName=c),o=function(t){var e=new bc;yc(e,t),t=[];var n=8*e.g;56>e.c?yc(e,vc,56-e.c):yc(e,vc,e.b-(e.c-56));for(var r=63;56<=r;r--)e.f[r]=255&n,n/=256;for(mc(e),r=n=0;r<e.h;r++)for(var i=24;0<=i;i-=8)t[n++]=e.a[r]>>i&255;return function(t){return K(t,(function(t){return 1<(t=t.toString(16)).length?t:"0"+t})).join("")}(t)}(o),h.sessionId=o;var f=gu(t.m,t.h,t.l,e,n,null,r,t.v,h,t.u,i,t.s);return t.la().then((function(){var e=t.i;return t.A.a.set(uc,s.w(),e)})).then((function(){var e=Pr("cordova.plugins.browsertab.isAvailable",a);if("function"!=typeof e)throw new A("invalid-cordova-configuration");var n=null;e((function(e){if(e){if("function"!=typeof(n=Pr("cordova.plugins.browsertab.openUrl",a)))throw new A("invalid-cordova-configuration");n(f)}else{if("function"!=typeof(n=Pr("cordova.InAppBrowser.open",a)))throw new A("invalid-cordova-configuration");e=Cr(),t.a=n(f,e.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||e.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}}))}))}(i,t,e,n,r)})).then((function(){return new Te((function(t,e){u=function(){var e=Pr("cordova.plugins.browsertab.close",a);return t(),"function"==typeof e&&e(),i.a&&"function"==typeof i.a.close&&(i.a.close(),i.a=null),!1},i.Ea(u),c=function(){s||(s=kn(2e3).then((function(){e(new A("redirect-cancelled-by-user"))})))},h=function(){zr()&&c()},o.addEventListener("resume",c,!1),Cr().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",h,!1)})).o((function(t){return Sc(i).then((function(){throw t}))}))})).na((function(){c&&o.removeEventListener("resume",c,!1),h&&o.removeEventListener("visibilitychange",h,!1),s&&s.cancel(),u&&i.Ra(u),i.c=null}))},e.Ea=function(t){this.b.push(t),_c(this).o((function(e){"auth/invalid-cordova-configuration"===e.code&&(e=new Ho("unknown",null,null,null,new A("no-auth-event")),t(e))}))},e.Ra=function(t){$(this.b,(function(e){return e==t}))};var Nc={name:"pendingRedirect",D:"session"};function kc(t){return ic(t.b,Nc,t.a)}function Dc(t,e,n,r){this.h={},this.u=0,this.O=t,this.m=e,this.v=n,this.G=r,this.i=[],this.f=!1,this.l=I(this.s,this),this.b=new Gc,this.A=new Xc,this.g=new Ac(Hc(this.m,this.v)),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.A,this.c.linkViaPopup=this.A,this.c.reauthViaPopup=this.A,this.a=Oc(this.O,this.m,this.v,k,this.G)}function Oc(t,e,n,r,i){var o=Y.SDK_VERSION||null;return Ir()?new Ic(t,e,n,o,r,i):new pu(t,e,n,o,r,i)}function Cc(t){t.f||(t.f=!0,t.a.Ea(t.l));var e=t.a;return t.a.la().o((function(n){throw t.a==e&&t.reset(),n}))}function Pc(t){t.a.Wb()&&Cc(t).o((function(e){var n=new Ho("unknown",null,null,null,new A("operation-not-supported-in-this-environment"));jc(e)&&t.s(n)})),t.a.Sb()||zc(t.b)}function xc(t,e){J(t.i,e)||t.i.push(e),t.f||function(t){return t.b.get(Nc,t.a).then((function(t){return"pending"==t}))}(t.g).then((function(e){e?kc(t.g).then((function(){Cc(t).o((function(e){var n=new Ho("unknown",null,null,null,new A("operation-not-supported-in-this-environment"));jc(e)&&t.s(n)}))})):Pc(t)})).o((function(){Pc(t)}))}function Lc(t,e){$(t.i,(function(t){return t==e}))}Dc.prototype.reset=function(){this.f=!1,this.a.Ra(this.l),this.a=Oc(this.O,this.m,this.v,null,this.G),this.h={}},Dc.prototype.s=function(t){if(!t)throw new A("invalid-auth-event");if(6e5<=E()-this.u&&(this.h={},this.u=0),t&&t.getUid()&&this.h.hasOwnProperty(t.getUid()))return!1;for(var e=!1,n=0;n<this.i.length;n++){var r=this.i[n];if(r.Eb(t.c,t.b)){(e=this.c[t.c])&&(e.i(t,r),t&&(t.f||t.b)&&(this.h[t.getUid()]=!0,this.u=E())),e=!0;break}}return zc(this.b),e};var Rc=new Gr(2e3,1e4),Mc=new Gr(3e4,6e4);function Uc(t,e,n,r,i,o,s){return t.a.Lb(e,n,r,(function(){t.f||(t.f=!0,t.a.Ea(t.l))}),(function(){t.reset()}),i,o,s)}function jc(t){return!(!t||"auth/cordova-not-ready"!=t.code)}function Vc(t,e,n,r,i){var o;return function(t){return t.b.set(Nc,"pending",t.a)}(t.g).then((function(){return t.a.Mb(e,n,r,i).o((function(e){if(jc(e))throw new A("operation-not-supported-in-this-environment");return o=e,kc(t.g).then((function(){throw o}))})).then((function(){return t.a.Zb()?new Te((function(){})):kc(t.g).then((function(){return t.qa()})).then((function(){})).o((function(){}))}))}))}function Fc(t,e,n,r,i){return t.a.Nb(r,(function(t){e.ma(n,null,t,i)}),Rc.get())}Dc.prototype.qa=function(){return this.b.qa()};var qc={};function Hc(t,e,n){return t=t+":"+e,n&&(t=t+":"+n.url),t}function Bc(t,e,n,r){var i=Hc(e,n,r);return qc[i]||(qc[i]=new Dc(t,e,n,r)),qc[i]}function Gc(){this.b=null,this.f=[],this.c=[],this.a=null,this.h=this.g=!1}function zc(t){t.g||(t.g=!0,Jc(t,!1,null,null))}function Kc(t){t.g&&!t.h&&Jc(t,!1,null,null)}function Wc(t,e){if(t.b=function(){return De(e)},t.f.length)for(var n=0;n<t.f.length;n++)t.f[n](e)}function Jc(t,e,n,r){e?r?function(t,e){if(t.b=function(){return Oe(e)},t.c.length)for(var n=0;n<t.c.length;n++)t.c[n](e)}(t,r):Wc(t,n):Wc(t,{user:null}),t.f=[],t.c=[]}function Xc(){}function Yc(){this.hb=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.hb},set:function(t){this.hb=t},enumerable:!1})}function $c(t,e){this.a=e,Qr(this,"verificationId",t)}function Qc(t,e,n,r){return new jo(t).eb(e,n).then((function(t){return new $c(t,r)}))}function Zc(t){var e=Ki(t);if(!(e&&e.exp&&e.auth_time&&e.iat))throw new A("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");Zr(this,{token:t,expirationTime:Kr(1e3*e.exp),authTime:Kr(1e3*e.auth_time),issuedAtTime:Kr(1e3*e.iat),signInProvider:e.firebase&&e.firebase.sign_in_provider?e.firebase.sign_in_provider:null,signInSecondFactor:e.firebase&&e.firebase.sign_in_second_factor?e.firebase.sign_in_second_factor:null,claims:e})}function th(t,e,n){var r=e&&e[nh];if(!r)throw new A("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=t,this.f=mt(e),this.g=n,this.c=new ao(null,r),this.b=[];var i=this;G(e[eh]||[],(function(t){(t=ri(t))&&i.b.push(t)})),Qr(this,"auth",this.a),Qr(this,"session",this.c),Qr(this,"hints",this.b)}Gc.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},Gc.prototype.i=function(t,e){if(t){this.reset(),this.g=!0;var n=t.c,r=t.b,i=t.a&&"auth/web-storage-unsupported"==t.a.code,o=t.a&&"auth/operation-not-supported-in-this-environment"==t.a.code;this.h=!(!i&&!o),"unknown"!=n||i||o?t.a?(Jc(this,!0,null,t.a),De()):e.Fa(n,r)?function(t,e,n){n=n.Fa(e.c,e.b);var r=e.g,i=e.f,o=e.h,s=e.S(),a=!!e.c.match(/Redirect$/);n(r,i,s,o).then((function(e){Jc(t,a,e,null)})).o((function(e){Jc(t,a,null,e)}))}(this,t,e):Oe(new A("invalid-auth-event")):(Jc(this,!1,null,null),De())}else Oe(new A("invalid-auth-event"))},Gc.prototype.qa=function(){var t=this;return new Te((function(e,n){t.b?t.b().then(e,n):(t.f.push(e),t.c.push(n),function(t){var e=new A("timeout");t.a&&t.a.cancel(),t.a=kn(Mc.get()).then((function(){t.b||(t.g=!0,Jc(t,!0,null,e))}))}(t))}))},Xc.prototype.i=function(t,e){if(t){var n=t.c,r=t.b;t.a?(e.ma(t.c,null,t.a,t.b),De()):e.Fa(n,r)?function(t,e){var n=t.b,r=t.c;e.Fa(r,n)(t.g,t.f,t.S(),t.h).then((function(t){e.ma(r,t,null,n)})).o((function(t){e.ma(r,null,t,n)}))}(t,e):Oe(new A("invalid-auth-event"))}else Oe(new A("invalid-auth-event"))},$c.prototype.confirm=function(t){return t=Vo(this.verificationId,t),this.a(t)};var eh="mfaInfo",nh="mfaPendingCredential";function rh(t,e,n,r){A.call(this,"multi-factor-auth-required",r,e),this.b=new th(t,e,n),Qr(this,"resolver",this.b)}function ih(t,e,n){if(t&&v(t.serverResponse)&&"auth/multi-factor-auth-required"===t.code)try{return new rh(e,t.serverResponse,n,t.message)}catch(t){}return null}function oh(){}function sh(t){Qr(this,"factorId",t.fa),this.a=t}function ah(t){if(sh.call(this,t),this.a.fa!=jo.PROVIDER_ID)throw new A("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}function uh(t,e){for(var n in Qe.call(this,t),e)this[n]=e[n]}function ch(t,e){this.a=t,this.b=[],this.c=I(this.xc,this),fn(this.a,"userReloaded",this.c);var n=[];e&&e.multiFactor&&e.multiFactor.enrolledFactors&&G(e.multiFactor.enrolledFactors,(function(t){var e=null,r={};if(t){t.uid&&(r[si]=t.uid),t.displayName&&(r[ii]=t.displayName),t.enrollmentTime&&(r[oi]=new Date(t.enrollmentTime).toISOString()),t.phoneNumber&&(r[ai]=t.phoneNumber);try{e=new ui(r)}catch(t){}t=e}else t=null;t&&n.push(t)})),hh(this,n)}function hh(t,e){t.b=e,Qr(t,"enrolledFactors",e)}function fh(t,e,n){if(this.i=t,this.h=e,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function lh(t,e){t.stop(),t.b=kn(function(t,e){return e?(t.a=t.c,t.g()):(e=t.a,t.a*=2,t.a>t.f&&(t.a=t.f),e)}(t,e)).then((function(){return function(){var t=a.document,e=null;return zr()||!t?De():new Te((function(n){e=function(){zr()&&(t.removeEventListener("visibilitychange",e,!1),n())},t.addEventListener("visibilitychange",e,!1)})).o((function(n){throw t.removeEventListener("visibilitychange",e,!1),n}))}()})).then((function(){return t.i()})).then((function(){lh(t,!0)})).o((function(e){t.h(e)&&lh(t,!1)}))}function dh(t){this.f=t,this.b=this.a=null,this.c=Date.now()}function ph(t,e){void 0===e&&(e=t.b?(e=t.b).a-e.g:0),t.c=Date.now()+1e3*e}function vh(t,e){t.b=zi(e[Zs]||""),t.a=e.refreshToken,ph(t,void 0!==(e=e.expiresIn)?Number(e):void 0)}function mh(t,e){this.a=t||null,this.b=e||null,Zr(this,{lastSignInTime:Kr(e||null),creationTime:Kr(t||null)})}function yh(t,e,n,r,i,o){Zr(this,{uid:t,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:e})}function gh(t,e,n){this.G=[],this.l=t.apiKey,this.m=t.appName,this.s=t.authDomain||null;var r=Y.SDK_VERSION?Or(Y.SDK_VERSION):null;this.a=new $s(this.l,P(k),r),t.emulatorConfig&&oa(this.a,t.emulatorConfig),this.b=new dh(this.a),Ah(this,e[Zs]),vh(this.b,e),Qr(this,"refreshToken",this.b.a),Dh(this,n||{}),En.call(this),this.P=!1,this.s&&Lr()&&(this.h=Bc(this.s,this.l,this.m)),this.R=[],this.f=null,this.u=function(t){return new fh((function(){return t.I(!0)}),(function(t){return!(!t||"auth/network-request-failed"!=t.code)}),(function(){var e=t.b.c-Date.now()-3e5;return 0<e?e:0}))}(this),this.$=I(this.gb,this);var i=this;this.pa=null,this.Ba=function(t){i.wa(t.i)},this.ba=null,this.za=function(t){oa(i.a,t.c)},this.W=null,this.X=[],this.Aa=function(t){Ih(i,t.f)},this.aa=null,this.N=new ch(this,n),Qr(this,"multiFactor",this.N)}function bh(t,e){t.ba&&pn(t.ba,"languageCodeChanged",t.Ba),(t.ba=e)&&fn(e,"languageCodeChanged",t.Ba)}function wh(t,e){t.W&&pn(t.W,"emulatorConfigChanged",t.za),(t.W=e)&&fn(e,"emulatorConfigChanged",t.za)}function Ih(t,e){t.X=e,aa(t.a,Y.SDK_VERSION?Or(Y.SDK_VERSION,t.X):null)}function Th(t,e){t.aa&&pn(t.aa,"frameworkChanged",t.Aa),(t.aa=e)&&fn(e,"frameworkChanged",t.Aa)}function Eh(t){try{return Y.app(t.m).auth()}catch(e){throw new A("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+t.m+"'!")}}function _h(t){t.A||t.u.b||(t.u.start(),pn(t,"tokenChanged",t.$),fn(t,"tokenChanged",t.$))}function Sh(t){pn(t,"tokenChanged",t.$),t.u.stop()}function Ah(t,e){t.ya=e,Qr(t,"_lat",e)}function Nh(t){for(var e=[],n=0;n<t.R.length;n++)e.push(t.R[n](t));return Pe(e).then((function(){return t}))}function kh(t){t.h&&!t.P&&(t.P=!0,xc(t.h,t))}function Dh(t,e){Zr(t,{uid:e.uid,displayName:e.displayName||null,photoURL:e.photoURL||null,email:e.email||null,emailVerified:e.emailVerified||!1,phoneNumber:e.phoneNumber||null,isAnonymous:e.isAnonymous||!1,tenantId:e.tenantId||null,metadata:new mh(e.createdAt,e.lastLoginAt),providerData:[]}),t.a.b=t.tenantId}function Oh(){}function Ch(t){return De().then((function(){if(t.A)throw new A("app-deleted")}))}function Ph(t){return K(t.providerData,(function(t){return t.providerId}))}function xh(t,e){e&&(Lh(t,e.providerId),t.providerData.push(e))}function Lh(t,e){$(t.providerData,(function(t){return t.providerId==e}))}function Rh(t,e,n){("uid"!=e||n)&&t.hasOwnProperty(e)&&Qr(t,e,n)}function Mh(t,e){t!=e&&(Zr(t,{uid:e.uid,displayName:e.displayName,photoURL:e.photoURL,email:e.email,emailVerified:e.emailVerified,phoneNumber:e.phoneNumber,isAnonymous:e.isAnonymous,tenantId:e.tenantId,providerData:[]}),e.metadata?Qr(t,"metadata",function(t){return new mh(t.a,t.b)}(e.metadata)):Qr(t,"metadata",new mh),G(e.providerData,(function(e){xh(t,e)})),function(t,e){t.b=e.b,t.a=e.a,t.c=e.c}(t.b,e.b),Qr(t,"refreshToken",t.b.a),hh(t.N,e.N.b))}function Uh(t){return t.I().then((function(e){var n=t.isAnonymous;return function(t,e){return ru(t.a,La,{idToken:e}).then(I(t.Jc,t))}(t,e).then((function(){return n||Rh(t,"isAnonymous",!1),e}))}))}function jh(t,e){e[Zs]&&t.ya!=e[Zs]&&(vh(t.b,e),t.dispatchEvent(new uh("tokenChanged")),Ah(t,e[Zs]),Rh(t,"refreshToken",t.b.a))}function Vh(t,e){return Uh(t).then((function(){if(J(Ph(t),e))return Nh(t).then((function(){throw new A("provider-already-linked")}))}))}function Fh(t,e,n){return ti({user:t,credential:Fo(e),additionalUserInfo:e=$i(e),operationType:n})}function qh(t,e){return jh(t,e),t.reload().then((function(){return t}))}function Hh(t,e,n,r,i){if(!Lr())return Oe(new A("operation-not-supported-in-this-environment"));if(t.f&&!i)return Oe(t.f);var o=Yi(n.providerId),s=qr(t.uid+":::"),a=null;(!Ur()||Tr())&&t.s&&n.isOAuthProvider&&(a=gu(t.s,t.l,t.m,e,n,null,s,Y.SDK_VERSION||null,null,null,t.tenantId));var u=yr(a,o&&o.ua,o&&o.ta);return r=r().then((function(){if(Gh(t),!i)return t.I().then((function(){}))})).then((function(){return Uc(t.h,u,e,n,s,!!a,t.tenantId)})).then((function(){return new Te((function(n,r){t.ma(e,null,new A("cancelled-popup-request"),t.i||null),t.g=n,t.O=r,t.i=s,t.c=Fc(t.h,t,e,u,s)}))})).then((function(t){return u&&mr(u),t?ti(t):null})).o((function(t){throw u&&mr(u),t})),zh(t,r,i)}function Bh(t,e,n,r,i){if(!Lr())return Oe(new A("operation-not-supported-in-this-environment"));if(t.f&&!i)return Oe(t.f);var o=null,s=qr(t.uid+":::");return r=r().then((function(){if(Gh(t),!i)return t.I().then((function(){}))})).then((function(){return t.ga=s,Nh(t)})).then((function(e){return t.ha&&(e=(e=t.ha).b.set(Jh,t.w(),e.a)),e})).then((function(){return Vc(t.h,e,n,s,t.tenantId)})).o((function(e){if(o=e,t.ha)return Xh(t.ha);throw o})).then((function(){if(o)throw o})),zh(t,r,i)}function Gh(t){if(!t.h||!t.P){if(t.h&&!t.P)throw new A("internal-error");throw new A("auth-domain-config-required")}}function zh(t,e,n){var r=function(t,e,n){return t.f&&!n?(e.cancel(),Oe(t.f)):e.o((function(e){throw!e||"auth/user-disabled"!=e.code&&"auth/user-token-expired"!=e.code||(t.f||t.dispatchEvent(new uh("userInvalidated")),t.f=e),e}))}(t,e,n);return t.G.push(r),r.na((function(){X(t.G,r)})),r.o((function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=ih(e.w(),Eh(t),I(t.ic,t))),n||e}))}function Kh(t){if(!t.apiKey)return null;var e={apiKey:t.apiKey,authDomain:t.authDomain,appName:t.appName,emulatorConfig:t.emulatorConfig},n={};if(!t.stsTokenManager||!t.stsTokenManager.accessToken)return null;n[Zs]=t.stsTokenManager.accessToken,n.refreshToken=t.stsTokenManager.refreshToken||null;var r=t.stsTokenManager.expirationTime;r&&(n.expiresIn=(r-Date.now())/1e3);var i=new gh(e,n,t);return t.providerData&&G(t.providerData,(function(t){t&&xh(i,ti(t))})),t.redirectEventId&&(i.ga=t.redirectEventId),i}function Wh(t){this.a=t,this.b=ec()}th.prototype.Qc=function(t){var e=this;return t.rb(this.a.a,this.c).then((function(t){var n=mt(e.f);return delete n[eh],delete n[nh],gt(n,t),e.g(n)}))},_(rh,A),oh.prototype.rb=function(t,e,n){return e.type==uo?function(t,e,n,r){return n.Ha().then((function(n){return n={idToken:n},void 0!==r&&(n.displayName=r),gt(n,{phoneVerificationInfo:Uo(t.a)}),ru(e,Pa,n)}))}(this,t,e,n):function(t,e,n){return n.Ha().then((function(n){return gt(n={mfaPendingCredential:n},{phoneVerificationInfo:Uo(t.a)}),ru(e,xa,n)}))}(this,t,e)},_(sh,oh),_(ah,sh),_(uh,Qe),(e=ch.prototype).xc=function(t){hh(this,function(t){var e=[];return G(t.mfaInfo||[],(function(t){(t=ri(t))&&e.push(t)})),e}(t.gd))},e.Qb=function(){return this.a.I().then((function(t){return new ao(t,null)}))},e.ec=function(t,e){var n=this,r=this.a.a;return this.Qb().then((function(n){return t.rb(r,n,e)})).then((function(t){return jh(n.a,t),n.a.reload()}))},e.ad=function(t){var e=this,n="string"==typeof t?t:t.uid,r=this.a.a;return this.a.I().then((function(t){return ru(r,nu,{idToken:t,mfaEnrollmentId:n})})).then((function(t){var r=z(e.b,(function(t){return t.uid!=n}));return hh(e,r),jh(e.a,t),e.a.reload().o((function(t){if("auth/user-token-expired"!=t.code)throw t}))}))},e.w=function(){return{multiFactor:{enrolledFactors:K(this.b,(function(t){return t.w()}))}}},fh.prototype.start=function(){this.a=this.c,lh(this,!0)},fh.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},dh.prototype.w=function(){return{apiKey:this.f.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:this.c}},dh.prototype.getToken=function(t){return t=!!t,this.b&&!this.a?Oe(new A("user-token-expired")):t||!this.b||Date.now()>this.c-3e4?this.a?function(t,e){return function(t,e){return new Te((function(n,r){"refresh_token"==e.grant_type&&e.refresh_token||"authorization_code"==e.grant_type&&e.code?ua(t,t.l+"?key="+encodeURIComponent(t.c),(function(t){t?t.error?r(ou(t)):t.access_token&&t.refresh_token?n(t):r(new A("internal-error")):r(new A("network-request-failed"))}),"POST",Zn(e).toString(),t.g,t.v.get()):r(new A("internal-error"))}))}(t.f,e).then((function(e){return t.b=zi(e.access_token),t.a=e.refresh_token,ph(t,e.expires_in),{accessToken:t.b.toString(),refreshToken:t.a}})).o((function(e){throw"auth/user-token-expired"==e.code&&(t.a=null),e}))}(this,{grant_type:"refresh_token",refresh_token:this.a}):De(null):De({accessToken:this.b.toString(),refreshToken:this.a})},mh.prototype.w=function(){return{lastLoginAt:this.b,createdAt:this.a}},_(gh,En),gh.prototype.wa=function(t){this.pa=t,ia(this.a,t)},gh.prototype.ka=function(){return this.pa},gh.prototype.Ga=function(){return Z(this.X)},gh.prototype.gb=function(){this.u.b&&(this.u.stop(),this.u.start())},Qr(gh.prototype,"providerId","firebase"),(e=gh.prototype).reload=function(){var t=this;return zh(this,Ch(this).then((function(){return Uh(t).then((function(){return Nh(t)})).then(Oh)})))},e.nc=function(t){return this.I(t).then((function(t){return new Zc(t)}))},e.I=function(t){var e=this;return zh(this,Ch(this).then((function(){return e.b.getToken(t)})).then((function(t){if(!t)throw new A("internal-error");return t.accessToken!=e.ya&&(Ah(e,t.accessToken),e.dispatchEvent(new uh("tokenChanged"))),Rh(e,"refreshToken",t.refreshToken),t.accessToken})))},e.Jc=function(t){if(!(t=t.users)||!t.length)throw new A("internal-error");Dh(this,{uid:(t=t[0]).localId,displayName:t.displayName,photoURL:t.photoUrl,email:t.email,emailVerified:!!t.emailVerified,phoneNumber:t.phoneNumber,lastLoginAt:t.lastLoginAt,createdAt:t.createdAt,tenantId:t.tenantId});for(var e=function(t){return(t=t.providerUserInfo)&&t.length?K(t,(function(t){return new yh(t.rawId,t.providerId,t.email,t.displayName,t.photoUrl,t.phoneNumber)})):[]}(t),n=0;n<e.length;n++)xh(this,e[n]);Rh(this,"isAnonymous",!(this.email&&t.passwordHash||this.providerData&&this.providerData.length)),this.dispatchEvent(new uh("userReloaded",{gd:t}))},e.Kc=function(t){return Yr("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.sb(t)},e.sb=function(t){var e=this,n=null;return zh(this,t.c(this.a,this.uid).then((function(t){return jh(e,t),n=Fh(e,t,"reauthenticate"),e.f=null,e.reload()})).then((function(){return n})),!0)},e.Bc=function(t){return Yr("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.pb(t)},e.pb=function(t){var e=this,n=null;return zh(this,Vh(this,t.providerId).then((function(){return e.I()})).then((function(n){return t.b(e.a,n)})).then((function(t){return n=Fh(e,t,"link"),qh(e,t)})).then((function(){return n})))},e.Cc=function(t,e){var n=this;return zh(this,Vh(this,"phone").then((function(){return Qc(Eh(n),t,e,I(n.pb,n))})))},e.Lc=function(t,e){var n=this;return zh(this,De().then((function(){return Qc(Eh(n),t,e,I(n.sb,n))})),!0)},e.Ab=function(t){var e=this;return zh(this,this.I().then((function(n){return e.a.Ab(n,t)})).then((function(t){return jh(e,t),e.reload()})))},e.dd=function(t){var e=this;return zh(this,this.I().then((function(n){return t.b(e.a,n)})).then((function(t){return jh(e,t),e.reload()})))},e.Bb=function(t){var e=this;return zh(this,this.I().then((function(n){return e.a.Bb(n,t)})).then((function(t){return jh(e,t),e.reload()})))},e.Cb=function(t){if(void 0===t.displayName&&void 0===t.photoURL)return Ch(this);var e=this;return zh(this,this.I().then((function(n){return e.a.Cb(n,{displayName:t.displayName,photoUrl:t.photoURL})})).then((function(t){return jh(e,t),Rh(e,"displayName",t.displayName||null),Rh(e,"photoURL",t.photoUrl||null),G(e.providerData,(function(t){"password"===t.providerId&&(Qr(t,"displayName",e.displayName),Qr(t,"photoURL",e.photoURL))})),Nh(e)})).then(Oh))},e.bd=function(t){var e=this;return zh(this,Uh(this).then((function(n){return J(Ph(e),t)?function(t,e,n){return ru(t,Da,{idToken:e,deleteProvider:n})}(e.a,n,[t]).then((function(t){var n={};return G(t.providerUserInfo||[],(function(t){n[t.providerId]=!0})),G(Ph(e),(function(t){n[t]||Lh(e,t)})),n[jo.PROVIDER_ID]||Qr(e,"phoneNumber",null),Nh(e)})):Nh(e).then((function(){throw new A("no-such-provider")}))})))},e.delete=function(){var t=this;return zh(this,this.I().then((function(e){return ru(t.a,ka,{idToken:e})})).then((function(){t.dispatchEvent(new uh("userDeleted"))}))).then((function(){for(var e=0;e<t.G.length;e++)t.G[e].cancel("app-deleted");bh(t,null),wh(t,null),Th(t,null),t.G=[],t.A=!0,Sh(t),Qr(t,"refreshToken",null),t.h&&Lc(t.h,t)}))},e.Eb=function(t,e){return!!("linkViaPopup"==t&&(this.i||null)==e&&this.g||"reauthViaPopup"==t&&(this.i||null)==e&&this.g||"linkViaRedirect"==t&&(this.ga||null)==e||"reauthViaRedirect"==t&&(this.ga||null)==e)},e.ma=function(t,e,n,r){"linkViaPopup"!=t&&"reauthViaPopup"!=t||r!=(this.i||null)||(n&&this.O?this.O(n):e&&!n&&this.g&&this.g(e),this.c&&(this.c.cancel(),this.c=null),delete this.g,delete this.O)},e.Fa=function(t,e){return"linkViaPopup"==t&&e==(this.i||null)?I(this.Jb,this):"reauthViaPopup"==t&&e==(this.i||null)?I(this.Kb,this):"linkViaRedirect"==t&&(this.ga||null)==e?I(this.Jb,this):"reauthViaRedirect"==t&&(this.ga||null)==e?I(this.Kb,this):null},e.Dc=function(t){var e=this;return Hh(this,"linkViaPopup",t,(function(){return Vh(e,t.providerId).then((function(){return Nh(e)}))}),!1)},e.Mc=function(t){return Hh(this,"reauthViaPopup",t,(function(){return De()}),!0)},e.Ec=function(t){var e=this;return Bh(this,"linkViaRedirect",t,(function(){return Vh(e,t.providerId)}),!1)},e.Nc=function(t){return Bh(this,"reauthViaRedirect",t,(function(){return De()}),!0)},e.Jb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return zh(this,this.I().then((function(n){return Ia(i.a,{requestUri:t,postBody:r,sessionId:e,idToken:n})})).then((function(t){return o=Fh(i,t,"link"),qh(i,t)})).then((function(){return o})))},e.Kb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return zh(this,De().then((function(){return fo(Ta(i.a,{requestUri:t,sessionId:e,postBody:r,tenantId:n}),i.uid)})).then((function(t){return o=Fh(i,t,"reauthenticate"),jh(i,t),i.f=null,i.reload()})).then((function(){return o})),!0)},e.tb=function(t){var e=this,n=null;return zh(this,this.I().then((function(e){return n=e,void 0===t||vt(t)?{}:Hi(new Pi(t))})).then((function(t){return e.a.tb(n,t)})).then((function(t){if(e.email!=t)return e.reload()})).then((function(){})))},e.Db=function(t,e){var n=this,r=null;return zh(this,this.I().then((function(t){return r=t,void 0===e||vt(e)?{}:Hi(new Pi(e))})).then((function(e){return n.a.Db(r,t,e)})).then((function(t){if(n.email!=t)return n.reload()})).then((function(){})))},e.ic=function(t){var e=null,n=this;return zh(this,t=fo(De(t),n.uid).then((function(t){return e=Fh(n,t,"reauthenticate"),jh(n,t),n.f=null,n.reload()})).then((function(){return e})),!0)},e.toJSON=function(){return this.w()},e.w=function(){var t={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.s,stsTokenManager:this.b.w(),redirectEventId:this.ga||null};return this.metadata&&gt(t,this.metadata.w()),G(this.providerData,(function(e){t.providerData.push(function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}(e))})),gt(t,this.N.w()),t};var Jh={name:"redirectUser",D:"session"};function Xh(t){return ic(t.b,Jh,t.a)}function Yh(t){this.a=t,this.b=ec(),this.c=null,this.f=function(t){var e=Zh("local"),n=Zh("session"),r=Zh("none");return function(t,e,n){var r=rc(e,n),i=nc(t,e.D);return t.get(e,n).then((function(o){var s=null;try{s=Fr(a.localStorage.getItem(r))}catch(t){}if(s&&!o)return a.localStorage.removeItem(r),t.set(e,s,n);s&&o&&"localStorage"!=i.type&&a.localStorage.removeItem(r)}))}(t.b,e,t.a).then((function(){return t.b.get(n,t.a)})).then((function(i){return i?n:t.b.get(r,t.a).then((function(n){return n?r:t.b.get(e,t.a).then((function(n){return n?e:t.b.get(Qh,t.a).then((function(t){return t?Zh(t):e}))}))}))})).then((function(e){return t.c=e,$h(t,e.D)})).o((function(){t.c||(t.c=e)}))}(this),this.b.addListener(Zh("local"),this.a,I(this.g,this))}function $h(t,e){var n,r=[];for(n in Zu)Zu[n]!==e&&r.push(ic(t.b,Zh(Zu[n]),t.a));return r.push(ic(t.b,Qh,t.a)),function(t){return new Te((function(e,n){var r=t.length,i=[];if(r)for(var o=function(t,n){r--,i[t]=n,0==r&&e(i)},s=function(t){n(t)},a=0;a<t.length;a++)Ce(t[a],T(o,a),s);else e(i)}))}(r)}Yh.prototype.g=function(){var t=this,e=Zh("local");rf(this,(function(){return De().then((function(){return t.c&&"local"!=t.c.D?t.b.get(e,t.a):null})).then((function(n){if(n)return $h(t,"local").then((function(){t.c=e}))}))}))};var Qh={name:"persistence",D:"session"};function Zh(t){return{name:"authUser",D:t}}function tf(t,e){return rf(t,(function(){return t.b.set(t.c,e.w(),t.a)}))}function ef(t){return rf(t,(function(){return ic(t.b,t.c,t.a)}))}function nf(t,e,n){return rf(t,(function(){return t.b.get(t.c,t.a).then((function(t){return t&&e&&(t.authDomain=e),t&&n&&(t.emulatorConfig=n),Kh(t||{})}))}))}function rf(t,e){return t.f=t.f.then(e,e),t.f}function of(t){if(this.m=!1,Qr(this,"settings",new Yc),Qr(this,"app",t),!df(this).options||!df(this).options.apiKey)throw new A("invalid-api-key");t=Y.SDK_VERSION?Or(Y.SDK_VERSION):null,this.a=new $s(df(this).options&&df(this).options.apiKey,P(k),t),this.R=[],this.u=[],this.P=[],this.ac=Y.INTERNAL.createSubscribe(I(this.yc,this)),this.X=void 0,this.bc=Y.INTERNAL.createSubscribe(I(this.zc,this)),ff(this,null),this.l=new Yh(df(this).options.apiKey+":"+df(this).name),this.G=new Wh(df(this).options.apiKey+":"+df(this).name),this.$=yf(this,function(t){var e=df(t).options.authDomain,n=function(t){var e=function(t,e){return t.b.get(Jh,t.a).then((function(t){return t&&e&&(t.authDomain=e),Kh(t||{})}))}(t.G,df(t).options.authDomain).then((function(e){return(t.s=e)&&(e.ha=t.G),Xh(t.G)}));return yf(t,e)}(t).then((function(){return nf(t.l,e,t.f)})).then((function(e){return e?(e.ha=t.G,t.s&&(t.s.ga||null)==(e.ga||null)?e:e.reload().then((function(){return tf(t.l,e).then((function(){return e}))})).o((function(n){return"auth/network-request-failed"==n.code?e:ef(t.l)}))):null})).then((function(e){ff(t,e||null)}));return yf(t,n)}(this)),this.h=yf(this,function(t){return t.$.then((function(){return hf(t)})).o((function(){})).then((function(){if(!t.m)return t.pa()})).o((function(){})).then((function(){if(!t.m){t.ba=!0;var e=t.l;e.b.addListener(Zh("local"),e.a,t.pa)}}))}(this)),this.ba=!1,this.pa=I(this.Yc,this),this.Ba=I(this.da,this),this.ya=I(this.kc,this),this.za=I(this.vc,this),this.Aa=I(this.wc,this),this.b=null,function(t){var e=df(t).options.authDomain,n=df(t).options.apiKey;e&&Lr()&&(t.gb=t.$.then((function(){if(!t.m){if(t.b=Bc(e,n,df(t).name,t.f),xc(t.b,t),pf(t)&&kh(pf(t)),t.s){kh(t.s);var r=t.s;r.wa(t.ka()),bh(r,t),Ih(r=t.s,t.N),Th(r,t),oa((r=t.s).a,t.f),wh(r,t),t.s=null}return t.b}})))}(this),this.INTERNAL={},this.INTERNAL.delete=I(this.delete,this),this.INTERNAL.logFramework=I(this.Fc,this),this.A=0,En.call(this),function(t){Object.defineProperty(t,"lc",{get:function(){return this.ka()},set:function(t){this.wa(t)},enumerable:!1}),t.aa=null,Object.defineProperty(t,"ti",{get:function(){return this.S()},set:function(t){this.xb(t)},enumerable:!1}),t.W=null}(this),this.N=[],this.f=null}function sf(t){Qe.call(this,"languageCodeChanged"),this.i=t}function af(t){Qe.call(this,"emulatorConfigChanged"),this.c=t}function uf(t){Qe.call(this,"frameworkChanged"),this.f=t}function cf(t){return t.gb||Oe(new A("auth-domain-config-required"))}function hf(t){if(!Lr())return Oe(new A("operation-not-supported-in-this-environment"));var e=cf(t).then((function(){return t.b.qa()})).then((function(t){return t?ti(t):null}));return yf(t,e)}function ff(t,e){pf(t)&&(function(t,e){$(t.R,(function(t){return t==e}))}(pf(t),t.Ba),pn(pf(t),"tokenChanged",t.ya),pn(pf(t),"userDeleted",t.za),pn(pf(t),"userInvalidated",t.Aa),Sh(pf(t))),e&&(e.R.push(t.Ba),fn(e,"tokenChanged",t.ya),fn(e,"userDeleted",t.za),fn(e,"userInvalidated",t.Aa),0<t.A&&_h(e)),Qr(t,"currentUser",e),e&&(e.wa(t.ka()),bh(e,t),Ih(e,t.N),Th(e,t),oa(e.a,t.f),wh(e,t))}function lf(t,e){var n=null,r=null;return yf(t,e.then((function(e){return n=Fo(e),r=$i(e),function(t,e){var n={};return n.apiKey=df(t).options.apiKey,n.authDomain=df(t).options.authDomain,n.appName=df(t).name,t.f&&(n.emulatorConfig=t.f),t.$.then((function(){return function(t,e,n,r){var i=new gh(t,e);return n&&(i.ha=n),r&&Ih(i,r),i.reload().then((function(){return i}))}(n,e,t.G,t.Ga())})).then((function(e){return pf(t)&&e.uid==pf(t).uid?(Mh(pf(t),e),t.da(e)):(ff(t,e),kh(e),t.da(e))})).then((function(){mf(t)}))}(t,e)}),(function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=ih(e.w(),t,I(t.jc,t))),n||e})).then((function(){return ti({user:pf(t),credential:n,additionalUserInfo:r,operationType:"signIn"})})))}function df(t){return t.app}function pf(t){return t.currentUser}function vf(t){return pf(t)&&pf(t)._lat||null}function mf(t){if(t.ba){for(var e=0;e<t.u.length;e++)t.u[e]&&t.u[e](vf(t));if(t.X!==t.getUid()&&t.P.length)for(t.X=t.getUid(),e=0;e<t.P.length;e++)t.P[e]&&t.P[e](vf(t))}}function yf(t,e){return t.R.push(e),e.na((function(){X(t.R,e)})),e}function gf(){}function bf(){this.a={},this.b=1e12}Yh.prototype.wb=function(t){var e=null,n=this;return function(t){var e=new A("invalid-persistence-type"),n=new A("unsupported-persistence-type");t:{for(r in Zu)if(Zu[r]==t){var r=!0;break t}r=!1}if(!r||"string"!=typeof t)throw e;switch(_r()){case"ReactNative":if("session"===t)throw n;break;case"Node":if("none"!==t)throw n;break;case"Worker":if("session"===t||!Pu()&&"none"!==t)throw n;break;default:if(!xr()&&"none"!==t)throw n}}(t),rf(this,(function(){return t!=n.c.D?n.b.get(n.c,n.a).then((function(r){return e=r,$h(n,t)})).then((function(){if(n.c=Zh(t),e)return n.b.set(n.c,e,n.a)})):De()}))},_(of,En),_(sf,Qe),_(af,Qe),_(uf,Qe),(e=of.prototype).wb=function(t){return yf(this,t=this.l.wb(t))},e.wa=function(t){this.aa===t||this.m||(this.aa=t,ia(this.a,this.aa),this.dispatchEvent(new sf(this.ka())))},e.ka=function(){return this.aa},e.ed=function(){var t=a.navigator;this.wa(t&&(t.languages&&t.languages[0]||t.language||t.userLanguage)||null)},e.fd=function(t,e){if(!this.f){if(!/^https?:\/\//.test(t))throw new A("argument-error","Emulator URL must start with a valid scheme (http:// or https://).");!function(t){"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),a.document&&!t&&wr().then((function(){var t=a.document.createElement("div");t.innerText="Running in emulator mode. Do not use with production credentials.",t.style.position="fixed",t.style.width="100%",t.style.backgroundColor="#ffffff",t.style.border=".1em solid #000000",t.style.color="#ff0000",t.style.bottom="0px",t.style.left="0px",t.style.margin="0px",t.style.zIndex=1e4,t.style.textAlign="center",t.classList.add("firebase-emulator-warning"),a.document.body.appendChild(t)}))}(!!e&&!!e.disableWarnings),this.f={url:t},this.settings.hb=!0,oa(this.a,this.f),this.dispatchEvent(new af(this.f))}},e.Fc=function(t){this.N.push(t),aa(this.a,Y.SDK_VERSION?Or(Y.SDK_VERSION,this.N):null),this.dispatchEvent(new uf(this.N))},e.Ga=function(){return Z(this.N)},e.xb=function(t){this.W===t||this.m||(this.W=t,this.a.b=this.W)},e.S=function(){return this.W},e.toJSON=function(){return{apiKey:df(this).options.apiKey,authDomain:df(this).options.authDomain,appName:df(this).name,currentUser:pf(this)&&pf(this).w()}},e.Eb=function(t,e){switch(t){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.i==e&&!!this.g;default:return!1}},e.ma=function(t,e,n,r){"signInViaPopup"==t&&this.i==r&&(n&&this.O?this.O(n):e&&!n&&this.g&&this.g(e),this.c&&(this.c.cancel(),this.c=null),delete this.g,delete this.O)},e.Fa=function(t,e){return"signInViaRedirect"==t||"signInViaPopup"==t&&this.i==e&&this.g?I(this.hc,this):null},e.hc=function(t,e,n,r){var i=this,o={requestUri:t,postBody:r,sessionId:e,tenantId:n};return this.c&&(this.c.cancel(),this.c=null),i.$.then((function(){return lf(i,wa(i.a,o))}))},e.Wc=function(t){if(!Lr())return Oe(new A("operation-not-supported-in-this-environment"));var e=this,n=Yi(t.providerId),r=qr(),i=null;(!Ur()||Tr())&&df(this).options.authDomain&&t.isOAuthProvider&&(i=gu(df(this).options.authDomain,df(this).options.apiKey,df(this).name,"signInViaPopup",t,null,r,Y.SDK_VERSION||null,null,null,this.S(),this.f));var o=yr(i,n&&n.ua,n&&n.ta);return yf(this,n=cf(this).then((function(n){return Uc(n,o,"signInViaPopup",t,r,!!i,e.S())})).then((function(){return new Te((function(t,n){e.ma("signInViaPopup",null,new A("cancelled-popup-request"),e.i),e.g=t,e.O=n,e.i=r,e.c=Fc(e.b,e,"signInViaPopup",o,r)}))})).then((function(t){return o&&mr(o),t?ti(t):null})).o((function(t){throw o&&mr(o),t})))},e.Xc=function(t){if(!Lr())return Oe(new A("operation-not-supported-in-this-environment"));var e=this;return yf(this,cf(this).then((function(){return function(t){return rf(t,(function(){return t.b.set(Qh,t.c.D,t.a)}))}(e.l)})).then((function(){return Vc(e.b,"signInViaRedirect",t,void 0,e.S())})))},e.qa=function(){var t=this;return hf(this).then((function(e){return t.b&&Kc(t.b.b),e})).o((function(e){throw t.b&&Kc(t.b.b),e}))},e.cd=function(t){if(!t)return Oe(new A("null-user"));if(this.W!=t.tenantId)return Oe(new A("tenant-id-mismatch"));var e=this,n={};n.apiKey=df(this).options.apiKey,n.authDomain=df(this).options.authDomain,n.appName=df(this).name;var r=function(t,e,n,r){var i=t.b,o={};return o[Zs]=i.b&&i.b.toString(),o.refreshToken=i.a,e=new gh(e||{apiKey:t.l,authDomain:t.s,appName:t.m},o),n&&(e.ha=n),r&&Ih(e,r),Mh(e,t),e}(t,n,e.G,e.Ga());return yf(this,this.h.then((function(){if(df(e).options.apiKey!=t.l)return r.reload()})).then((function(){return pf(e)&&t.uid==pf(e).uid?(Mh(pf(e),t),e.da(t)):(ff(e,r),kh(r),e.da(r))})).then((function(){mf(e)})))},e.zb=function(){var t=this;return yf(this,this.h.then((function(){return t.b&&Kc(t.b.b),pf(t)?(ff(t,null),ef(t.l).then((function(){mf(t)}))):De()})))},e.Yc=function(){var t=this;return nf(this.l,df(this).options.authDomain).then((function(e){if(!t.m){var n;if(n=pf(t)&&e){n=pf(t).uid;var r=e.uid;n=null!=n&&""!==n&&null!=r&&""!==r&&n==r}if(n)return Mh(pf(t),e),pf(t).I();(pf(t)||e)&&(ff(t,e),e&&(kh(e),e.ha=t.G),t.b&&xc(t.b,t),mf(t))}}))},e.da=function(t){return tf(this.l,t)},e.kc=function(){mf(this),this.da(pf(this))},e.vc=function(){this.zb()},e.wc=function(){this.zb()},e.jc=function(t){var e=this;return this.h.then((function(){return lf(e,De(t))}))},e.yc=function(t){var e=this;this.addAuthTokenListener((function(){t.next(pf(e))}))},e.zc=function(t){var e=this;!function(t,e){t.P.push(e),yf(t,t.h.then((function(){!t.m&&J(t.P,e)&&t.X!==t.getUid()&&(t.X=t.getUid(),e(vf(t)))})))}(this,(function(){t.next(pf(e))}))},e.Hc=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then((function(){"function"==typeof t?t(pf(r)):"function"==typeof t.next&&t.next(pf(r))})),this.ac(t,e,n)},e.Gc=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then((function(){r.X=r.getUid(),"function"==typeof t?t(pf(r)):"function"==typeof t.next&&t.next(pf(r))})),this.bc(t,e,n)},e.mc=function(t){var e=this;return yf(this,this.h.then((function(){return pf(e)?pf(e).I(t).then((function(t){return{accessToken:t}})):null})))},e.Sc=function(t){var e=this;return this.h.then((function(){return lf(e,ru(e.a,$a,{token:t}))})).then((function(t){var n=t.user;return Rh(n,"isAnonymous",!1),e.da(n),t}))},e.Tc=function(t,e){var n=this;return this.h.then((function(){return lf(n,ru(n.a,Qa,{email:t,password:e}))}))},e.dc=function(t,e){var n=this;return this.h.then((function(){return lf(n,ru(n.a,Aa,{email:t,password:e}))}))},e.Za=function(t){var e=this;return this.h.then((function(){return lf(e,t.ja(e.a))}))},e.Rc=function(t){return Yr("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.Za(t)},e.yb=function(){var t=this;return this.h.then((function(){var e=pf(t);if(e&&e.isAnonymous){var n=ti({providerId:null,isNewUser:!1});return ti({user:e,credential:null,additionalUserInfo:n,operationType:"signIn"})}return lf(t,t.a.yb()).then((function(e){var n=e.user;return Rh(n,"isAnonymous",!0),t.da(n),e}))}))},e.getUid=function(){return pf(this)&&pf(this).uid||null},e.cc=function(t){this.addAuthTokenListener(t),this.A++,0<this.A&&pf(this)&&_h(pf(this))},e.Oc=function(t){var e=this;G(this.u,(function(n){n==t&&e.A--})),0>this.A&&(this.A=0),0==this.A&&pf(this)&&Sh(pf(this)),this.removeAuthTokenListener(t)},e.addAuthTokenListener=function(t){var e=this;this.u.push(t),yf(this,this.h.then((function(){e.m||J(e.u,t)&&t(vf(e))})))},e.removeAuthTokenListener=function(t){$(this.u,(function(e){return e==t}))},e.delete=function(){this.m=!0;for(var t=0;t<this.R.length;t++)this.R[t].cancel("app-deleted");return this.R=[],this.l&&(t=this.l).b.removeListener(Zh("local"),t.a,this.pa),this.b&&(Lc(this.b,this),Kc(this.b.b)),Promise.resolve()},e.gc=function(t){return yf(this,function(t,e){return ru(t,Na,{identifier:e,continueUri:Rr()?lr():"http://localhost"}).then((function(t){return t.signinMethods||[]}))}(this.a,t))},e.Ac=function(t){return!!Lo(t)},e.vb=function(t,e){var n=this;return yf(this,De().then((function(){var t=new Pi(e);if(!t.c)throw new A("argument-error",Ri+" must be true when sending sign in link to email");return Hi(t)})).then((function(e){return n.a.vb(t,e)})).then((function(){})))},e.hd=function(t){return this.Qa(t).then((function(t){return t.data.email}))},e.mb=function(t,e){return yf(this,this.a.mb(t,e).then((function(){})))},e.Qa=function(t){return yf(this,this.a.Qa(t).then((function(t){return new ci(t)})))},e.ib=function(t){return yf(this,this.a.ib(t).then((function(){})))},e.ub=function(t,e){var n=this;return yf(this,De().then((function(){return void 0===e||vt(e)?{}:Hi(new Pi(e))})).then((function(e){return n.a.ub(t,e)})).then((function(){})))},e.Vc=function(t,e){return yf(this,Qc(this,t,e,I(this.Za,this)))},e.Uc=function(t,e){var n=this;return yf(this,De().then((function(){var r=e||lr(),i=xo(t,r);if(!(r=Lo(r)))throw new A("argument-error","Invalid email link!");if(r.tenantId!==n.S())throw new A("tenant-id-mismatch");return n.Za(i)})))},gf.prototype.render=function(){},gf.prototype.reset=function(){},gf.prototype.getResponse=function(){},gf.prototype.execute=function(){};var wf=null;function If(t,e){return(e=Tf(e))&&t.a[e]||null}function Tf(t){return(t=void 0===t?1e12:t)?t.toString():null}function Ef(t,e){this.g=!1,this.c=e,this.a=this.b=null,this.i="invisible"!==this.c.size,this.f=he(t);var n=this;this.h=function(){n.execute()},this.i?this.execute():fn(this.f,"click",this.h)}function _f(t){if(t.g)throw Error("reCAPTCHA mock was already deleted!")}function Sf(){}function Af(){}bf.prototype.render=function(t,e){return this.a[this.b.toString()]=new Ef(t,e),this.b++},bf.prototype.reset=function(t){var e=If(this,t);t=Tf(t),e&&t&&(e.delete(),delete this.a[t])},bf.prototype.getResponse=function(t){return(t=If(this,t))?t.getResponse():null},bf.prototype.execute=function(t){(t=If(this,t))&&t.execute()},Ef.prototype.getResponse=function(){return _f(this),this.b},Ef.prototype.execute=function(){_f(this);var t=this;this.a||(this.a=setTimeout((function(){t.b=function(){for(var t=50,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}();var e=t.c.callback,n=t.c["expired-callback"];if(e)try{e(t.b)}catch(t){}t.a=setTimeout((function(){if(t.a=null,t.b=null,n)try{n()}catch(t){}t.i&&t.execute()}),6e4)}),500))},Ef.prototype.delete=function(){_f(this),this.g=!0,clearTimeout(this.a),this.a=null,pn(this.f,"click",this.h)},Qr(Sf,"FACTOR_ID","phone"),Af.prototype.g=function(){return wf||(wf=new bf),De(wf)},Af.prototype.c=function(){};var Nf=null;function kf(){this.b=a.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var Df=new wt(_t,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),Of=new Gr(3e4,6e4);kf.prototype.g=function(t){var e=this;return new Te((function(n,r){var i=setTimeout((function(){r(new A("network-request-failed"))}),Of.get());!a.grecaptcha||t!==e.f&&!e.b?(a[e.a]=function(){if(a.grecaptcha){e.f=t;var o=a.grecaptcha.render;a.grecaptcha.render=function(t,n){return t=o(t,n),e.b++,t},clearTimeout(i),n(a.grecaptcha)}else clearTimeout(i),r(new A("internal-error"));delete a[e.a]},De(Gs(kt(Df,{onload:e.a,hl:t||""}))).o((function(){clearTimeout(i),r(new A("internal-error","Unable to load external reCAPTCHA dependencies!"))}))):(clearTimeout(i),n(a.grecaptcha))}))},kf.prototype.c=function(){this.b--};var Cf=null;function Pf(t,e,n,r,i,o,s){if(Qr(this,"type","recaptcha"),this.c=this.f=null,this.A=!1,this.m=e,this.g=null,s?(Nf||(Nf=new Af),s=Nf):(Cf||(Cf=new kf),s=Cf),this.v=s,this.a=n||{theme:"light",type:"image"},this.i=[],this.a[Rf])throw new A("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.h="invisible"===this.a[Mf],!a.document)throw new A("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!he(e)||!this.h&&he(e).hasChildNodes())throw new A("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.s=new $s(t,o||null,i||null),this.u=r||function(){return null};var u=this;this.l=[];var c=this.a[xf];this.a[xf]=function(t){if(Uf(u,t),"function"==typeof c)c(t);else if("string"==typeof c){var e=Pr(c,a);"function"==typeof e&&e(t)}};var h=this.a[Lf];this.a[Lf]=function(){if(Uf(u,null),"function"==typeof h)h();else if("string"==typeof h){var t=Pr(h,a);"function"==typeof t&&t()}}}var xf="callback",Lf="expired-callback",Rf="sitekey",Mf="size";function Uf(t,e){for(var n=0;n<t.l.length;n++)try{t.l[n](e)}catch(t){}}function jf(t,e){return t.i.push(e),e.na((function(){X(t.i,e)})),e}function Vf(t){if(t.A)throw new A("internal-error","RecaptchaVerifier instance has been destroyed.")}function Ff(t,e,n){var r=!1;try{this.b=n||Y.app()}catch(t){throw new A("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new A("invalid-api-key");n=this.b.options.apiKey;var i=this,o=null;try{o=this.b.auth().Ga()}catch(t){}try{r=this.b.auth().settings.appVerificationDisabledForTesting}catch(t){}o=Y.SDK_VERSION?Or(Y.SDK_VERSION,o):null,Pf.call(this,n,t,e,(function(){try{var t=i.b.auth().ka()}catch(e){t=null}return t}),o,P(k),r)}function qf(t,e,n,r){t:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,s=0;s<e.length;s++)if(e[s].optional)o=!0;else{if(o)throw new A("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=e.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=e[i].optional&&void 0===n[i],!e[i].K(n[i])&&!o){if(e=e[i],0>i||i>=Hf.length)throw new A("internal-error","Argument validator received an unsupported number of arguments.");n=Hf[i],r=(r?"":n+" argument ")+(e.name?'"'+e.name+'" ':"")+"must be "+e.J+".";break t}r=null}}if(r)throw new A("argument-error",t+" failed: "+r)}(e=Pf.prototype).Ia=function(){var t=this;return this.f?this.f:this.f=jf(this,De().then((function(){if(Rr()&&!Er())return wr();throw new A("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")})).then((function(){return t.v.g(t.u())})).then((function(e){return t.g=e,ru(t.s,Fa,{})})).then((function(e){t.a[Rf]=e.recaptchaSiteKey})).o((function(e){throw t.f=null,e})))},e.render=function(){Vf(this);var t=this;return jf(this,this.Ia().then((function(){if(null===t.c){var e=t.m;if(!t.h){var n=he(e);e=function(t,e,n){var r=arguments,i=document,o=String(r[0]),s=r[1];if(!ce&&s&&(s.name||s.type)){if(o=["<",o],s.name&&o.push(' name="',zt(s.name),'"'),s.type){o.push(' type="',zt(s.type),'"');var a={};gt(a,s),delete a.type,s=a}o.push(">"),o=o.join("")}return o=me(i,o),s&&("string"==typeof s?o.className=s:Array.isArray(s)?o.className=s.join(" "):fe(o,s)),2<r.length&&ve(i,o,r),o}("DIV"),n.appendChild(e)}t.c=t.g.render(e,t.a)}return t.c})))},e.verify=function(){Vf(this);var t=this;return jf(this,this.render().then((function(e){return new Te((function(n){var r=t.g.getResponse(e);if(r)n(r);else{var i=function(e){e&&(function(t,e){$(t.l,(function(t){return t==e}))}(t,i),n(e))};t.l.push(i),t.h&&t.g.execute(t.c)}}))})))},e.reset=function(){Vf(this),null!==this.c&&this.g.reset(this.c)},e.clear=function(){Vf(this),this.A=!0,this.v.c();for(var t=0;t<this.i.length;t++)this.i[t].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.h){t=he(this.m);for(var e;e=t.firstChild;)t.removeChild(e)}},_(Ff,Pf);var Hf="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function Bf(t,e){return{name:t||"",J:"a valid string",optional:!!e,K:function(t){return"string"==typeof t}}}function Gf(t,e){return{name:t||"",J:"a boolean",optional:!!e,K:function(t){return"boolean"==typeof t}}}function zf(t,e){return{name:t||"",J:"a valid object",optional:!!e,K:v}}function Kf(t,e){return{name:t||"",J:"a function",optional:!!e,K:function(t){return"function"==typeof t}}}function Wf(t,e){return{name:t||"",J:"null",optional:!!e,K:function(t){return null===t}}}function Jf(t){return{name:t?t+"Credential":"credential",J:t?"a valid "+t+" credential":"a valid credential",optional:!1,K:function(e){if(!e)return!1;var n=!t||e.providerId===t;return!(!e.ja||!n)}}}function Xf(t,e){return v(t)&&"string"==typeof t.type&&t.type===e&&"function"==typeof t.Ha}function Yf(t){return v(t)&&"string"==typeof t.uid}function $f(t,e,n,r){return{name:n||"",J:t.J+" or "+e.J,optional:!!r,K:function(n){return t.K(n)||e.K(n)}}}function Qf(t,e){for(var n in e){var r=e[n].name;t[r]=el(r,t[n],e[n].j)}}function Zf(t,e){for(var n in e){var r=e[n].name;r!==n&&Object.defineProperty(t,r,{get:T((function(t){return this[t]}),n),set:T((function(t,e,n,r){qf(t,[n],[r],!0),this[e]=r}),r,n,e[n].jb),enumerable:!0})}}function tl(t,e,n,r){t[e]=el(e,n,r)}function el(t,e,n){function r(){var t=Array.prototype.slice.call(arguments);return qf(o,n,t),e.apply(this,t)}if(!n)return e;var i,o=function(t){return(t=t.split("."))[t.length-1]}(t);for(i in e)r[i]=e[i];for(i in e.prototype)r.prototype[i]=e.prototype[i];return r}Qf(of.prototype,{ib:{name:"applyActionCode",j:[Bf("code")]},Qa:{name:"checkActionCode",j:[Bf("code")]},mb:{name:"confirmPasswordReset",j:[Bf("code"),Bf("newPassword")]},dc:{name:"createUserWithEmailAndPassword",j:[Bf("email"),Bf("password")]},gc:{name:"fetchSignInMethodsForEmail",j:[Bf("email")]},qa:{name:"getRedirectResult",j:[]},Ac:{name:"isSignInWithEmailLink",j:[Bf("emailLink")]},Gc:{name:"onAuthStateChanged",j:[$f(zf(),Kf(),"nextOrObserver"),Kf("opt_error",!0),Kf("opt_completed",!0)]},Hc:{name:"onIdTokenChanged",j:[$f(zf(),Kf(),"nextOrObserver"),Kf("opt_error",!0),Kf("opt_completed",!0)]},ub:{name:"sendPasswordResetEmail",j:[Bf("email"),$f(zf("opt_actionCodeSettings",!0),Wf(null,!0),"opt_actionCodeSettings",!0)]},vb:{name:"sendSignInLinkToEmail",j:[Bf("email"),zf("actionCodeSettings")]},wb:{name:"setPersistence",j:[Bf("persistence")]},Rc:{name:"signInAndRetrieveDataWithCredential",j:[Jf()]},yb:{name:"signInAnonymously",j:[]},Za:{name:"signInWithCredential",j:[Jf()]},Sc:{name:"signInWithCustomToken",j:[Bf("token")]},Tc:{name:"signInWithEmailAndPassword",j:[Bf("email"),Bf("password")]},Uc:{name:"signInWithEmailLink",j:[Bf("email"),Bf("emailLink",!0)]},Vc:{name:"signInWithPhoneNumber",j:[Bf("phoneNumber"),{name:"applicationVerifier",J:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,K:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Wc:{name:"signInWithPopup",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Xc:{name:"signInWithRedirect",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},cd:{name:"updateCurrentUser",j:[$f({name:"user",J:"an instance of Firebase User",optional:!1,K:function(t){return!!(t&&t instanceof gh)}},Wf(),"user")]},zb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[Bf(null,!0)]},ed:{name:"useDeviceLanguage",j:[]},fd:{name:"useEmulator",j:[Bf("url"),zf("options",!0)]},hd:{name:"verifyPasswordResetCode",j:[Bf("code")]}}),Zf(of.prototype,{lc:{name:"languageCode",jb:$f(Bf(),Wf(),"languageCode")},ti:{name:"tenantId",jb:$f(Bf(),Wf(),"tenantId")}}),of.Persistence=Zu,of.Persistence.LOCAL="local",of.Persistence.SESSION="session",of.Persistence.NONE="none",Qf(gh.prototype,{delete:{name:"delete",j:[]},nc:{name:"getIdTokenResult",j:[Gf("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[Gf("opt_forceRefresh",!0)]},Bc:{name:"linkAndRetrieveDataWithCredential",j:[Jf()]},pb:{name:"linkWithCredential",j:[Jf()]},Cc:{name:"linkWithPhoneNumber",j:[Bf("phoneNumber"),{name:"applicationVerifier",J:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,K:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Dc:{name:"linkWithPopup",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Ec:{name:"linkWithRedirect",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Kc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[Jf()]},sb:{name:"reauthenticateWithCredential",j:[Jf()]},Lc:{name:"reauthenticateWithPhoneNumber",j:[Bf("phoneNumber"),{name:"applicationVerifier",J:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,K:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Mc:{name:"reauthenticateWithPopup",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Nc:{name:"reauthenticateWithRedirect",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},reload:{name:"reload",j:[]},tb:{name:"sendEmailVerification",j:[$f(zf("opt_actionCodeSettings",!0),Wf(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[Bf(null,!0)]},bd:{name:"unlink",j:[Bf("provider")]},Ab:{name:"updateEmail",j:[Bf("email")]},Bb:{name:"updatePassword",j:[Bf("password")]},dd:{name:"updatePhoneNumber",j:[Jf("phone")]},Cb:{name:"updateProfile",j:[zf("profile")]},Db:{name:"verifyBeforeUpdateEmail",j:[Bf("email"),$f(zf("opt_actionCodeSettings",!0),Wf(null,!0),"opt_actionCodeSettings",!0)]}}),Qf(bf.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Qf(gf.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Qf(Te.prototype,{na:{name:"finally"},o:{name:"catch"},then:{name:"then"}}),Zf(Yc.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",jb:Gf("appVerificationDisabledForTesting")}}),Qf($c.prototype,{confirm:{name:"confirm",j:[Bf("verificationCode")]}}),tl(ho,"fromJSON",(function(t){t="string"==typeof t?JSON.parse(t):t;for(var e,n=[go,Co,Mo,vo],r=0;r<n.length;r++)if(e=n[r](t))return e;return null}),[$f(Bf(),zf(),"json")]),tl(Po,"credential",(function(t,e){return new Oo(t,e)}),[Bf("email"),Bf("password")]),Qf(Oo.prototype,{w:{name:"toJSON",j:[Bf(null,!0)]}}),Qf(To.prototype,{Ca:{name:"addScope",j:[Bf("scope")]},Ka:{name:"setCustomParameters",j:[zf("customOAuthParameters")]}}),tl(To,"credential",Eo,[$f(Bf(),zf(),"token")]),tl(Po,"credentialWithLink",xo,[Bf("email"),Bf("emailLink")]),Qf(_o.prototype,{Ca:{name:"addScope",j:[Bf("scope")]},Ka:{name:"setCustomParameters",j:[zf("customOAuthParameters")]}}),tl(_o,"credential",So,[$f(Bf(),zf(),"token")]),Qf(Ao.prototype,{Ca:{name:"addScope",j:[Bf("scope")]},Ka:{name:"setCustomParameters",j:[zf("customOAuthParameters")]}}),tl(Ao,"credential",No,[$f(Bf(),$f(zf(),Wf()),"idToken"),$f(Bf(),Wf(),"accessToken",!0)]),Qf(ko.prototype,{Ka:{name:"setCustomParameters",j:[zf("customOAuthParameters")]}}),tl(ko,"credential",Do,[$f(Bf(),zf(),"token"),Bf("secret",!0)]),Qf(Io.prototype,{Ca:{name:"addScope",j:[Bf("scope")]},credential:{name:"credential",j:[$f(Bf(),$f(zf(),Wf()),"optionsOrIdToken"),$f(Bf(),Wf(),"accessToken",!0)]},Ka:{name:"setCustomParameters",j:[zf("customOAuthParameters")]}}),Qf(mo.prototype,{w:{name:"toJSON",j:[Bf(null,!0)]}}),Qf(lo.prototype,{w:{name:"toJSON",j:[Bf(null,!0)]}}),tl(jo,"credential",Vo,[Bf("verificationId"),Bf("verificationCode")]),Qf(jo.prototype,{eb:{name:"verifyPhoneNumber",j:[$f(Bf(),{name:"phoneInfoOptions",J:"valid phone info options",optional:!1,K:function(t){return!!t&&(t.session&&t.phoneNumber?Xf(t.session,uo)&&"string"==typeof t.phoneNumber:t.session&&t.multiFactorHint?Xf(t.session,co)&&Yf(t.multiFactorHint):t.session&&t.multiFactorUid?Xf(t.session,co)&&"string"==typeof t.multiFactorUid:!!t.phoneNumber&&"string"==typeof t.phoneNumber)}},"phoneInfoOptions"),{name:"applicationVerifier",J:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,K:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]}}),Qf(Ro.prototype,{w:{name:"toJSON",j:[Bf(null,!0)]}}),Qf(A.prototype,{toJSON:{name:"toJSON",j:[Bf(null,!0)]}}),Qf(Jo.prototype,{toJSON:{name:"toJSON",j:[Bf(null,!0)]}}),Qf(Wo.prototype,{toJSON:{name:"toJSON",j:[Bf(null,!0)]}}),Qf(rh.prototype,{toJSON:{name:"toJSON",j:[Bf(null,!0)]}}),Qf(th.prototype,{Qc:{name:"resolveSignIn",j:[{name:"multiFactorAssertion",J:"a valid multiFactorAssertion",optional:!1,K:function(t){return!!t&&!!t.rb}}]}}),Qf(ch.prototype,{Qb:{name:"getSession",j:[]},ec:{name:"enroll",j:[{name:"multiFactorAssertion",J:"a valid multiFactorAssertion",optional:!1,K:function(t){return!!t&&!!t.rb}},Bf("displayName",!0)]},ad:{name:"unenroll",j:[$f({name:"multiFactorInfo",J:"a valid multiFactorInfo",optional:!1,K:Yf},Bf(),"multiFactorInfoIdentifier")]}}),Qf(Ff.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),tl(Ei,"parseLink",Ci,[Bf("link")]),tl(Sf,"assertion",(function(t){return new ah(t)}),[Jf("phone")]),function(){if(void 0===Y||!Y.INTERNAL||!Y.INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var t={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:fi,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:hi,VERIFY_AND_CHANGE_EMAIL:li,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:of,AuthCredential:ho,Error:A};tl(t,"EmailAuthProvider",Po,[]),tl(t,"FacebookAuthProvider",To,[]),tl(t,"GithubAuthProvider",_o,[]),tl(t,"GoogleAuthProvider",Ao,[]),tl(t,"TwitterAuthProvider",ko,[]),tl(t,"OAuthProvider",Io,[Bf("providerId")]),tl(t,"SAMLAuthProvider",wo,[Bf("providerId")]),tl(t,"PhoneAuthProvider",jo,[{name:"auth",J:"an instance of Firebase Auth",optional:!0,K:function(t){return!!(t&&t instanceof of)}}]),tl(t,"RecaptchaVerifier",Ff,[$f(Bf(),{name:"",J:"an HTML element",optional:!1,K:function(t){return!!(t&&t instanceof Element)}},"recaptchaContainer"),zf("recaptchaParameters",!0),{name:"app",J:"an instance of Firebase App",optional:!0,K:function(t){return!!(t&&t instanceof Y.app.App)}}]),tl(t,"ActionCodeURL",Ei,[]),tl(t,"PhoneMultiFactorGenerator",Sf,[]),Y.INTERNAL.registerComponent({name:"auth",instanceFactory:function(t){return new of(t=t.getProvider("app").getImmediate())},multipleInstances:!1,serviceProps:t,instantiationMode:"LAZY",type:"PUBLIC"}),Y.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(t){return{getUid:I((t=t.getProvider("auth").getImmediate()).getUid,t),getToken:I(t.mc,t),addAuthTokenListener:I(t.cc,t),removeAuthTokenListener:I(t.Oc,t)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),Y.registerVersion("@firebase/auth","0.16.1"),Y.INTERNAL.extendNamespace({User:gh})}()}.apply(void 0!==t.g?t.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var $=function(t,e){return($=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function Q(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var Z,tt="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==t.g?t.g:"undefined"!=typeof self?self:{},et=et||{},nt=tt||self;function rt(){}function it(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function ot(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var st="closure_uid_"+(1e9*Math.random()>>>0),at=0;function ut(t,e,n){return t.call.apply(t.bind,arguments)}function ct(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function ht(t,e,n){return(ht=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ut:ct).apply(null,arguments)}function ft(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function lt(){return Date.now()}function dt(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Kb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function pt(){this.j=this.j,this.i=this.i}pt.prototype.j=!1,pt.prototype.ja=function(){!this.j&&(this.j=!0,this.G(),0)&&function(t){Object.prototype.hasOwnProperty.call(t,st)&&t[st]||(t[st]=++at)}(this)},pt.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var vt=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},mt=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function yt(t){return Array.prototype.concat.apply([],arguments)}function gt(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function bt(t){return/^[\s\xa0]*$/.test(t)}var wt,It=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function Tt(t,e){return-1!=t.indexOf(e)}function Et(t,e){return t<e?-1:t>e?1:0}t:{var _t=nt.navigator;if(_t){var St=_t.userAgent;if(St){wt=St;break t}}wt=""}function At(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function Nt(t){var e={};for(var n in t)e[n]=t[n];return e}var kt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Dt(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<kt.length;o++)n=kt[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Ot(t){return Ot[" "](t),t}Ot[" "]=rt;var Ct,Pt,xt=Tt(wt,"Opera"),Lt=Tt(wt,"Trident")||Tt(wt,"MSIE"),Rt=Tt(wt,"Edge"),Mt=Rt||Lt,Ut=Tt(wt,"Gecko")&&!(Tt(wt.toLowerCase(),"webkit")&&!Tt(wt,"Edge"))&&!(Tt(wt,"Trident")||Tt(wt,"MSIE"))&&!Tt(wt,"Edge"),jt=Tt(wt.toLowerCase(),"webkit")&&!Tt(wt,"Edge");function Vt(){var t=nt.document;return t?t.documentMode:void 0}t:{var Ft="",qt=(Pt=wt,Ut?/rv:([^\);]+)(\)|;)/.exec(Pt):Rt?/Edge\/([\d\.]+)/.exec(Pt):Lt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Pt):jt?/WebKit\/(\S+)/.exec(Pt):xt?/(?:Version)[ \/]?(\S+)/.exec(Pt):void 0);if(qt&&(Ft=qt?qt[1]:""),Lt){var Ht=Vt();if(null!=Ht&&Ht>parseFloat(Ft)){Ct=String(Ht);break t}}Ct=Ft}var Bt,Gt={};function zt(t){return function(t,e){var n=Gt;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,(function(){for(var e=0,n=It(String(Ct)).split("."),r=It(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=Et(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||Et(0==s[2].length,0==a[2].length)||Et(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e}))}nt.document&&Lt?Bt=Vt()||parseInt(Ct,10)||void 0:Bt=void 0;var Kt=Bt,Wt=!Lt||9<=Number(Kt),Jt=Lt&&!zt("9"),Xt=function(){if(!nt.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{nt.addEventListener("test",rt,e),nt.removeEventListener("test",rt,e)}catch(t){}return t}();function Yt(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function $t(t,e){if(Yt.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(Ut){t:{try{Ot(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Qt[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}Yt.prototype.b=function(){this.defaultPrevented=!0},dt($t,Yt);var Qt={2:"touch",3:"pen",4:"mouse"};$t.prototype.b=function(){$t.X.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Jt)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(t){}};var Zt="closure_listenable_"+(1e6*Math.random()|0),te=0;function ee(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++te,this.Y=this.Z=!1}function ne(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function re(t){this.src=t,this.a={},this.b=0}function ie(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=vt(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(ne(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function oe(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==r)return i}return-1}re.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=oe(t,e,r,i);return-1<s?(e=t[s],n||(e.Z=!1)):((e=new ee(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var se="closure_lm_"+(1e6*Math.random()|0),ae={};function ue(t,e,n,r,i){if(r&&r.once)return he(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)ue(t,e[o],n,r,i);return null}return n=ge(n),t&&t[Zt]?t.va(e,n,ot(r)?!!r.capture:!!r,i):ce(t,e,n,!1,r,i)}function ce(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=ot(i)?!!i.capture:!!i;if(s&&!Wt)return null;var a=me(t);if(a||(t[se]=a=new re(t)),(n=a.add(e,n,r,s,o)).proxy)return n;if(r=function(){var t=ve,e=Wt?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Xt||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(de(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function he(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)he(t,e[o],n,r,i);return null}return n=ge(n),t&&t[Zt]?t.wa(e,n,ot(r)?!!r.capture:!!r,i):ce(t,e,n,!0,r,i)}function fe(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)fe(t,e[o],n,r,i);else r=ot(r)?!!r.capture:!!r,n=ge(n),t&&t[Zt]?(t=t.c,(e=String(e).toString())in t.a&&-1<(n=oe(o=t.a[e],n,r,i))&&(ne(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--))):t&&(t=me(t))&&(e=t.a[e.toString()],t=-1,e&&(t=oe(e,n,r,i)),(n=-1<t?e[t]:null)&&le(n))}function le(t){if("number"!=typeof t&&t&&!t.Y){var e=t.src;if(e&&e[Zt])ie(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(de(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=me(e))?(ie(n,t),0==n.b&&(n.src=null,e[se]=null)):ne(t)}}}function de(t){return t in ae?ae[t]:ae[t]="on"+t}function pe(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&le(t),n.call(r,e)}function ve(t,e){if(t.Y)return!0;if(!Wt){if(!e)t:{e=["window","event"];for(var n=nt,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return pe(t,e=new $t(e,this))}return pe(t,new $t(e,this))}function me(t){return(t=t[se])instanceof re?t:null}var ye="__closure_events_fn_"+(1e9*Math.random()>>>0);function ge(t){return"function"==typeof t?t:(t[ye]||(t[ye]=function(e){return t.handleEvent(e)}),t[ye])}function be(){pt.call(this),this.c=new re(this),this.J=this,this.C=null}function we(t,e){var n,r=t.C;if(r)for(n=[];r;r=r.C)n.push(r);if(t=t.J,r=e.type||e,"string"==typeof e)e=new Yt(e,t);else if(e instanceof Yt)e.target=e.target||t;else{var i=e;Dt(e=new Yt(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.a=n[o];i=Ie(s,r,!0,e)&&i}if(i=Ie(s=e.a=t,r,!0,e)&&i,i=Ie(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=Ie(s=e.a=n[o],r,!1,e)&&i}function Ie(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.Y&&s.capture==n){var a=s.listener,u=s.ca||s.src;s.Z&&ie(t.c,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}dt(be,pt),be.prototype[Zt]=!0,(Z=be.prototype).addEventListener=function(t,e,n,r){ue(this,t,e,n,r)},Z.removeEventListener=function(t,e,n,r){fe(this,t,e,n,r)},Z.G=function(){if(be.X.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)ne(n[r]);delete e.a[t],e.b--}}this.C=null},Z.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},Z.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var Te=nt.JSON.stringify;function Ee(){this.b=this.a=null}var _e,Se=new(function(){function t(t,e){this.c=t,this.f=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,t=this.a,this.a=t.next,t.next=null):t=this.c(),t},t}())((function(){return new Ne}),(function(t){t.reset()}));function Ae(){var t=Ce,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function Ne(){this.next=this.b=this.a=null}function ke(t){nt.setTimeout((function(){throw t}),0)}function De(t,e){_e||function(){var t=nt.Promise.resolve(void 0);_e=function(){t.then(Pe)}}(),Oe||(_e(),Oe=!0),Ce.add(t,e)}Ee.prototype.add=function(t,e){var n=Se.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},Ne.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},Ne.prototype.reset=function(){this.next=this.b=this.a=null};var Oe=!1,Ce=new Ee;function Pe(){for(var t;t=Ae();){try{t.a.call(t.b)}catch(t){ke(t)}var e=Se;e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}Oe=!1}function xe(t,e){be.call(this),this.b=t||1,this.a=e||nt,this.f=ht(this.Za,this),this.g=lt()}function Le(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function Re(t,e,n){if("function"==typeof t)n&&(t=ht(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=ht(t.handleEvent,t)}return 2147483647<Number(e)?-1:nt.setTimeout(t,e||0)}function Me(t){t.a=Re((function(){t.a=null,t.c&&(t.c=!1,Me(t))}),t.h);var e=t.b;t.b=null,t.g.apply(null,e)}dt(xe,be),(Z=xe.prototype).aa=!1,Z.M=null,Z.Za=function(){if(this.aa){var t=lt()-this.g;0<t&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),we(this,"tick"),this.aa&&(Le(this),this.start()))}},Z.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=lt())},Z.G=function(){xe.X.G.call(this),Le(this),delete this.a};var Ue=function(t){function e(e,n){var r=t.call(this)||this;return r.g=e,r.h=n,r.b=null,r.c=!1,r.a=null,r}return function(t,e){function n(){this.constructor=t}$(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:Me(this)},e.prototype.G=function(){t.prototype.G.call(this),this.a&&(nt.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},e}(pt);function je(t){pt.call(this),this.b=t,this.a={}}dt(je,pt);var Ve=[];function Fe(t,e,n,r){Array.isArray(n)||(n&&(Ve[0]=n.toString()),n=Ve);for(var i=0;i<n.length;i++){var o=ue(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function qe(t){At(t.a,(function(t,e){this.a.hasOwnProperty(e)&&le(t)}),t),t.a={}}function He(){this.a=!0}function Be(t,e,n,r){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return Te(n)}catch(t){return e}}(t,n)+(r?" "+r:"")}))}je.prototype.G=function(){je.X.G.call(this),qe(this)},je.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},He.prototype.info=function(){};var Ge={},ze=null;function Ke(){return ze=ze||new be}function We(t){Yt.call(this,Ge.Fa,t)}function Je(t){var e=Ke();we(e,new We(e,t))}function Xe(t,e){Yt.call(this,Ge.STAT_EVENT,t),this.stat=e}function Ye(t){var e=Ke();we(e,new Xe(e,t))}function $e(t){Yt.call(this,Ge.Ga,t)}function Qe(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return nt.setTimeout((function(){t()}),e)}Ge.Fa="serverreachability",dt(We,Yt),Ge.STAT_EVENT="statevent",dt(Xe,Yt),Ge.Ga="timingevent",dt($e,Yt);var Ze={NO_ERROR:0,$a:1,nb:2,mb:3,hb:4,lb:5,ob:6,Da:7,TIMEOUT:8,rb:9},tn={fb:"complete",Bb:"success",Ea:"error",Da:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",ib:"downloadprogress",Jb:"uploadprogress"};function en(){}function nn(t){var e;return(e=t.a)||(e=t.a={}),e}function rn(){}en.prototype.a=null;var on,sn={OPEN:"a",eb:"b",Ea:"c",qb:"d"};function an(){Yt.call(this,"d")}function un(){Yt.call(this,"c")}function cn(){}function hn(t,e,n,r){this.g=t,this.c=e,this.f=n,this.S=r||1,this.J=new je(this),this.P=fn,t=Mt?125:void 0,this.R=new xe(t),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}dt(an,Yt),dt(un,Yt),dt(cn,en),on=new cn;var fn=45e3,ln={},dn={};function pn(t,e,n){t.H=1,t.i=Mn(On(e)),t.j=n,t.I=!0,vn(t,null)}function vn(t,e){t.u=lt(),gn(t),t.l=On(t.i);var n=t.l,r=t.S;Array.isArray(r)||(r=[String(r)]),Xn(n.b,"t",r),t.D=0,t.a=Br(t.g,t.g.C?e:null),0<t.O&&(t.F=new Ue(ht(t.Ca,t,t.a),t.O)),Fe(t.J,t.a,"readystatechange",t.Xa),e=t.B?Nt(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),Je(1),function(t,e,n,r,i,o){t.info((function(){if(t.a)if(o)for(var s="",a=o.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var h=c[0];c=c[1];var f=h.split("_");s=2<=f.length&&"type"==f[1]?s+(h+"=")+c+"&":s+(h+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s}))}(t.c,t.m,t.l,t.f,t.S,t.j)}function mn(t,e,n){for(var r=!0;!t.A&&t.D<n.length;){var i=yn(t,n);if(i==dn){4==e&&(t.h=4,Ye(14),r=!1),Be(t.c,t.f,null,"[Incomplete Response]");break}if(i==ln){t.h=4,Ye(15),Be(t.c,t.f,n,"[Invalid Chunk]"),r=!1;break}Be(t.c,t.f,i,null),En(t,i)}4==e&&0==n.length&&(t.h=1,Ye(16),r=!1),t.b=t.b&&r,r?0<n.length&&!t.V&&(t.V=!0,(e=t.g).a==t&&e.U&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),Rr(e),e.F=!0,Ye(11))):(Be(t.c,t.f,n,"[Invalid Chunked Response]"),Tn(t),In(t))}function yn(t,e){var n=t.D,r=e.indexOf("\n",n);return-1==r?dn:(n=Number(e.substring(n,r)),isNaN(n)?ln:(r+=1)+n>e.length?dn:(e=e.substr(r,n),t.D=r+n,e))}function gn(t){t.T=lt()+t.P,bn(t,t.P)}function bn(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=Qe(ht(t.Va,t),e)}function wn(t){t.o&&(nt.clearTimeout(t.o),t.o=null)}function In(t){0==t.g.v||t.A||jr(t.g,t)}function Tn(t){wn(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,Le(t.R),qe(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function En(t,e){try{var n=t.g;if(0!=n.v&&(n.a==t||nr(n.b,t)))if(n.I=t.N,!t.C&&nr(n.b,t)&&3==n.v){try{var r=n.ka.a.parse(e)}catch(t){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.j){if(n.a){if(!(n.a.u+3e3<t.u))break t;Ur(n),Ar(n)}Lr(n),Ye(18)}}else n.oa=i[1],0<n.oa-n.P&&37500>i[2]&&n.H&&0==n.o&&!n.m&&(n.m=Qe(ht(n.Sa,n),6e3));if(1>=er(n.b)&&n.ea){try{n.ea()}catch(t){}n.ea=void 0}}else Fr(n,11)}else if((t.C||n.a==t)&&Ur(n),!bt(e))for(e=r=n.ka.a.parse(e),r=0;r<e.length;r++)if(i=e[r],n.P=i[0],i=i[1],2==n.v)if("c"==i[0]){n.J=i[1],n.ga=i[2];var o=i[3];null!=o&&(n.ha=o,n.c.info("VER="+n.ha));var s=i[4];null!=s&&(n.pa=s,n.c.info("SVER="+n.pa));var a=i[5];if(null!=a&&"number"==typeof a&&0<a){var u=1.5*a;n.D=u,n.c.info("backChannelRequestTimeoutMs_="+u)}u=n;var c=t.a;if(c){var h=c.a?c.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(h){var f=u.b;!f.a&&(Tt(h,"spdy")||Tt(h,"quic")||Tt(h,"h2"))&&(f.f=f.g,f.a=new Set,f.b&&(rr(f,f.b),f.b=null))}if(u.A){var l=c.a?c.a.getResponseHeader("X-HTTP-Session-Id"):null;l&&(u.na=l,Rn(u.B,u.A,l))}}n.v=3,n.f&&n.f.ta(),n.U&&(n.N=lt()-t.u,n.c.info("Handshake RTT: "+n.N+"ms"));var d=t;if((u=n).la=Hr(u,u.C?u.ga:null,u.fa),d.C){ir(u.b,d);var p=d,v=u.D;v&&p.setTimeout(v),p.o&&(wn(p),gn(p)),u.a=d}else xr(u);0<n.g.length&&Dr(n)}else"stop"!=i[0]&&"close"!=i[0]||Fr(n,7);else 3==n.v&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?Fr(n,7):Sr(n):"noop"!=i[0]&&n.f&&n.f.sa(i),n.o=0);Je(4)}catch(t){}}function _n(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(it(t)||"string"==typeof t)mt(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(it(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(it(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function Sn(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Sn)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function An(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Nn(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)Nn(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function Nn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(Z=hn.prototype).setTimeout=function(t){this.P=t},Z.Xa=function(t){t=t.target;var e=this.F;e&&3==Ir(t)?e.f():this.Ca(t)},Z.Ca=function(t){try{if(t==this.a)t:{var e=Ir(this.a),n=this.a.ua(),r=this.a.W();if(!(3>e||3==e&&!Mt&&!this.a.$())){this.A||4!=e||7==n||Je(8==n||0>=r?3:2),wn(this);var i=this.a.W();this.N=i;var o=this.a.$();if(this.b=200==i,function(t,e,n,r,i,o,s){t.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s}))}(this.c,this.m,this.l,this.f,this.S,e,i),this.b){if(this.U&&!this.C){e:{if(this.a){var s,a=this.a;if((s=a.a?a.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!bt(s)){var u=s;break e}}u=null}if(!u){this.b=!1,this.h=3,Ye(12),Tn(this),In(this);break t}Be(this.c,this.f,u,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,En(this,u)}this.I?(mn(this,e,o),Mt&&this.b&&3==e&&(Fe(this.J,this.R,"tick",this.Wa),this.R.start())):(Be(this.c,this.f,o,null),En(this,o)),4==e&&Tn(this),this.b&&!this.A&&(4==e?jr(this.g,this):(this.b=!1,gn(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.h=3,Ye(12)):(this.h=0,Ye(13)),Tn(this),In(this)}}}catch(t){}},Z.Wa=function(){if(this.a){var t=Ir(this.a),e=this.a.$();this.D<e.length&&(wn(this),mn(this,t,e),this.b&&4!=t&&gn(this))}},Z.cancel=function(){this.A=!0,Tn(this)},Z.Va=function(){this.o=null;var t=lt();0<=t-this.T?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.c,this.l),2!=this.H&&(Je(3),Ye(17)),Tn(this),this.h=2,In(this)):bn(this,this.T-t)},(Z=Sn.prototype).K=function(){An(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},Z.L=function(){return An(this),this.a.concat()},Z.get=function(t,e){return Nn(this.b,t)?this.b[t]:e},Z.set=function(t,e){Nn(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},Z.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var kn=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Dn(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof Dn){this.a=void 0!==e?e:t.a,Cn(this,t.f),this.j=t.j,Pn(this,t.c),xn(this,t.h),this.g=t.g,e=t.b;var n=new zn;n.c=e.c,e.a&&(n.a=new Sn(e.a),n.b=e.b),Ln(this,n),this.i=t.i}else t&&(n=String(t).match(kn))?(this.a=!!e,Cn(this,n[1]||"",!0),this.j=Un(n[2]||""),Pn(this,n[3]||"",!0),xn(this,n[4]),this.g=Un(n[5]||"",!0),Ln(this,n[6]||"",!0),this.i=Un(n[7]||"")):(this.a=!!e,this.b=new zn(null,this.a))}function On(t){return new Dn(t)}function Cn(t,e,n){t.f=n?Un(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function Pn(t,e,n){t.c=n?Un(e,!0):e}function xn(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function Ln(t,e,n){e instanceof zn?(t.b=e,function(t,e){e&&!t.f&&(Kn(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(Wn(this,e),Xn(this,n,t))}),t)),t.f=e}(t.b,t.a)):(n||(e=jn(e,Bn)),t.b=new zn(e,t.a))}function Rn(t,e,n){t.b.set(e,n)}function Mn(t){return Rn(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^lt()).toString(36)),t}function Un(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function jn(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Vn),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Vn(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Dn.prototype.toString=function(){var t=[],e=this.f;e&&t.push(jn(e,Fn,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(jn(e,Fn,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(jn(n,"/"==n.charAt(0)?Hn:qn,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",jn(n,Gn)),t.join("")};var Fn=/[#\/\?@]/g,qn=/[#\?:]/g,Hn=/[#\?]/g,Bn=/[#\?@]/g,Gn=/#/g;function zn(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Kn(t){t.a||(t.a=new Sn,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function Wn(t,e){Kn(t),e=Yn(t,e),Nn(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Nn((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&An(t)))}function Jn(t,e){return Kn(t),e=Yn(t,e),Nn(t.a.b,e)}function Xn(t,e,n){Wn(t,e),0<n.length&&(t.c=null,t.a.set(Yn(t,e),gt(n)),t.b+=n.length)}function Yn(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}(Z=zn.prototype).add=function(t,e){Kn(this),this.c=null,t=Yn(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},Z.forEach=function(t,e){Kn(this),this.a.forEach((function(n,r){mt(n,(function(n){t.call(e,n,r,this)}),this)}),this)},Z.L=function(){Kn(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},Z.K=function(t){Kn(this);var e=[];if("string"==typeof t)Jn(this,t)&&(e=yt(e,this.a.get(Yn(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=yt(e,t[n])}return e},Z.set=function(t,e){return Kn(this),this.c=null,Jn(this,t=Yn(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},Z.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},Z.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.K(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var $n=function(t,e){this.b=t,this.a=e};function Qn(t){this.g=t||Zn,t=nt.PerformanceNavigationTiming?0<(t=nt.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(nt.ia&&nt.ia.ya&&nt.ia.ya()&&nt.ia.ya().Lb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}var Zn=10;function tr(t){return!!t.b||!!t.a&&t.a.size>=t.f}function er(t){return t.b?1:t.a?t.a.size:0}function nr(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function rr(t,e){t.a?t.a.add(e):t.b=e}function ir(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function or(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null!=t.a&&0!==t.a.size){var r=t.c;try{for(var i=Q(t.a.values()),o=i.next();!o.done;o=i.next()){var s=o.value;r=r.concat(s.s)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return gt(t.c)}function sr(){}function ar(){this.a=new sr}function ur(t,e,n){var r=n||"";try{_n(t,(function(t,n){var i=t;ot(t)&&(i=Te(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(t){throw e.push(r+"type="+encodeURIComponent("_badmap")),t}}function cr(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(t){}}Qn.prototype.cancel=function(){var t,e;if(this.c=or(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=Q(this.a.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},sr.prototype.stringify=function(t){return nt.JSON.stringify(t,void 0)},sr.prototype.parse=function(t){return nt.JSON.parse(t,void 0)};var hr=nt.JSON.parse;function fr(t){be.call(this),this.headers=new Sn,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=lr,this.D=this.F=!1}dt(fr,be);var lr="",dr=/^https?$/i,pr=["POST","PUT"];function vr(t){return"content-type"==t.toLowerCase()}function mr(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,yr(t),br(t)}function yr(t){t.u||(t.u=!0,we(t,"complete"),we(t,"error"))}function gr(t){if(t.b&&void 0!==et&&(!t.s[1]||4!=Ir(t)||2!=t.W()))if(t.l&&4==Ir(t))Re(t.za,0,t);else if(we(t,"readystatechange"),4==Ir(t)){t.b=!1;try{var e,n=t.W();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.B).match(kn)[1]||null;if(!o&&nt.self&&nt.self.location){var s=nt.self.location.protocol;o=s.substr(0,s.length-1)}i=!dr.test(o?o.toLowerCase():"")}e=i}if(e)we(t,"complete"),we(t,"success");else{t.h=6;try{var a=2<Ir(t)?t.a.statusText:""}catch(n){a=""}t.f=a+" ["+t.W()+"]",yr(t)}}finally{br(t)}}}function br(t,e){if(t.a){wr(t);var n=t.a,r=t.s[0]?rt:null;t.a=null,t.s=null,e||we(t,"ready");try{n.onreadystatechange=r}catch(t){}}}function wr(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(nt.clearTimeout(t.m),t.m=null)}function Ir(t){return t.a?t.a.readyState:0}function Tr(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return At(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):Rn(t,e,n))}function Er(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function _r(t){this.pa=0,this.g=[],this.c=new He,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.V=this.i=this.O=this.l=null,this.Oa=this.R=0,this.La=Er("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.oa=this.P=-1,this.T=this.o=this.u=0,this.Ha=Er("baseRetryDelayMs",5e3,t),this.Ra=Er("retryDelaySeedMs",1e4,t),this.Ma=Er("forwardChannelMaxRetries",2,t),this.ma=Er("forwardChannelRequestTimeoutMs",2e4,t),this.Na=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new Qn(t&&t.concurrentRequestLimit),this.ka=new ar,this.da=t&&t.fastHandshake||!1,this.Ia=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.S=!1),this.U=!this.da&&this.S&&t&&t.detectBufferingProxy||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null,(this.Ka=t&&t.c||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}function Sr(t){if(Nr(t),3==t.v){var e=t.R++,n=On(t.B);Rn(n,"SID",t.J),Rn(n,"RID",e),Rn(n,"TYPE","terminate"),Cr(t,n),(e=new hn(t,t.c,e,void 0)).H=2,e.i=Mn(On(n)),n=!1,nt.navigator&&nt.navigator.sendBeacon&&(n=nt.navigator.sendBeacon(e.i.toString(),"")),!n&&nt.Image&&((new Image).src=e.i,n=!0),n||(e.a=Br(e.g,null),e.a.ba(e.i)),e.u=lt(),gn(e)}qr(t)}function Ar(t){t.a&&(Rr(t),t.a.cancel(),t.a=null)}function Nr(t){Ar(t),t.j&&(nt.clearTimeout(t.j),t.j=null),Ur(t),t.b.cancel(),t.h&&("number"==typeof t.h&&nt.clearTimeout(t.h),t.h=null)}function kr(t,e){t.g.push(new $n(t.Oa++,e)),3==t.v&&Dr(t)}function Dr(t){tr(t.b)||t.h||(t.h=!0,De(t.Ba,t),t.u=0)}function Or(t,e){var n;n=e?e.f:t.R++;var r=On(t.B);Rn(r,"SID",t.J),Rn(r,"RID",n),Rn(r,"AID",t.P),Cr(t,r),t.i&&t.l&&Tr(r,t.i,t.l),n=new hn(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=Pr(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),rr(t.b,n),pn(n,r,e)}function Cr(t,e){t.f&&_n({},(function(t,n){Rn(e,n,t)}))}function Pr(t,e,n){n=Math.min(t.g.length,n);var r=t.f?ht(t.f.Ja,t.f,t):null;t:for(var i=t.g,o=-1;;){var s=["count="+n];-1==o?0<n?(o=i[0].b,s.push("ofs="+o)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].b,h=i[u].a;if(0>(c-=o))o=Math.max(0,i[u].b-100),a=!1;else try{ur(h,s,"req"+c+"_")}catch(t){r&&r(h)}}if(a){r=s.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function xr(t){t.a||t.j||(t.T=1,De(t.Aa,t),t.o=0)}function Lr(t){return!(t.a||t.j||3<=t.o||(t.T++,t.j=Qe(ht(t.Aa,t),Vr(t,t.o)),t.o++,0))}function Rr(t){null!=t.s&&(nt.clearTimeout(t.s),t.s=null)}function Mr(t){t.a=new hn(t,t.c,"rpc",t.T),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=On(t.la);Rn(e,"RID","rpc"),Rn(e,"SID",t.J),Rn(e,"CI",t.H?"0":"1"),Rn(e,"AID",t.P),Cr(t,e),Rn(e,"TYPE","xmlhttp"),t.i&&t.l&&Tr(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=Mn(On(e)),n.j=null,n.I=!0,vn(n,t)}function Ur(t){null!=t.m&&(nt.clearTimeout(t.m),t.m=null)}function jr(t,e){var n=null;if(t.a==e){Ur(t),Rr(t),t.a=null;var r=2}else{if(!nr(t.b,e))return;n=e.s,ir(t.b,e),r=1}if(t.I=e.N,0!=t.v)if(e.b)if(1==r){n=e.j?e.j.length:0,e=lt()-e.u;var i=t.u;we(r=Ke(),new $e(r,n,e,i)),Dr(t)}else xr(t);else if(3==(i=e.h)||0==i&&0<t.I||!(1==r&&function(t,e){return!(er(t.b)>=t.b.f-(t.h?1:0)||(t.h?(t.g=e.s.concat(t.g),0):1==t.v||2==t.v||t.u>=(t.La?0:t.Ma)||(t.h=Qe(ht(t.Ba,t,e),Vr(t,t.u)),t.u++,0)))}(t,e)||2==r&&Lr(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:Fr(t,5);break;case 4:Fr(t,10);break;case 3:Fr(t,6);break;default:Fr(t,2)}}function Vr(t,e){var n=t.Ha+Math.floor(Math.random()*t.Ra);return t.f||(n*=2),n*e}function Fr(t,e){if(t.c.info("Error code "+e),2==e){var n=null;t.f&&(n=null);var r=ht(t.Ya,t);n||(n=new Dn("//www.google.com/images/cleardot.gif"),nt.location&&"http"==nt.location.protocol||Cn(n,"https"),Mn(n)),function(t,e){var n=new He;if(nt.Image){var r=new Image;r.onload=ft(cr,n,r,"TestLoadImage: loaded",!0,e),r.onerror=ft(cr,n,r,"TestLoadImage: error",!1,e),r.onabort=ft(cr,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=ft(cr,n,r,"TestLoadImage: timeout",!1,e),nt.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}(n.toString(),r)}else Ye(2);t.v=0,t.f&&t.f.ra(e),qr(t),Nr(t)}function qr(t){t.v=0,t.I=-1,t.f&&(0==or(t.b).length&&0==t.g.length||(t.b.c.length=0,gt(t.g),t.g.length=0),t.f.qa())}function Hr(t,e,n){var r=function(t){return t instanceof Dn?On(t):new Dn(t,void 0)}(n);if(""!=r.c)e&&Pn(r,e+"."+r.c),xn(r,r.h);else{var i=nt.location;r=function(t,e,n,r){var i=new Dn(null,void 0);return t&&Cn(i,t),e&&Pn(i,e),n&&xn(i,n),r&&(i.g=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.V&&At(t.V,(function(t,e){Rn(r,e,t)})),e=t.A,n=t.na,e&&n&&Rn(r,e,n),Rn(r,"VER",t.ha),Cr(t,r),r}function Br(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new fr(t.Na)).F=t.C,e}function Gr(){}function zr(){if(Lt&&!(10<=Number(Kt)))throw Error("Environmental error: no available transport.")}function Kr(t,e){be.call(this),this.a=new _r(e),this.o=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!bt(t)&&(this.a.i=t),this.m=e&&e.supportsCrossDomainXhr||!1,this.l=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!bt(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&e in(t=this.b)&&delete t[e]),this.f=new Xr(this)}function Wr(t){an.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function Jr(){un.call(this),this.status=1}function Xr(t){this.a=t}(Z=fr.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.H?nn(this.H):nn(on),this.a.onreadystatechange=ht(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(t){return void mr(this,t)}t=n||"";var i=new Sn(this.headers);r&&_n(r,(function(t,e){i.set(e,t)})),r=function(t){t:{for(var e=vr,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.L()),n=nt.FormData&&t instanceof nt.FormData,!(0<=vt(pr,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(t,e){this.a.setRequestHeader(e,t)}),this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{wr(this),0<this.o&&((this.D=function(t){return Lt&&zt(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=ht(this.xa,this)):this.m=Re(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(t){mr(this,t)}},Z.xa=function(){void 0!==et&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,we(this,"timeout"),this.abort(8))},Z.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,we(this,"complete"),we(this,"abort"),br(this))},Z.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),br(this,!0)),fr.X.G.call(this)},Z.za=function(){this.j||(this.A||this.l||this.g?gr(this):this.Ua())},Z.Ua=function(){gr(this)},Z.W=function(){try{return 2<Ir(this)?this.a.status:-1}catch(t){return-1}},Z.$=function(){try{return this.a?this.a.responseText:""}catch(t){return""}},Z.Pa=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),hr(e)}},Z.ua=function(){return this.h},Z.Qa=function(){return"string"==typeof this.f?this.f:String(this.f)},(Z=_r.prototype).ha=8,Z.v=1,Z.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new hn(this,this.c,t,void 0),r=this.l;if(this.O&&(r?Dt(r=Nt(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if(void 0===(o="__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=Pr(this,n,e),Rn(i=On(this.B),"RID",t),Rn(i,"CVER",22),this.A&&Rn(i,"X-HTTP-Session-Id",this.A),Cr(this,i),this.i&&r&&Tr(i,this.i,r),rr(this.b,n),this.Ia&&Rn(i,"TYPE","init"),this.da?(Rn(i,"$req",e),Rn(i,"SID","null"),n.U=!0,pn(n,i,null)):pn(n,i,e),this.v=2}}else 3==this.v&&(t?Or(this,t):0==this.g.length||tr(this.b)||Or(this))},Z.Aa=function(){if(this.j=null,Mr(this),this.U&&!(this.F||null==this.a||0>=this.N)){var t=2*this.N;this.c.info("BP detection timer enabled: "+t),this.s=Qe(ht(this.Ta,this),t)}},Z.Ta=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,Ye(10),Ar(this),Mr(this))},Z.Sa=function(){null!=this.m&&(this.m=null,Ar(this),Lr(this),Ye(19))},Z.Ya=function(t){t?(this.c.info("Successfully pinged google.com"),Ye(2)):(this.c.info("Failed to ping google.com"),Ye(1))},(Z=Gr.prototype).ta=function(){},Z.sa=function(){},Z.ra=function(){},Z.qa=function(){},Z.Ja=function(){},zr.prototype.a=function(t,e){return new Kr(t,e)},dt(Kr,be),Kr.prototype.g=function(){this.a.f=this.f,this.m&&(this.a.C=!0);var t=this.a,e=this.o,n=this.b||void 0;Ye(0),t.fa=e,t.V=n||{},t.H=t.S,t.B=Hr(t,null,t.fa),Dr(t)},Kr.prototype.close=function(){Sr(this.a)},Kr.prototype.h=function(t){if("string"==typeof t){var e={};e.__data__=t,kr(this.a,e)}else this.l?((e={}).__data__=Te(t),kr(this.a,e)):kr(this.a,t)},Kr.prototype.G=function(){this.a.f=null,delete this.f,Sr(this.a),delete this.a,Kr.X.G.call(this)},dt(Wr,an),dt(Jr,un),dt(Xr,Gr),Xr.prototype.ta=function(){we(this.a,"a")},Xr.prototype.sa=function(t){we(this.a,new Wr(t))},Xr.prototype.ra=function(t){we(this.a,new Jr(t))},Xr.prototype.qa=function(){we(this.a,"b")},zr.prototype.createWebChannel=zr.prototype.a,Kr.prototype.send=Kr.prototype.h,Kr.prototype.open=Kr.prototype.g,Kr.prototype.close=Kr.prototype.close,Ze.NO_ERROR=0,Ze.TIMEOUT=8,Ze.HTTP_ERROR=6,tn.COMPLETE="complete",rn.EventType=sn,sn.OPEN="a",sn.CLOSE="b",sn.ERROR="c",sn.MESSAGE="d",be.prototype.listen=be.prototype.va,fr.prototype.listenOnce=fr.prototype.wa,fr.prototype.getLastError=fr.prototype.Qa,fr.prototype.getLastErrorCode=fr.prototype.ua,fr.prototype.getStatus=fr.prototype.W,fr.prototype.getResponseJson=fr.prototype.Pa,fr.prototype.getResponseText=fr.prototype.$,fr.prototype.send=fr.prototype.ba;var Yr=Ze,$r=tn,Qr=Ge,Zr=10,ti=11,ei=rn,ni=fr,ri=new R("@firebase/firestore");function ii(){return ri.logLevel}function oi(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(ri.logLevel<=k.DEBUG){var r=e.map(ui);ri.debug.apply(ri,c(["Firestore (8.2.1): "+t],r))}}function si(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(ri.logLevel<=k.ERROR){var r=e.map(ui);ri.error.apply(ri,c(["Firestore (8.2.1): "+t],r))}}function ai(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(ri.logLevel<=k.WARN){var r=e.map(ui);ri.warn.apply(ri,c(["Firestore (8.2.1): "+t],r))}}function ui(t){if("string"==typeof t)return t;try{return e=t,JSON.stringify(e)}catch(e){return t}var e}function ci(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.2.1) INTERNAL ASSERTION FAILED: "+t;throw si(e),new Error(e)}function hi(t,e){t||ci()}function fi(t,e){return t}function li(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var di=function(){function t(){}return t.t=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=li(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function pi(t,e){return t<e?-1:t>e?1:0}function vi(t,e,n){return t.length===e.length&&t.every((function(t,r){return n(t,e[r])}))}function mi(t){return t+"\0"}var yi=function(){function t(t){this.i=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return t=this.i,btoa(t);var t},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.i)},t.prototype.o=function(){return 2*this.i.length},t.prototype.u=function(t){return pi(this.i,t.i)},t.prototype.isEqual=function(t){return this.i===t.i},t}();yi.h=new yi("");var gi={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},bi=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return n(e,t),e}(Error),wi=function(){function t(t){this.l=t}return t.fromBase64String=function(e){try{return new t(yi.fromBase64String(e))}catch(e){throw new bi(gi.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(yi.fromUint8Array(e))},t.prototype.toBase64=function(){return this.l.toBase64()},t.prototype.toUint8Array=function(){return this.l.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this.l.isEqual(t.l)},t}(),Ii=function(t){this._=t};function Ti(){if("undefined"==typeof Uint8Array)throw new bi(gi.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function Ei(){if("undefined"==typeof atob)throw new bi(gi.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var _i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.fromBase64String=function(t){return Ei(),new e(wi.fromBase64String(t))},e.fromUint8Array=function(t){return Ti(),new e(wi.fromUint8Array(t))},e.prototype.toBase64=function(){return Ei(),this._.toBase64()},e.prototype.toUint8Array=function(){return Ti(),this._.toUint8Array()},e.prototype.isEqual=function(t){return this._.isEqual(t._)},e.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},e}(Ii),Si=function(t,e,n,r,i,o){this.T=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i,this.I=o},Ai=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"m",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),Ni=function(){function t(t){this.uid=t}return t.prototype.A=function(){return null!=this.uid},t.prototype.R=function(){return this.A()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();Ni.UNAUTHENTICATED=new Ni(null),Ni.P=new Ni("google-credentials-uid"),Ni.g=new Ni("first-party-uid");var ki=function(t,e){this.user=e,this.type="OAuth",this.V={},this.V.Authorization="Bearer "+t},Di=function(){function t(){this.p=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.v=function(){},t.prototype.S=function(t){this.p=t,t(Ni.UNAUTHENTICATED)},t.prototype.D=function(){this.p=null},t}(),Oi=function(){function t(t){var e=this;this.C=null,this.currentUser=Ni.UNAUTHENTICATED,this.N=!1,this.F=0,this.p=null,this.forceRefresh=!1,this.C=function(){e.F++,e.currentUser=e.O(),e.N=!0,e.p&&e.p(e.currentUser)},this.F=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.C):(this.C(null),t.get().then((function(t){e.auth=t,e.C&&e.auth.addAuthTokenListener(e.C)}),(function(){})))}return t.prototype.getToken=function(){var t=this,e=this.F,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return t.F!==e?(oi("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(hi("string"==typeof n.accessToken),new ki(n.accessToken,t.currentUser)):null})):Promise.resolve(null)},t.prototype.v=function(){this.forceRefresh=!0},t.prototype.S=function(t){this.p=t,this.N&&t(this.currentUser)},t.prototype.D=function(){this.auth&&this.auth.removeAuthTokenListener(this.C),this.C=null,this.p=null},t.prototype.O=function(){var t=this.auth&&this.auth.getUid();return hi(null===t||"string"==typeof t),new Ni(t)},t}(),Ci=function(){function t(t,e){this.k=t,this.M=e,this.type="FirstParty",this.user=Ni.g}return Object.defineProperty(t.prototype,"V",{get:function(){var t={"X-Goog-AuthUser":this.M},e=this.k.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),t},enumerable:!1,configurable:!0}),t}(),Pi=function(){function t(t,e){this.k=t,this.M=e}return t.prototype.getToken=function(){return Promise.resolve(new Ci(this.k,this.M))},t.prototype.S=function(t){t(Ni.g)},t.prototype.D=function(){},t.prototype.v=function(){},t}(),xi=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.L=function(t){return n.$(t)},this.B=function(t){return e.q(t)})}return t.prototype.$=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.B&&this.B(t),t},t}();xi.U=-1;var Li=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new bi(gi.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new bi(gi.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new bi(gi.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new bi(gi.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,1e6*(e-1e3*n))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype.K=function(t){return this.seconds===t.seconds?pi(this.nanoseconds,t.nanoseconds):pi(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),Ri=function(){function t(t){this.timestamp=t}return t.W=function(e){return new t(e)},t.min=function(){return new t(new Li(0,0))},t.prototype.u=function(t){return this.timestamp.K(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.j=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.G=function(){return this.timestamp},t}(),Mi=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&ci(),void 0===n?n=t.length-e:n>t.length-e&&ci(),this.segments=t,this.offset=e,this.H=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.H},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.J(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(t){n.push(t)})):n.push(e),this.Y(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.X=function(t){return t=void 0===t?1:t,this.Y(this.segments,this.offset+t,this.length-t)},t.prototype.Z=function(){return this.Y(this.segments,this.offset,this.length-1)},t.prototype.tt=function(){return this.segments[this.offset]},t.prototype.et=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.nt=function(){return 0===this.length},t.prototype.st=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.it=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.rt=function(){return this.segments.slice(this.offset,this.limit())},t.J=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),Ui=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.Y=function(t,n,r){return new e(t,n,r)},e.prototype.ot=function(){return this.rt().join("/")},e.prototype.toString=function(){return this.ot()},e.ct=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i];if(s.indexOf("//")>=0)throw new bi(gi.INVALID_ARGUMENT,"Invalid segment ("+s+"). Paths must not contain // in them.");r.push.apply(r,s.split("/").filter((function(t){return t.length>0})))}return new e(r)},e.at=function(){return new e([])},e}(Mi),ji=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Vi=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.Y=function(t,n,r){return new e(t,n,r)},e.ut=function(t){return ji.test(t)},e.prototype.ot=function(){return this.rt().map((function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.ut(t)||(t="`"+t+"`"),t})).join(".")},e.prototype.toString=function(){return this.ot()},e.prototype.ht=function(){return 1===this.length&&"__name__"===this.get(0)},e.lt=function(){return new e(["__name__"])},e._t=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new bi(gi.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new bi(gi.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new bi(gi.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new bi(gi.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.at=function(){return new e([])},e}(Mi),Fi=function(){function t(t){this.path=t}return t.ft=function(e){return new t(Ui.ct(e))},t.dt=function(e){return new t(Ui.ct(e).X(5))},t.prototype.wt=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===Ui.J(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.J=function(t,e){return Ui.J(t.path,e.path)},t.Et=function(t){return t.length%2==0},t.Tt=function(e){return new t(new Ui(e.slice()))},t}();function qi(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Hi(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Bi(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Gi=function(){function t(t){this.fields=t,t.sort(Vi.J)}return t.prototype.It=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].st(t))return!0;return!1},t.prototype.isEqual=function(t){return vi(this.fields,t.fields,(function(t,e){return t.isEqual(e)}))},t}(),zi=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ki(t){if(hi(!!t),"string"==typeof t){var e=0,n=zi.exec(t);if(hi(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Wi(t.seconds),nanos:Wi(t.nanos)}}function Wi(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Ji(t){return"string"==typeof t?yi.fromBase64String(t):yi.fromUint8Array(t)}function Xi(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Yi(t){var e=t.mapValue.fields.__previous_value__;return Xi(e)?Yi(e):e}function $i(t){var e=Ki(t.mapValue.fields.__local_write_time__.timestampValue);return new Li(e.seconds,e.nanos)}function Qi(t){return null==t}function Zi(t){return 0===t&&1/t==-1/0}function to(t){return"number"==typeof t&&Number.isInteger(t)&&!Zi(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}function eo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Xi(t)?4:10:ci()}function no(t,e){var n=eo(t);if(n!==eo(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return $i(t).isEqual($i(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=Ki(t.timestampValue),r=Ki(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return Ji(t.bytesValue).isEqual(Ji(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return Wi(t.geoPointValue.latitude)===Wi(e.geoPointValue.latitude)&&Wi(t.geoPointValue.longitude)===Wi(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return Wi(t.integerValue)===Wi(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=Wi(t.doubleValue),r=Wi(e.doubleValue);return n===r?Zi(n)===Zi(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return vi(t.arrayValue.values||[],e.arrayValue.values||[],no);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(qi(n)!==qi(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!no(n[i],r[i])))return!1;return!0}(t,e);default:return ci()}}function ro(t,e){return void 0!==(t.values||[]).find((function(t){return no(t,e)}))}function io(t,e){var n=eo(t),r=eo(e);if(n!==r)return pi(n,r);switch(n){case 0:return 0;case 1:return pi(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=Wi(t.integerValue||t.doubleValue),r=Wi(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return oo(t.timestampValue,e.timestampValue);case 4:return oo($i(t),$i(e));case 5:return pi(t.stringValue,e.stringValue);case 6:return function(t,e){var n=Ji(t),r=Ji(e);return n.u(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=pi(n[i],r[i]);if(0!==o)return o}return pi(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=pi(Wi(t.latitude),Wi(e.latitude));return 0!==n?n:pi(Wi(t.longitude),Wi(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=io(n[i],r[i]);if(o)return o}return pi(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=pi(r[s],o[s]);if(0!==a)return a;var u=io(n[r[s]],i[o[s]]);if(0!==u)return u}return pi(r.length,o.length)}(t.mapValue,e.mapValue);default:throw ci()}}function oo(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return pi(t,e);var n=Ki(t),r=Ki(e),i=pi(n.seconds,r.seconds);return 0!==i?i:pi(n.nanos,r.nanos)}function so(t){return ao(t)}function ao(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=Ki(t);return"time("+e.seconds+","+e.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Ji(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,Fi.dt(n).toString()):"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=ao(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+ao(t.fields[o])}return e+"}"}(t.mapValue):ci();var e,n}function uo(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.ot()}}function co(t){return!!t&&"integerValue"in t}function ho(t){return!!t&&"arrayValue"in t}function fo(t){return!!t&&"nullValue"in t}function lo(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function po(t){return!!t&&"mapValue"in t}var vo=function(){function t(t){this.proto=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.nt())return this.proto;for(var e=this.proto,n=0;n<t.length-1;++n){if(!e.mapValue.fields)return null;if(!po(e=e.mapValue.fields[t.get(n)]))return null}return(e=(e.mapValue.fields||{})[t.et()])||null},t.prototype.isEqual=function(t){return no(this.proto,t.proto)},t}(),mo=function(){function t(t){void 0===t&&(t=vo.empty()),this.At=t,this.Rt=new Map}return t.prototype.set=function(t,e){return this.Pt(t,e),this},t.prototype.delete=function(t){return this.Pt(t,null),this},t.prototype.Pt=function(t,e){for(var n=this.Rt,r=0;r<t.length-1;++r){var i=t.get(r),o=n.get(i);o instanceof Map?n=o:o&&10===eo(o)?(o=new Map(Object.entries(o.mapValue.fields||{})),n.set(i,o),n=o):(o=new Map,n.set(i,o),n=o)}n.set(t.et(),e)},t.prototype.yt=function(){var t=this.gt(Vi.at(),this.Rt);return null!=t?new vo(t):this.At},t.prototype.gt=function(t,e){var n=this,r=!1,i=this.At.field(t),o=po(i)?Object.assign({},i.mapValue.fields):{};return e.forEach((function(e,i){if(e instanceof Map){var s=n.gt(t.child(i),e);null!=s&&(o[i]=s,r=!0)}else null!==e?(o[i]=e,r=!0):o.hasOwnProperty(i)&&(delete o[i],r=!0)})),r?{mapValue:{fields:o}}:null},t}();function yo(t){var e=[];return Hi(t.fields||{},(function(t,n){var r=new Vi([t]);if(po(n)){var i=yo(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++){var a=s[o];e.push(r.child(a))}}else e.push(r)})),new Gi(e)}var go=function(t,e){this.key=t,this.version=e},bo=function(t){function e(e,n,r,i){var o=this;return(o=t.call(this,e,n)||this).Vt=r,o.bt=!!i.bt,o.hasCommittedMutations=!!i.hasCommittedMutations,o}return n(e,t),e.prototype.field=function(t){return this.Vt.field(t)},e.prototype.data=function(){return this.Vt},e.prototype.vt=function(){return this.Vt.proto},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.bt===t.bt&&this.hasCommittedMutations===t.hasCommittedMutations&&this.Vt.isEqual(t.Vt)},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.Vt.toString()+", {hasLocalMutations: "+this.bt+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.bt||this.hasCommittedMutations},enumerable:!1,configurable:!0}),e}(go),wo=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n)||this).hasCommittedMutations=!(!r||!r.hasCommittedMutations),i}return n(e,t),e.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(go),Io=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(go),To=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.St=null};function Eo(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new To(t,e,n,r,i,o,s)}function _o(t){var e=fi(t);if(null===e.St){var n=e.path.ot();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((function(t){return function(t){return t.field.ot()+t.op.toString()+so(t.value)}(t)})).join(","),n+="|ob:",n+=e.orderBy.map((function(t){return function(t){return t.field.ot()+t.dir}(t)})).join(","),Qi(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=Uo(e.startAt)),e.endAt&&(n+="|ub:",n+=Uo(e.endAt)),e.St=n}return e.St}function So(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!Vo(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if(i=t.filters[r],o=e.filters[r],i.op!==o.op||!i.field.isEqual(o.field)||!no(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!qo(t.startAt,e.startAt)&&qo(t.endAt,e.endAt)}function Ao(t){return Fi.Et(t.path)&&null===t.collectionGroup&&0===t.filters.length}var No=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return n(e,t),e.create=function(t,n,r){return t.ht()?"in"===n||"not-in"===n?this.Dt(t,n,r):new ko(t,n,r):"array-contains"===n?new Po(t,r):"in"===n?new xo(t,r):"not-in"===n?new Lo(t,r):"array-contains-any"===n?new Ro(t,r):new e(t,n,r)},e.Dt=function(t,e,n){return"in"===e?new Do(t,n):new Oo(t,n)},e.prototype.matches=function(t){var e=t.field(this.field);return"!="===this.op?null!==e&&this.Ct(io(e,this.value)):null!==e&&eo(this.value)===eo(e)&&this.Ct(io(e,this.value))},e.prototype.Ct=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return ci()}},e.prototype.xt=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}((function(){})),ko=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=Fi.dt(r.referenceValue),i}return n(e,t),e.prototype.matches=function(t){var e=Fi.J(t.key,this.key);return this.Ct(e)},e}(No),Do=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=Co(0,n),r}return n(e,t),e.prototype.matches=function(t){return this.keys.some((function(e){return e.isEqual(t.key)}))},e}(No),Oo=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=Co(0,n),r}return n(e,t),e.prototype.matches=function(t){return!this.keys.some((function(e){return e.isEqual(t.key)}))},e}(No);function Co(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(t){return Fi.dt(t.referenceValue)}))}var Po=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return n(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return ho(e)&&ro(e.arrayValue,this.value)},e}(No),xo=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return n(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&ro(this.value.arrayValue,e)},e}(No),Lo=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return n(e,t),e.prototype.matches=function(t){if(ro(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.field(this.field);return null!==e&&!ro(this.value.arrayValue,e)},e}(No),Ro=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return n(e,t),e.prototype.matches=function(t){var e=this,n=t.field(this.field);return!(!ho(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(t){return ro(e.value.arrayValue,t)}))},e}(No),Mo=function(t,e){this.position=t,this.before=e};function Uo(t){return(t.before?"b":"a")+":"+t.position.map((function(t){return so(t)})).join(",")}var jo=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function Vo(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function Fo(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.ht()?Fi.J(Fi.dt(s.referenceValue),n.key):io(s,n.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function qo(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!no(t.position[n],e.position[n]))return!1;return!0}var Ho=function(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.Nt=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.Ft=null,this.Ot=null,this.startAt,this.endAt};function Bo(t,e,n,r,i,o,s,a){return new Ho(t,e,n,r,i,o,s,a)}function Go(t){return new Ho(t)}function zo(t){return!Qi(t.limit)&&"F"===t.limitType}function Ko(t){return!Qi(t.limit)&&"L"===t.limitType}function Wo(t){return t.Nt.length>0?t.Nt[0].field:null}function Jo(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.xt())return r.field}return null}function Xo(t){return null!==t.collectionGroup}function Yo(t){var e=fi(t);if(null===e.Ft){e.Ft=[];var n=Jo(e),r=Wo(e);if(null!==n&&null===r)n.ht()||e.Ft.push(new jo(n)),e.Ft.push(new jo(Vi.lt(),"asc"));else{for(var i=!1,o=0,s=e.Nt;o<s.length;o++){var a=s[o];e.Ft.push(a),a.field.ht()&&(i=!0)}if(!i){var u=e.Nt.length>0?e.Nt[e.Nt.length-1].dir:"asc";e.Ft.push(new jo(Vi.lt(),u))}}}return e.Ft}function $o(t){var e=fi(t);if(!e.Ot)if("F"===e.limitType)e.Ot=Eo(e.path,e.collectionGroup,Yo(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=Yo(e);r<i.length;r++){var o=i[r],s="desc"===o.dir?"asc":"desc";n.push(new jo(o.field,s))}var a=e.endAt?new Mo(e.endAt.position,!e.endAt.before):null,u=e.startAt?new Mo(e.startAt.position,!e.startAt.before):null;e.Ot=Eo(e.path,e.collectionGroup,n,e.filters,e.limit,a,u)}return e.Ot}function Qo(t,e,n){return new Ho(t.path,t.collectionGroup,t.Nt.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Zo(t,e){return So($o(t),$o(e))&&t.limitType===e.limitType}function ts(t){return _o($o(t))+"|lt:"+t.limitType}function es(t){return"Query(target="+function(t){var e=t.path.ot();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map((function(t){return(e=t).field.ot()+" "+e.op+" "+so(e.value);var e})).join(", ")+"]"),Qi(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map((function(t){return function(t){return t.field.ot()+" ("+t.dir+")"}(t)})).join(", ")+"]"),t.startAt&&(e+=", startAt: "+Uo(t.startAt)),t.endAt&&(e+=", endAt: "+Uo(t.endAt)),"Target("+e+")"}($o(t))+"; limitType="+t.limitType+")"}function ns(t,e){return function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.wt(t.collectionGroup)&&t.path.st(n):Fi.Et(t.path)?t.path.isEqual(n):t.path.it(n)}(t,e)&&function(t,e){for(var n=0,r=t.Nt;n<r.length;n++){var i=r[n];if(!i.field.ht()&&null===e.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!Fo(t.startAt,Yo(t),e)||t.endAt&&Fo(t.endAt,Yo(t),e))}(t,e)}function rs(t){return function(e,n){for(var r=!1,i=0,o=Yo(t);i<o.length;i++){var s=o[i],a=is(s,e,n);if(0!==a)return a;r=r||s.field.ht()}return 0}}function is(t,e,n){var r=t.field.ht()?Fi.J(e.key,n.key):function(t,e,n){var r=e.field(t),i=n.field(t);return null!==r&&null!==i?io(r,i):ci()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ci()}}var os=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=Ri.min()),void 0===o&&(o=Ri.min()),void 0===s&&(s=yi.h),this.target=t,this.targetId=e,this.kt=n,this.sequenceNumber=r,this.Mt=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.Lt=function(e){return new t(this.target,this.targetId,this.kt,e,this.Mt,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.$t=function(e,n){return new t(this.target,this.targetId,this.kt,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.Bt=function(e){return new t(this.target,this.targetId,this.kt,this.sequenceNumber,this.Mt,e,this.resumeToken)},t}();function ss(t,e){if(t.qt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Zi(e)?"-0":e}}function as(t){return{integerValue:""+t}}function us(t,e){return to(e)?as(e):ss(t,e)}var cs=function(){this.Ut=void 0};function hs(t,e,n){return t instanceof ds?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof ps?vs(t,e):t instanceof ms?ys(t,e):function(t,e){var n=ls(t,e),r=bs(n)+bs(t.Qt);return co(n)&&co(t.Qt)?as(r):ss(t.Kt,r)}(t,e)}function fs(t,e,n){return t instanceof ps?vs(t,e):t instanceof ms?ys(t,e):n}function ls(t,e){return t instanceof gs?co(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var ds=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e}(cs),ps=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return n(e,t),e}(cs);function vs(t,e){for(var n=ws(e),r=function(t){n.some((function(e){return no(e,t)}))||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var ms=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return n(e,t),e}(cs);function ys(t,e){for(var n=ws(e),r=function(t){n=n.filter((function(e){return!no(e,t)}))},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var gs=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Kt=e,r.Qt=n,r}return n(e,t),e}(cs);function bs(t){return Wi(t.integerValue||t.doubleValue)}function ws(t){return ho(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var Is=function(t,e){this.field=t,this.transform=e},Ts=function(t,e){this.version=t,this.transformResults=e},Es=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.Wt=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"jt",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function _s(t,e){return void 0!==t.updateTime?e instanceof bo&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e instanceof bo}var Ss=function(){};function As(t,e,n){return t instanceof Cs?function(t,e,n){var r=t.value;if(n.transformResults){var i=Ls(t.fieldTransforms,e,n.transformResults);r=Ms(t.fieldTransforms,r,i)}return new bo(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):t instanceof Ps?function(t,e,n){if(!_s(t.Gt,e))return new Io(t.key,n.version);var r=xs(t,e,n.transformResults?Ls(t.fieldTransforms,e,n.transformResults):[]);return new bo(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):function(t,e,n){return new wo(t.key,n.version,{hasCommittedMutations:!0})}(t,0,n)}function Ns(t,e,n,r){return t instanceof Cs?function(t,e,n,r){if(!_s(t.Gt,e))return e;var i=t.value;if(t.fieldTransforms){var o=Rs(t.fieldTransforms,n,e,r);i=Ms(t.fieldTransforms,i,o)}var s=Os(e);return new bo(t.key,s,i,{bt:!0})}(t,e,r,n):t instanceof Ps?function(t,e,n,r){if(!_s(t.Gt,e))return e;var i=Os(e),o=xs(t,e,Rs(t.fieldTransforms,n,e,r));return new bo(t.key,i,o,{bt:!0})}(t,e,r,n):function(t,e){return _s(t.Gt,e)?new wo(t.key,Ri.min()):e}(t,e)}function ks(t,e){return void 0!==t.fieldTransforms?function(t,e){for(var n=null,r=0,i=t;r<i.length;r++){var o=i[r],s=e instanceof bo?e.field(o.field):void 0,a=ls(o.transform,s||null);null!=a&&(n=null==n?(new mo).set(o.field,a):n.set(o.field,a))}return n?n.yt():null}(t.fieldTransforms,e):null}function Ds(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.Gt.isEqual(e.Gt)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&vi(t,e,(function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof ps&&e instanceof ps||t instanceof ms&&e instanceof ms?vi(t.elements,e.elements,no):t instanceof gs&&e instanceof gs?no(t.Qt,e.Qt):t instanceof ds&&e instanceof ds}(t.transform,e.transform)}(t,e)}))}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.zt.isEqual(e.zt))}function Os(t){return t instanceof bo?t.version:Ri.min()}var Cs=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.Gt=r,o.fieldTransforms=i,o.type=0,o}return n(e,t),e}(Ss),Ps=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var s=this;return(s=t.call(this)||this).key=e,s.data=n,s.zt=r,s.Gt=i,s.fieldTransforms=o,s.type=1,s}return n(e,t),e}(Ss);function xs(t,e,n){var r;return r=function(t,e){var n=new mo(e);return t.zt.fields.forEach((function(e){if(!e.nt()){var r=t.data.field(e);null!==r?n.set(e,r):n.delete(e)}})),n.yt()}(t,r=e instanceof bo?e.data():vo.empty()),Ms(t.fieldTransforms,r,n)}function Ls(t,e,n){var r=[];hi(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,a=null;e instanceof bo&&(a=e.field(o.field)),r.push(fs(s,a,n[i]))}return r}function Rs(t,e,n,r){for(var i=[],o=0,s=t;o<s.length;o++){var a=s[o],u=a.transform,c=null;n instanceof bo&&(c=n.field(a.field)),null===c&&r instanceof bo&&(c=r.field(a.field)),i.push(hs(u,c,e))}return i}function Ms(t,e,n){for(var r=new mo(e),i=0;i<t.length;i++){var o=t[i];r.set(o.field,n[i])}return r.yt()}var Us,js,Vs=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.Gt=n,r.type=2,r.fieldTransforms=[],r}return n(e,t),e}(Ss),Fs=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.Gt=n,r.type=3,r.fieldTransforms=[],r}return n(e,t),e}(Ss),qs=function(t){this.count=t};function Hs(t){switch(t){case gi.OK:return ci();case gi.CANCELLED:case gi.UNKNOWN:case gi.DEADLINE_EXCEEDED:case gi.RESOURCE_EXHAUSTED:case gi.INTERNAL:case gi.UNAVAILABLE:case gi.UNAUTHENTICATED:return!1;case gi.INVALID_ARGUMENT:case gi.NOT_FOUND:case gi.ALREADY_EXISTS:case gi.PERMISSION_DENIED:case gi.FAILED_PRECONDITION:case gi.ABORTED:case gi.OUT_OF_RANGE:case gi.UNIMPLEMENTED:case gi.DATA_LOSS:return!0;default:return ci()}}function Bs(t){if(void 0===t)return si("GRPC error has no .code"),gi.UNKNOWN;switch(t){case Us.OK:return gi.OK;case Us.CANCELLED:return gi.CANCELLED;case Us.UNKNOWN:return gi.UNKNOWN;case Us.DEADLINE_EXCEEDED:return gi.DEADLINE_EXCEEDED;case Us.RESOURCE_EXHAUSTED:return gi.RESOURCE_EXHAUSTED;case Us.INTERNAL:return gi.INTERNAL;case Us.UNAVAILABLE:return gi.UNAVAILABLE;case Us.UNAUTHENTICATED:return gi.UNAUTHENTICATED;case Us.INVALID_ARGUMENT:return gi.INVALID_ARGUMENT;case Us.NOT_FOUND:return gi.NOT_FOUND;case Us.ALREADY_EXISTS:return gi.ALREADY_EXISTS;case Us.PERMISSION_DENIED:return gi.PERMISSION_DENIED;case Us.FAILED_PRECONDITION:return gi.FAILED_PRECONDITION;case Us.ABORTED:return gi.ABORTED;case Us.OUT_OF_RANGE:return gi.OUT_OF_RANGE;case Us.UNIMPLEMENTED:return gi.UNIMPLEMENTED;case Us.DATA_LOSS:return gi.DATA_LOSS;default:return ci()}}(js=Us||(Us={}))[js.OK=0]="OK",js[js.CANCELLED=1]="CANCELLED",js[js.UNKNOWN=2]="UNKNOWN",js[js.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",js[js.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",js[js.NOT_FOUND=5]="NOT_FOUND",js[js.ALREADY_EXISTS=6]="ALREADY_EXISTS",js[js.PERMISSION_DENIED=7]="PERMISSION_DENIED",js[js.UNAUTHENTICATED=16]="UNAUTHENTICATED",js[js.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",js[js.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",js[js.ABORTED=10]="ABORTED",js[js.OUT_OF_RANGE=11]="OUT_OF_RANGE",js[js.UNIMPLEMENTED=12]="UNIMPLEMENTED",js[js.INTERNAL=13]="INTERNAL",js[js.UNAVAILABLE=14]="UNAVAILABLE",js[js.DATA_LOSS=15]="DATA_LOSS";var Gs=function(){function t(t,e){this.J=t,this.root=e||Ks.EMPTY}return t.prototype.Ht=function(e,n){return new t(this.J,this.root.Ht(e,n,this.J).copy(null,null,Ks.Jt,null,null))},t.prototype.remove=function(e){return new t(this.J,this.root.remove(e,this.J).copy(null,null,Ks.Jt,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.nt();){var n=this.J(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.nt();){var r=this.J(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.nt=function(){return this.root.nt()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.Yt=function(){return this.root.Yt()},t.prototype.Xt=function(){return this.root.Xt()},t.prototype.Zt=function(t){return this.root.Zt(t)},t.prototype.forEach=function(t){this.Zt((function(e,n){return t(e,n),!1}))},t.prototype.toString=function(){var t=[];return this.Zt((function(e,n){return t.push(e+":"+n),!1})),"{"+t.join(", ")+"}"},t.prototype.te=function(t){return this.root.te(t)},t.prototype.ee=function(){return new zs(this.root,null,this.J,!1)},t.prototype.ne=function(t){return new zs(this.root,t,this.J,!1)},t.prototype.se=function(){return new zs(this.root,null,this.J,!0)},t.prototype.ie=function(t){return new zs(this.root,t,this.J,!0)},t}(),zs=function(){function t(t,e,n,r){this.re=r,this.oe=[];for(var i=1;!t.nt();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.re?t.left:t.right;else{if(0===i){this.oe.push(t);break}this.oe.push(t),t=this.re?t.right:t.left}}return t.prototype.ce=function(){var t=this.oe.pop(),e={key:t.key,value:t.value};if(this.re)for(t=t.left;!t.nt();)this.oe.push(t),t=t.right;else for(t=t.right;!t.nt();)this.oe.push(t),t=t.left;return e},t.prototype.ae=function(){return this.oe.length>0},t.prototype.ue=function(){if(0===this.oe.length)return null;var t=this.oe[this.oe.length-1];return{key:t.key,value:t.value}},t}(),Ks=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.nt=function(){return!1},t.prototype.Zt=function(t){return this.left.Zt(t)||t(this.key,this.value)||this.right.Zt(t)},t.prototype.te=function(t){return this.right.te(t)||t(this.key,this.value)||this.left.te(t)},t.prototype.min=function(){return this.left.nt()?this:this.left.min()},t.prototype.Yt=function(){return this.min().key},t.prototype.Xt=function(){return this.right.nt()?this.key:this.right.Xt()},t.prototype.Ht=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.Ht(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.Ht(t,e,n))).he()},t.prototype.le=function(){if(this.left.nt())return t.EMPTY;var e=this;return e.left._e()||e.left.left._e()||(e=e.fe()),(e=e.copy(null,null,null,e.left.le(),null)).he()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.nt()||i.left._e()||i.left.left._e()||(i=i.fe()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left._e()&&(i=i.de()),i.right.nt()||i.right._e()||i.right.left._e()||(i=i.we()),0===n(e,i.key)){if(i.right.nt())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.le())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.he()},t.prototype._e=function(){return this.color},t.prototype.he=function(){var t=this;return t.right._e()&&!t.left._e()&&(t=t.Ee()),t.left._e()&&t.left.left._e()&&(t=t.de()),t.left._e()&&t.right._e()&&(t=t.Te()),t},t.prototype.fe=function(){var t=this.Te();return t.right.left._e()&&(t=(t=(t=t.copy(null,null,null,null,t.right.de())).Ee()).Te()),t},t.prototype.we=function(){var t=this.Te();return t.left.left._e()&&(t=(t=t.de()).Te()),t},t.prototype.Ee=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.de=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.Te=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.Ie=function(){var t=this.me();return Math.pow(2,t)<=this.size+1},t.prototype.me=function(){if(this._e()&&this.left._e())throw ci();if(this.right._e())throw ci();var t=this.left.me();if(t!==this.right.me())throw ci();return t+(this._e()?0:1)},t}();Ks.EMPTY=null,Ks.RED=!0,Ks.Jt=!1,Ks.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw ci()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw ci()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw ci()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw ci()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw ci()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.Ht=function(t,e,n){return new Ks(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.nt=function(){return!0},t.prototype.Zt=function(t){return!1},t.prototype.te=function(t){return!1},t.prototype.Yt=function(){return null},t.prototype.Xt=function(){return null},t.prototype._e=function(){return!1},t.prototype.Ie=function(){return!0},t.prototype.me=function(){return 0},t}());var Ws=function(){function t(t){this.J=t,this.data=new Gs(this.J)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.Yt()},t.prototype.last=function(){return this.data.Xt()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.Zt((function(e,n){return t(e),!1}))},t.prototype.Ae=function(t,e){for(var n=this.data.ne(t[0]);n.ae();){var r=n.ce();if(this.J(r.key,t[1])>=0)return;e(r.key)}},t.prototype.Re=function(t,e){var n;for(n=void 0!==e?this.data.ne(e):this.data.ee();n.ae();)if(!t(n.ce().key))return},t.prototype.Pe=function(t){var e=this.data.ne(t);return e.ae()?e.ce().key:null},t.prototype.ee=function(){return new Js(this.data.ee())},t.prototype.ne=function(t){return new Js(this.data.ne(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).Ht(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.nt=function(){return this.data.nt()},t.prototype.ye=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach((function(t){e=e.add(t)})),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.ee(),r=e.data.ee();n.ae();){var i=n.ce().key,o=r.ce().key;if(0!==this.J(i,o))return!1}return!0},t.prototype.rt=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},t.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.J);return n.data=e,n},t}(),Js=function(){function t(t){this.ge=t}return t.prototype.ce=function(){return this.ge.ce().key},t.prototype.ae=function(){return this.ge.ae()},t}(),Xs=new Gs(Fi.J);function Ys(){return Xs}function $s(){return Ys()}var Qs=new Gs(Fi.J);function Zs(){return Qs}var ta=new Gs(Fi.J);function ea(){return ta}var na=new Ws(Fi.J);function ra(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=na,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var ia=new Ws(pi);function oa(){return ia}var sa=function(){function t(t){this.J=t?function(e,n){return t(e,n)||Fi.J(e.key,n.key)}:function(t,e){return Fi.J(t.key,e.key)},this.Ve=Zs(),this.pe=new Gs(this.J)}return t.be=function(e){return new t(e.J)},t.prototype.has=function(t){return null!=this.Ve.get(t)},t.prototype.get=function(t){return this.Ve.get(t)},t.prototype.first=function(){return this.pe.Yt()},t.prototype.last=function(){return this.pe.Xt()},t.prototype.nt=function(){return this.pe.nt()},t.prototype.indexOf=function(t){var e=this.Ve.get(t);return e?this.pe.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.pe.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.pe.Zt((function(e,n){return t(e),!1}))},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.Ve.Ht(t.key,t),e.pe.Ht(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.Ve.remove(t),this.pe.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.pe.ee(),r=e.pe.ee();n.ae();){var i=n.ce().key,o=r.ce().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.J=this.J,r.Ve=e,r.pe=n,r},t}(),aa=function(){function t(){this.ve=new Gs(Fi.J)}return t.prototype.track=function(t){var e=t.doc.key,n=this.ve.get(e);n?0!==t.type&&3===n.type?this.ve=this.ve.Ht(e,t):3===t.type&&1!==n.type?this.ve=this.ve.Ht(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.ve=this.ve.Ht(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.ve=this.ve.Ht(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.ve=this.ve.remove(e):1===t.type&&2===n.type?this.ve=this.ve.Ht(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.ve=this.ve.Ht(e,{type:2,doc:t.doc}):ci():this.ve=this.ve.Ht(e,t)},t.prototype.Se=function(){var t=[];return this.ve.Zt((function(e,n){t.push(n)})),t},t}(),ua=function(){function t(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.De=n,this.docChanges=r,this.Ce=i,this.fromCache=o,this.xe=s,this.Ne=a}return t.Fe=function(e,n,r,i){var o=[];return n.forEach((function(t){o.push({type:0,doc:t})})),new t(e,n,sa.be(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.Ce.nt()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.xe===t.xe&&this.Ce.isEqual(t.Ce)&&Zo(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.De.isEqual(t.De)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),ca=function(){function t(t,e,n,r,i){this.Mt=t,this.Oe=e,this.ke=n,this.Me=r,this.Le=i}return t.$e=function(e,n){var r=new Map;return r.set(e,ha.Be(e,n)),new t(Ri.min(),r,oa(),Ys(),ra())},t}(),ha=function(){function t(t,e,n,r,i){this.resumeToken=t,this.qe=e,this.Ue=n,this.Qe=r,this.Ke=i}return t.Be=function(e,n){return new t(yi.h,n,ra(),ra(),ra())},t}(),fa=function(t,e,n,r){this.We=t,this.removedTargetIds=e,this.key=n,this.je=r},la=function(t,e){this.targetId=t,this.Ge=e},da=function(t,e,n,r){void 0===n&&(n=yi.h),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},pa=function(){function t(){this.ze=0,this.He=ya(),this.Je=yi.h,this.Ye=!1,this.Xe=!0}return Object.defineProperty(t.prototype,"qe",{get:function(){return this.Ye},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.Je},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Ze",{get:function(){return 0!==this.ze},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tn",{get:function(){return this.Xe},enumerable:!1,configurable:!0}),t.prototype.en=function(t){t.o()>0&&(this.Xe=!0,this.Je=t)},t.prototype.nn=function(){var t=ra(),e=ra(),n=ra();return this.He.forEach((function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:ci()}})),new ha(this.Je,this.Ye,t,e,n)},t.prototype.sn=function(){this.Xe=!1,this.He=ya()},t.prototype.rn=function(t,e){this.Xe=!0,this.He=this.He.Ht(t,e)},t.prototype.on=function(t){this.Xe=!0,this.He=this.He.remove(t)},t.prototype.cn=function(){this.ze+=1},t.prototype.an=function(){this.ze-=1},t.prototype.un=function(){this.Xe=!0,this.Ye=!0},t}(),va=function(){function t(t){this.hn=t,this.ln=new Map,this._n=Ys(),this.fn=ma(),this.dn=new Ws(pi)}return t.prototype.wn=function(t){for(var e=0,n=t.We;e<n.length;e++){var r=n[e];t.je instanceof bo?this.En(r,t.je):t.je instanceof wo&&this.Tn(r,t.key,t.je)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)r=o[i],this.Tn(r,t.key,t.je)},t.prototype.In=function(t){var e=this;this.mn(t,(function(n){var r=e.An(n);switch(t.state){case 0:e.Rn(n)&&r.en(t.resumeToken);break;case 1:r.an(),r.Ze||r.sn(),r.en(t.resumeToken);break;case 2:r.an(),r.Ze||e.removeTarget(n);break;case 3:e.Rn(n)&&(r.un(),r.en(t.resumeToken));break;case 4:e.Rn(n)&&(e.Pn(n),r.en(t.resumeToken));break;default:ci()}}))},t.prototype.mn=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.ln.forEach((function(t,r){n.Rn(r)&&e(r)}))},t.prototype.yn=function(t){var e=t.targetId,n=t.Ge.count,r=this.gn(e);if(r){var i=r.target;if(Ao(i))if(0===n){var o=new Fi(i.path);this.Tn(e,o,new wo(o,Ri.min()))}else hi(1===n);else this.Vn(e)!==n&&(this.Pn(e),this.dn=this.dn.add(e))}},t.prototype.pn=function(t){var e=this,n=new Map;this.ln.forEach((function(r,i){var o=e.gn(i);if(o){if(r.qe&&Ao(o.target)){var s=new Fi(o.target.path);null!==e._n.get(s)||e.bn(i,s)||e.Tn(i,s,new wo(s,t))}r.tn&&(n.set(i,r.nn()),r.sn())}}));var r=ra();this.fn.forEach((function(t,n){var i=!0;n.Re((function(t){var n=e.gn(t);return!n||2===n.kt||(i=!1,!1)})),i&&(r=r.add(t))}));var i=new ca(t,n,this.dn,this._n,r);return this._n=Ys(),this.fn=ma(),this.dn=new Ws(pi),i},t.prototype.En=function(t,e){if(this.Rn(t)){var n=this.bn(t,e.key)?2:0;this.An(t).rn(e.key,n),this._n=this._n.Ht(e.key,e),this.fn=this.fn.Ht(e.key,this.vn(e.key).add(t))}},t.prototype.Tn=function(t,e,n){if(this.Rn(t)){var r=this.An(t);this.bn(t,e)?r.rn(e,1):r.on(e),this.fn=this.fn.Ht(e,this.vn(e).delete(t)),n&&(this._n=this._n.Ht(e,n))}},t.prototype.removeTarget=function(t){this.ln.delete(t)},t.prototype.Vn=function(t){var e=this.An(t).nn();return this.hn.Sn(t).size+e.Ue.size-e.Ke.size},t.prototype.cn=function(t){this.An(t).cn()},t.prototype.An=function(t){var e=this.ln.get(t);return e||(e=new pa,this.ln.set(t,e)),e},t.prototype.vn=function(t){var e=this.fn.get(t);return e||(e=new Ws(pi),this.fn=this.fn.Ht(t,e)),e},t.prototype.Rn=function(t){var e=null!==this.gn(t);return e||oi("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.gn=function(t){var e=this.ln.get(t);return e&&e.Ze?null:this.hn.Dn(t)},t.prototype.Pn=function(t){var e=this;this.ln.set(t,new pa),this.hn.Sn(t).forEach((function(n){e.Tn(t,n,null)}))},t.prototype.bn=function(t,e){return this.hn.Sn(t).has(e)},t}();function ma(){return new Gs(Fi.J)}function ya(){return new Gs(Fi.J)}var ga={asc:"ASCENDING",desc:"DESCENDING"},ba={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},wa=function(t,e){this.T=t,this.qt=e};function Ia(t,e){return t.qt?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function Ta(t,e){return t.qt?e.toBase64():e.toUint8Array()}function Ea(t,e){return Ia(t,e.G())}function _a(t){return hi(!!t),Ri.W(function(t){var e=Ki(t);return new Li(e.seconds,e.nanos)}(t))}function Sa(t,e){return function(t){return new Ui(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).ot()}function Aa(t){var e=Ui.ct(t);return hi(Ya(e)),e}function Na(t,e){return Sa(t.T,e.path)}function ka(t,e){var n=Aa(e);if(n.get(1)!==t.T.projectId)throw new bi(gi.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.T.projectId);if(n.get(3)!==t.T.database)throw new bi(gi.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.T.database);return new Fi(Pa(n))}function Da(t,e){return Sa(t.T,e)}function Oa(t){var e=Aa(t);return 4===e.length?Ui.at():Pa(e)}function Ca(t){return new Ui(["projects",t.T.projectId,"databases",t.T.database]).ot()}function Pa(t){return hi(t.length>4&&"documents"===t.get(4)),t.X(5)}function xa(t,e,n){return{name:Na(t,e),fields:n.proto.mapValue.fields}}function La(t,e,n){var r=ka(t,e.name),i=_a(e.updateTime),o=new vo({mapValue:{fields:e.fields}});return new bo(r,i,o,{hasCommittedMutations:!!n})}function Ra(t,e){var n;if(e instanceof Cs)n={update:xa(t,e.key,e.value)};else if(e instanceof Vs)n={delete:Na(t,e.key)};else if(e instanceof Ps)n={update:xa(t,e.key,e.data),updateMask:Xa(e.zt)};else{if(!(e instanceof Fs))return ci();n={verify:Na(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((function(t){return function(t,e){var n=e.transform;if(n instanceof ds)return{fieldPath:e.field.ot(),setToServerValue:"REQUEST_TIME"};if(n instanceof ps)return{fieldPath:e.field.ot(),appendMissingElements:{values:n.elements}};if(n instanceof ms)return{fieldPath:e.field.ot(),removeAllFromArray:{values:n.elements}};if(n instanceof gs)return{fieldPath:e.field.ot(),increment:n.Qt};throw ci()}(0,t)}))),e.Gt.jt||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:Ea(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:ci()}(t,e.Gt)),n}function Ma(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?Es.updateTime(_a(t.updateTime)):void 0!==t.exists?Es.exists(t.exists):Es.Wt()}(e.currentDocument):Es.Wt(),r=e.updateTransforms?e.updateTransforms.map((function(e){return function(t,e){var n=null;if("setToServerValue"in e)hi("REQUEST_TIME"===e.setToServerValue),n=new ds;else if("appendMissingElements"in e){var r=e.appendMissingElements.values||[];n=new ps(r)}else if("removeAllFromArray"in e){var i=e.removeAllFromArray.values||[];n=new ms(i)}else"increment"in e?n=new gs(t,e.increment):ci();var o=Vi._t(e.fieldPath);return new Is(o,n)}(t,e)})):[];if(e.update){e.update.name;var i=ka(t,e.update.name),o=new vo({mapValue:{fields:e.update.fields}});if(e.updateMask){var s=function(t){var e=t.fieldPaths||[];return new Gi(e.map((function(t){return Vi._t(t)})))}(e.updateMask);return new Ps(i,o,s,n,r)}return new Cs(i,o,n,r)}if(e.delete){var a=ka(t,e.delete);return new Vs(a,n)}if(e.verify){var u=ka(t,e.verify);return new Fs(u,n)}return ci()}function Ua(t,e){return{documents:[Da(t,e.path)]}}function ja(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=Da(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Da(t,r.Z()),n.structuredQuery.from=[{collectionId:r.et()}]);var i=function(t){if(0!==t.length){var e=t.map((function(t){return function(t){if("=="===t.op){if(lo(t.value))return{unaryFilter:{field:za(t.field),op:"IS_NAN"}};if(fo(t.value))return{unaryFilter:{field:za(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(lo(t.value))return{unaryFilter:{field:za(t.field),op:"IS_NOT_NAN"}};if(fo(t.value))return{unaryFilter:{field:za(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:za(t.field),op:Ga(t.op),value:t.value}}}(t)}));return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map((function(t){return function(t){return{field:za(t.field),direction:Ba(t.dir)}}(t)}))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s=function(t,e){return t.qt||Qi(e)?e:{value:e}}(t,e.limit);return null!==s&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=qa(e.startAt)),e.endAt&&(n.structuredQuery.endAt=qa(e.endAt)),n}function Va(t){var e=Oa(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){hi(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=Fa(n.where));var a=[];n.orderBy&&(a=n.orderBy.map((function(t){return function(t){return new jo(Ka(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)})));var u=null;n.limit&&(u=function(t){var e;return Qi(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=Ha(n.startAt));var h=null;return n.endAt&&(h=Ha(n.endAt)),Bo(e,i,a,s,u,"F",c,h)}function Fa(t){return t?void 0!==t.unaryFilter?[Ja(t)]:void 0!==t.fieldFilter?[Wa(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map((function(t){return Fa(t)})).reduce((function(t,e){return t.concat(e)})):ci():[]}function qa(t){return{before:t.before,values:t.position}}function Ha(t){var e=!!t.before,n=t.values||[];return new Mo(n,e)}function Ba(t){return ga[t]}function Ga(t){return ba[t]}function za(t){return{fieldPath:t.ot()}}function Ka(t){return Vi._t(t.fieldPath)}function Wa(t){return No.create(Ka(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return ci()}}(t.fieldFilter.op),t.fieldFilter.value)}function Ja(t){switch(t.unaryFilter.op){case"IS_NAN":var e=Ka(t.unaryFilter.field);return No.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=Ka(t.unaryFilter.field);return No.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Ka(t.unaryFilter.field);return No.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Ka(t.unaryFilter.field);return No.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return ci()}}function Xa(t){var e=[];return t.fields.forEach((function(t){return e.push(t.ot())})),{fieldPaths:e}}function Ya(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}var $a=function(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))},Qa=function(){function t(t){var e=this;this.Cn=null,this.xn=null,this.result=void 0,this.error=void 0,this.Nn=!1,this.Fn=!1,t((function(t){e.Nn=!0,e.result=t,e.Cn&&e.Cn(t)}),(function(t){e.Nn=!0,e.error=t,e.xn&&e.xn(t)}))}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.Fn&&ci(),this.Fn=!0,this.Nn?this.error?this.On(n,this.error):this.kn(e,this.result):new t((function(t,i){r.Cn=function(n){r.kn(e,n).next(t,i)},r.xn=function(e){r.On(n,e).next(t,i)}}))},t.prototype.Mn=function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))},t.prototype.Ln=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.kn=function(e,n){return e?this.Ln((function(){return e(n)})):t.resolve(n)},t.prototype.On=function(e,n){return e?this.Ln((function(){return e(n)})):t.reject(n)},t.resolve=function(e){return new t((function(t,n){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.$n=function(e){return new t((function(t,n){var r=0,i=0,o=!1;e.forEach((function(e){++r,e.next((function(){++i,o&&i===r&&t()}),(function(t){return n(t)}))})),o=!0,i===r&&t()}))},t.Bn=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next((function(n){return n?t.resolve(n):e()}))},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach((function(t,i){r.push(e.call(n,t,i))})),this.$n(r)},t}(),Za=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.qn=new $a,this.transaction.oncomplete=function(){n.qn.resolve()},this.transaction.onabort=function(){e.error?n.qn.reject(new nu(t,e.error)):n.qn.resolve()},this.transaction.onerror=function(e){var r=au(e.target.error);n.qn.reject(new nu(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new nu(n,e)}},Object.defineProperty(t.prototype,"Un",{get:function(){return this.qn.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.qn.reject(t),this.aborted||(oi("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new iu(e)},t}(),tu=function(){function t(e,n,r){this.name=e,this.version=n,this.Qn=r,12.2===t.Kn(l())&&si("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return oi("SimpleDb","Removing database:",t),ou(window.indexedDB.deleteDatabase(t)).Mn()},t.Wn=function(){if("undefined"==typeof indexedDB)return!1;if(t.jn())return!0;var e=l(),n=t.Kn(e),r=0<n&&n<10,i=t.Gn(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.jn=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.zn)},t.Hn=function(t,e){return t.store(e)},t.Kn=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.Gn=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.Jn=function(t){return i(this,void 0,void 0,(function(){var e,n=this;return o(this,(function(r){switch(r.label){case 0:return this.db?[3,2]:(oi("SimpleDb","Opening database:",this.name),e=this,[4,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new nu(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new bi(gi.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):r(new nu(t,n))},i.onupgradeneeded=function(t){oi("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion);var e=t.target.result;n.Qn.Yn(e,i.transaction,t.oldVersion,n.version).next((function(){oi("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}))]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.Xn&&(this.db.onversionchange=function(t){return n.Xn(t)}),this.db)]}}))}))},t.prototype.Zn=function(t){this.Xn=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return i(this,void 0,void 0,(function(){var i,s,a,u,c;return o(this,(function(h){switch(h.label){case 0:i="readonly"===e,s=0,a=function(){var e,a,c,h,f;return o(this,(function(o){switch(o.label){case 0:++s,o.label=1;case 1:return o.trys.push([1,4,,5]),[4,u.Jn(t)];case 2:return u.db=o.sent(),e=Za.open(u.db,t,i?"readonly":"readwrite",n),a=r(e).catch((function(t){return e.abort(t),Qa.reject(t)})).Mn(),c={},a.catch((function(){})),[4,e.Un];case 3:return[2,(c.value=(o.sent(),a),c)];case 4:return h=o.sent(),f="FirebaseError"!==h.name&&s<3,oi("SimpleDb","Transaction failed with error:",h.message,"Retrying:",f),u.close(),f?[3,5]:[2,{value:Promise.reject(h)}];case 5:return[2]}}))},u=this,h.label=1;case 1:return[5,a()];case 2:if("object"==typeof(c=h.sent()))return[2,c.value];h.label=3;case 3:return[3,1];case 4:return[2]}}))}))},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),eu=function(){function t(t){this.ts=t,this.es=!1,this.ns=null}return Object.defineProperty(t.prototype,"Nn",{get:function(){return this.es},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ss",{get:function(){return this.ns},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.ts=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.es=!0},t.prototype.rs=function(t){this.ns=t},t.prototype.delete=function(){return ou(this.ts.delete())},t}(),nu=function(t){function e(e,n){var r=this;return(r=t.call(this,gi.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return n(e,t),e}(bi);function ru(t){return"IndexedDbTransactionError"===t.name}var iu=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(oi("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(oi("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),ou(n)},t.prototype.add=function(t){return oi("SimpleDb","ADD",this.store.name,t,t),ou(this.store.add(t))},t.prototype.get=function(t){var e=this;return ou(this.store.get(t)).next((function(n){return void 0===n&&(n=null),oi("SimpleDb","GET",e.store.name,t,n),n}))},t.prototype.delete=function(t){return oi("SimpleDb","DELETE",this.store.name,t),ou(this.store.delete(t))},t.prototype.count=function(){return oi("SimpleDb","COUNT",this.store.name),ou(this.store.count())},t.prototype.os=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.cs(n,(function(t,e){r.push(e)})).next((function(){return r}))},t.prototype.us=function(t,e){oi("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.hs=!1;var r=this.cursor(n);return this.cs(r,(function(t,e,n){return n.delete()}))},t.prototype.ls=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.cs(r,e)},t.prototype._s=function(t){var e=this.cursor({});return new Qa((function(n,r){e.onerror=function(t){var e=au(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next((function(t){t?r.continue():n()})):n()}}))},t.prototype.cs=function(t,e){var n=[];return new Qa((function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new eu(i),s=e(i.primaryKey,i.value,o);if(s instanceof Qa){var a=s.catch((function(t){return o.done(),Qa.reject(t)}));n.push(a)}o.Nn?r():null===o.ss?i.continue():i.continue(o.ss)}else r()}})).next((function(){return Qa.$n(n)}))},t.prototype.options=function(t,e){var n=void 0;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.hs?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function ou(t){return new Qa((function(e,n){t.onsuccess=function(t){var n=t.target.result;e(n)},t.onerror=function(t){var e=au(t.target.error);n(e)}}))}var su=!1;function au(t){var e=tu.Kn(l());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new bi("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return su||(su=!0,setTimeout((function(){throw r}),0)),r}}return t}var uu=function(){function t(t,e,n,r,i){this.fs=t,this.ds=e,this.ws=n,this.op=r,this.Es=i,this.Ts=new $a,this.then=this.Ts.promise.then.bind(this.Ts.promise),this.Ts.promise.catch((function(t){}))}return t.Is=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.As=setTimeout((function(){return e.Rs()}),t)},t.prototype.Ps=function(){return this.Rs()},t.prototype.cancel=function(t){null!==this.As&&(this.clearTimeout(),this.Ts.reject(new bi(gi.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.Rs=function(){var t=this;this.fs.ys((function(){return null!==t.As?(t.clearTimeout(),t.op().then((function(e){return t.Ts.resolve(e)}))):Promise.resolve()}))},t.prototype.clearTimeout=function(){null!==this.As&&(this.Es(this),clearTimeout(this.As),this.As=null)},t}();function cu(t,e){if(si("AsyncQueue",e+": "+t),ru(t))return new bi(gi.UNAVAILABLE,e+": "+t);throw t}var hu=function(t,e){this.progress=t,this.gs=e},fu="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",lu=function(){function t(){this.Vs=[]}return t.prototype.ps=function(t){this.Vs.push(t)},t.prototype.bs=function(){this.Vs.forEach((function(t){return t()}))},t}();function du(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=vu(e)),e=pu(t.get(n),e);return vu(e)}function pu(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function vu(t){return t+""}function mu(t){var e=t.length;if(hi(e>=2),2===e)return hi(""===t.charAt(0)&&""===t.charAt(1)),Ui.at();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("",o);switch((s<0||s>n)&&ci(),t.charAt(s+1)){case"":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"":i+=t.substring(o,s),i+="\0";break;case"":i+=t.substring(o,s+1);break;default:ci()}o=s+2}return new Ui(r)}var yu=function(t,e){this.seconds=t,this.nanoseconds=e},gu=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};gu.store="owner",gu.key="owner";var bu=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};bu.store="mutationQueues",bu.keyPath="userId";var wu=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};wu.store="mutations",wu.keyPath="batchId",wu.userMutationsIndex="userMutationsIndex",wu.userMutationsKeyPath=["userId","batchId"];var Iu=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,du(e)]},t.key=function(t,e,n){return[t,du(e),n]},t}();Iu.store="documentMutations",Iu.PLACEHOLDER=new Iu;var Tu=function(t,e){this.path=t,this.readTime=e},Eu=function(t,e){this.path=t,this.version=e},_u=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};_u.store="remoteDocuments",_u.readTimeIndex="readTimeIndex",_u.readTimeIndexPath="readTime",_u.collectionReadTimeIndex="collectionReadTimeIndex",_u.collectionReadTimeIndexPath=["parentPath","readTime"];var Su=function(t){this.byteSize=t};Su.store="remoteDocumentGlobal",Su.key="remoteDocumentGlobalKey";var Au=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};Au.store="targets",Au.keyPath="targetId",Au.queryTargetsIndexName="queryTargetsIndex",Au.queryTargetsKeyPath=["canonicalId","targetId"];var Nu=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};Nu.store="targetDocuments",Nu.keyPath=["targetId","path"],Nu.documentTargetsIndex="documentTargetsIndex",Nu.documentTargetsKeyPath=["path","targetId"];var ku=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};ku.key="targetGlobalKey",ku.store="targetGlobal";var Du=function(t,e){this.collectionId=t,this.parent=e};Du.store="collectionParents",Du.keyPath=["collectionId","parent"];var Ou=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};Ou.store="clientMetadata",Ou.keyPath="clientId";var Cu=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};Cu.store="bundles",Cu.keyPath="bundleId";var Pu=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};Pu.store="namedQueries",Pu.keyPath="name";var xu=c(c(c(c([bu.store,wu.store,Iu.store,_u.store,Au.store,gu.store,ku.store,Nu.store],[Ou.store]),[Su.store]),[Du.store]),[Cu.store,Pu.store]),Lu=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).vs=e,r.Ss=n,r}return n(e,t),e}(lu);function Ru(t,e){var n=fi(t);return tu.Hn(n.vs,e)}var Mu=function(){function t(t,e,n,r){this.batchId=t,this.Ds=e,this.baseMutations=n,this.mutations=r}return t.prototype.Cs=function(t,e,n){for(var r=n.xs,i=0;i<this.mutations.length;i++){var o=this.mutations[i];o.key.isEqual(t)&&(e=As(o,e,r[i]))}return e},t.prototype.Ns=function(t,e){for(var n=0,r=this.baseMutations;n<r.length;n++){var i=r[n];i.key.isEqual(t)&&(e=Ns(i,e,e,this.Ds))}for(var o=e,s=0,a=this.mutations;s<a.length;s++){var u=a[s];u.key.isEqual(t)&&(e=Ns(u,e,o,this.Ds))}return e},t.prototype.Fs=function(t){var e=this,n=t;return this.mutations.forEach((function(r){var i=e.Ns(r.key,t.get(r.key));i&&(n=n.Ht(r.key,i))})),n},t.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),ra())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&vi(this.mutations,t.mutations,(function(t,e){return Ds(t,e)}))&&vi(this.baseMutations,t.baseMutations,(function(t,e){return Ds(t,e)}))},t}(),Uu=function(){function t(t,e,n,r){this.batch=t,this.Os=e,this.xs=n,this.ks=r}return t.from=function(e,n,r){hi(e.mutations.length===r.length);for(var i=ea(),o=e.mutations,s=0;s<o.length;s++)i=i.Ht(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),ju=function(t){this.Ms=t};function Vu(t,e){if(e.document)return La(t.Ms,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=Fi.Tt(e.noDocument.path),r=Gu(e.noDocument.readTime);return new wo(n,r,{hasCommittedMutations:!!e.hasCommittedMutations})}if(e.unknownDocument){var i=Fi.Tt(e.unknownDocument.path);return r=Gu(e.unknownDocument.version),new Io(i,r)}return ci()}function Fu(t,e,n){var r=qu(n),i=e.key.path.Z().rt();if(e instanceof bo){var o=function(t,e){return{name:Na(t,e.key),fields:e.vt().mapValue.fields,updateTime:Ia(t,e.version.G())}}(t.Ms,e),s=e.hasCommittedMutations;return new _u(null,null,o,s,r,i)}if(e instanceof wo){var a=e.key.path.rt(),u=Bu(e.version);return s=e.hasCommittedMutations,new _u(null,new Tu(a,u),null,s,r,i)}if(e instanceof Io){var c=e.key.path.rt(),h=Bu(e.version);return new _u(new Eu(c,h),null,null,!0,r,i)}return ci()}function qu(t){var e=t.G();return[e.seconds,e.nanoseconds]}function Hu(t){var e=new Li(t[0],t[1]);return Ri.W(e)}function Bu(t){var e=t.G();return new yu(e.seconds,e.nanoseconds)}function Gu(t){var e=new Li(t.seconds,t.nanoseconds);return Ri.W(e)}function zu(t,e){for(var n=(e.baseMutations||[]).map((function(e){return Ma(t.Ms,e)})),r=e.mutations.length-1;r>=0;--r){var i=e.mutations[r];void 0!==(null==i?void 0:i.transform)&&(e.mutations[r-1].updateTransforms=i.transform.fieldTransforms,e.mutations.splice(r,1),--r)}var o=e.mutations.map((function(e){return Ma(t.Ms,e)})),s=Li.fromMillis(e.localWriteTimeMs);return new Mu(e.batchId,s,n,o)}function Ku(t){var e,n,r=Gu(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?Gu(t.lastLimboFreeSnapshotVersion):Ri.min();return void 0!==t.query.documents?(hi(1===(n=t.query).documents.length),e=$o(Go(Oa(n.documents[0])))):e=function(t){return $o(Va(t))}(t.query),new os(e,t.targetId,0,t.lastListenSequenceNumber,r,i,yi.fromBase64String(t.resumeToken))}function Wu(t,e){var n,r=Bu(e.Mt),i=Bu(e.lastLimboFreeSnapshotVersion);n=Ao(e.target)?Ua(t.Ms,e.target):ja(t.Ms,e.target);var o=e.resumeToken.toBase64();return new Au(e.targetId,_o(e.target),r,o,e.sequenceNumber,i,n)}function Ju(t){var e=Va({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?Qo(e,e.limit,"L"):e}var Xu=function(){function t(){}return t.prototype.Ls=function(t,e){return Yu(t).get(e).next((function(t){if(t)return{id:(e=t).bundleId,createTime:Gu(e.createTime),version:e.version};var e}))},t.prototype.$s=function(t,e){return Yu(t).put({bundleId:(n=e).id,createTime:Bu(_a(n.createTime)),version:n.version});var n},t.prototype.Bs=function(t,e){return $u(t).get(e).next((function(t){if(t)return{name:(e=t).name,query:Ju(e.bundledQuery),readTime:Gu(e.readTime)};var e}))},t.prototype.qs=function(t,e){return $u(t).put(function(t){return{name:t.name,readTime:Bu(_a(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function Yu(t){return Ru(t,Cu.store)}function $u(t){return Ru(t,Pu.store)}var Qu=function(){function t(){this.Us=new Zu}return t.prototype.Qs=function(t,e){return this.Us.add(e),Qa.resolve()},t.prototype.Ks=function(t,e){return Qa.resolve(this.Us.getEntries(e))},t}(),Zu=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.et(),n=t.Z(),r=this.index[e]||new Ws(Ui.J),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.et(),n=t.Z(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new Ws(Ui.J)).rt()},t}(),tc=function(){function t(){this.Ws=new Zu}return t.prototype.Qs=function(t,e){var n=this;if(!this.Ws.has(e)){var r=e.et(),i=e.Z();t.ps((function(){n.Ws.add(e)}));var o={collectionId:r,parent:du(i)};return ec(t).put(o)}return Qa.resolve()},t.prototype.Ks=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[mi(e),""],!1,!0);return ec(t).os(r).next((function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(mu(o.parent))}return n}))},t}();function ec(t){return Ru(t,Du.store)}var nc={js:!1,Gs:0,zs:0,Hs:0},rc=function(){function t(t,e,n){this.Js=t,this.Ys=e,this.Xs=n}return t.Zs=function(e){return new t(e,t.ti,t.ei)},t}();function ic(t){return i(this,void 0,void 0,(function(){return o(this,(function(e){if(t.code!==gi.FAILED_PRECONDITION||t.message!==fu)throw t;return oi("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}rc.ti=10,rc.ei=1e3,rc.ni=new rc(41943040,rc.ti,rc.ei),rc.si=new rc(-1,0,0);var oc=function(){function t(t,e){this.ii=t,this.ri=e,this.oi={}}return t.prototype.get=function(t){var e=this.ii(t),n=this.oi[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],a=o[1];if(this.ri(s,t))return a}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.ii(t),r=this.oi[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.ri(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.oi[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.ii(t),n=this.oi[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.ri(n[r][0],t))return 1===n.length?delete this.oi[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){Hi(this.oi,(function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],a=o[1];t(s,a)}}))},t.prototype.nt=function(){return Bi(this.oi)},t}(),sc=function(){function t(){this.ci=new oc((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),this.ai=!1}return t.prototype.ui=function(t){var e=this.ci.get(t);return e?e.readTime:Ri.min()},t.prototype.hi=function(t,e){this.li(),this.ci.set(t.key,{_i:t,readTime:e})},t.prototype.fi=function(t,e){void 0===e&&(e=null),this.li(),this.ci.set(t,{_i:null,readTime:e})},t.prototype.di=function(t,e){this.li();var n=this.ci.get(e);return void 0!==n?Qa.resolve(n._i):this.wi(t,e)},t.prototype.getEntries=function(t,e){return this.Ei(t,e)},t.prototype.apply=function(t){return this.li(),this.ai=!0,this.Ti(t)},t.prototype.li=function(){},t}();function ac(t,e,n){var r=t.store(wu.store),i=t.store(Iu.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.ls({range:s},(function(t,e,n){return a++,n.delete()}));o.push(u.next((function(){hi(1===a)})));for(var c=[],h=0,f=n.mutations;h<f.length;h++){var l=f[h],d=Iu.key(e,l.key.path,n.batchId);o.push(i.delete(d)),c.push(l.key)}return Qa.$n(o).next((function(){return c}))}function uc(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw ci();e=t.noDocument}return JSON.stringify(e).length}var cc=function(){function t(t,e,n,r){this.userId=t,this.Kt=e,this.Ii=n,this.mi=r,this.Ai={}}return t.Ri=function(e,n,r,i){return hi(""!==e.uid),new t(e.A()?e.uid:"",n,r,i)},t.prototype.Pi=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return fc(t).ls({index:wu.userMutationsIndex,range:n},(function(t,n,r){e=!1,r.done()})).next((function(){return e}))},t.prototype.yi=function(t,e,n,r){var i=this,o=lc(t),s=fc(t);return s.add({}).next((function(a){hi("number"==typeof a);for(var u=new Mu(a,e,n,r),c=function(t,e,n){var r=n.baseMutations.map((function(e){return Ra(t.Ms,e)})),i=n.mutations.map((function(e){return Ra(t.Ms,e)}));return new wu(e,n.batchId,n.Ds.toMillis(),r,i)}(i.Kt,i.userId,u),h=[],f=new Ws((function(t,e){return pi(t.ot(),e.ot())})),l=0,d=r;l<d.length;l++){var p=d[l],v=Iu.key(i.userId,p.key.path,a);f=f.add(p.key.path.Z()),h.push(s.put(c)),h.push(o.put(v,Iu.PLACEHOLDER))}return f.forEach((function(e){h.push(i.Ii.Qs(t,e))})),t.ps((function(){i.Ai[a]=u.keys()})),Qa.$n(h).next((function(){return u}))}))},t.prototype.gi=function(t,e){var n=this;return fc(t).get(e).next((function(t){return t?(hi(t.userId===n.userId),zu(n.Kt,t)):null}))},t.prototype.Vi=function(t,e){var n=this;return this.Ai[e]?Qa.resolve(this.Ai[e]):this.gi(t,e).next((function(t){if(t){var r=t.keys();return n.Ai[e]=r,r}return null}))},t.prototype.pi=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return fc(t).ls({index:wu.userMutationsIndex,range:i},(function(t,e,i){e.userId===n.userId&&(hi(e.batchId>=r),o=zu(n.Kt,e)),i.done()})).next((function(){return o}))},t.prototype.bi=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return fc(t).ls({index:wu.userMutationsIndex,range:e,reverse:!0},(function(t,e,r){n=e.batchId,r.done()})).next((function(){return n}))},t.prototype.vi=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return fc(t).os(wu.userMutationsIndex,n).next((function(t){return t.map((function(t){return zu(e.Kt,t)}))}))},t.prototype.Si=function(t,e){var n=this,r=Iu.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return lc(t).ls({range:i},(function(r,i,s){var a=r[0],u=r[1],c=r[2],h=mu(u);if(a===n.userId&&e.path.isEqual(h))return fc(t).get(c).next((function(t){if(!t)throw ci();hi(t.userId===n.userId),o.push(zu(n.Kt,t))}));s.done()})).next((function(){return o}))},t.prototype.Di=function(t,e){var n=this,r=new Ws(pi),i=[];return e.forEach((function(e){var o=Iu.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),a=lc(t).ls({range:s},(function(t,i,o){var s=t[0],a=t[1],u=t[2],c=mu(a);s===n.userId&&e.path.isEqual(c)?r=r.add(u):o.done()}));i.push(a)})),Qa.$n(i).next((function(){return n.Ci(t,r)}))},t.prototype.xi=function(t,e){var n=this,r=e.path,i=r.length+1,o=Iu.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new Ws(pi);return lc(t).ls({range:s},(function(t,e,o){var s=t[0],u=t[1],c=t[2],h=mu(u);s===n.userId&&r.st(h)?h.length===i&&(a=a.add(c)):o.done()})).next((function(){return n.Ci(t,a)}))},t.prototype.Ci=function(t,e){var n=this,r=[],i=[];return e.forEach((function(e){i.push(fc(t).get(e).next((function(t){if(null===t)throw ci();hi(t.userId===n.userId),r.push(zu(n.Kt,t))})))})),Qa.$n(i).next((function(){return r}))},t.prototype.Ni=function(t,e){var n=this;return ac(t.vs,this.userId,e).next((function(r){return t.ps((function(){n.Fi(e.batchId)})),Qa.forEach(r,(function(e){return n.mi.Oi(t,e)}))}))},t.prototype.Fi=function(t){delete this.Ai[t]},t.prototype.ki=function(t){var e=this;return this.Pi(t).next((function(n){if(!n)return Qa.resolve();var r=IDBKeyRange.lowerBound(Iu.prefixForUser(e.userId)),i=[];return lc(t).ls({range:r},(function(t,n,r){if(t[0]===e.userId){var o=mu(t[1]);i.push(o)}else r.done()})).next((function(){hi(0===i.length)}))}))},t.prototype.Mi=function(t,e){return hc(t,this.userId,e)},t.prototype.Li=function(t){var e=this;return dc(t).get(this.userId).next((function(t){return t||new bu(e.userId,-1,"")}))},t}();function hc(t,e,n){var r=Iu.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return lc(t).ls({range:o,hs:!0},(function(t,n,r){var o=t[0],a=t[1];t[2],o===e&&a===i&&(s=!0),r.done()})).next((function(){return s}))}function fc(t){return Ru(t,wu.store)}function lc(t){return Ru(t,Iu.store)}function dc(t){return Ru(t,bu.store)}var pc=function(){function t(t){this.$i=t}return t.prototype.next=function(){return this.$i+=2,this.$i},t.Bi=function(){return new t(0)},t.qi=function(){return new t(-1)},t}(),vc=function(){function t(t,e){this.mi=t,this.Kt=e}return t.prototype.Ui=function(t){var e=this;return this.Qi(t).next((function(n){var r=new pc(n.highestTargetId);return n.highestTargetId=r.next(),e.Ki(t,n).next((function(){return n.highestTargetId}))}))},t.prototype.Wi=function(t){return this.Qi(t).next((function(t){return Ri.W(new Li(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},t.prototype.ji=function(t){return this.Qi(t).next((function(t){return t.highestListenSequenceNumber}))},t.prototype.Gi=function(t,e,n){var r=this;return this.Qi(t).next((function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.G()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Ki(t,i)}))},t.prototype.zi=function(t,e){var n=this;return this.Hi(t,e).next((function(){return n.Qi(t).next((function(r){return r.targetCount+=1,n.Ji(e,r),n.Ki(t,r)}))}))},t.prototype.Yi=function(t,e){return this.Hi(t,e)},t.prototype.Xi=function(t,e){var n=this;return this.Zi(t,e.targetId).next((function(){return mc(t).delete(e.targetId)})).next((function(){return n.Qi(t)})).next((function(e){return hi(e.targetCount>0),e.targetCount-=1,n.Ki(t,e)}))},t.prototype.tr=function(t,e,n){var r=this,i=0,o=[];return mc(t).ls((function(s,a){var u=Ku(a);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.Xi(t,u)))})).next((function(){return Qa.$n(o)})).next((function(){return i}))},t.prototype.mn=function(t,e){return mc(t).ls((function(t,n){var r=Ku(n);e(r)}))},t.prototype.Qi=function(t){return yc(t).get(ku.key).next((function(t){return hi(null!==t),t}))},t.prototype.Ki=function(t,e){return yc(t).put(ku.key,e)},t.prototype.Hi=function(t,e){return mc(t).put(Wu(this.Kt,e))},t.prototype.Ji=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.er=function(t){return this.Qi(t).next((function(t){return t.targetCount}))},t.prototype.nr=function(t,e){var n=_o(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return mc(t).ls({range:r,index:Au.queryTargetsIndexName},(function(t,n,r){var o=Ku(n);So(e,o.target)&&(i=o,r.done())})).next((function(){return i}))},t.prototype.sr=function(t,e,n){var r=this,i=[],o=gc(t);return e.forEach((function(e){var s=du(e.path);i.push(o.put(new Nu(n,s))),i.push(r.mi.ir(t,n,e))})),Qa.$n(i)},t.prototype.rr=function(t,e,n){var r=this,i=gc(t);return Qa.forEach(e,(function(e){var o=du(e.path);return Qa.$n([i.delete([n,o]),r.mi.cr(t,n,e)])}))},t.prototype.Zi=function(t,e){var n=gc(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.ar=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=gc(t),i=ra();return r.ls({range:n,hs:!0},(function(t,e,n){var r=mu(t[1]),o=new Fi(r);i=i.add(o)})).next((function(){return i}))},t.prototype.Mi=function(t,e){var n=du(e.path),r=IDBKeyRange.bound([n],[mi(n)],!1,!0),i=0;return gc(t).ls({index:Nu.documentTargetsIndex,hs:!0,range:r},(function(t,e,n){var r=t[0];t[1],0!==r&&(i++,n.done())})).next((function(){return i>0}))},t.prototype.Dn=function(t,e){return mc(t).get(e).next((function(t){return t?Ku(t):null}))},t}();function mc(t){return Ru(t,Au.store)}function yc(t){return Ru(t,ku.store)}function gc(t){return Ru(t,Nu.store)}function bc(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],s=pi(n,i);return 0===s?pi(r,o):s}var wc=function(){function t(t){this.ur=t,this.buffer=new Ws(bc),this.hr=0}return t.prototype.lr=function(){return++this.hr},t.prototype._r=function(t){var e=[t,this.lr()];if(this.buffer.size<this.ur)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();bc(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),Ic=function(){function t(t,e){this.dr=t,this.fs=e,this.wr=!1,this.Er=null}return t.prototype.start=function(t){-1!==this.dr.params.Js&&this.Tr(t)},t.prototype.stop=function(){this.Er&&(this.Er.cancel(),this.Er=null)},Object.defineProperty(t.prototype,"Ir",{get:function(){return null!==this.Er},enumerable:!1,configurable:!0}),t.prototype.Tr=function(t){var e=this,n=this.wr?3e5:6e4;oi("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.Er=this.fs.mr("lru_garbage_collection",n,(function(){return i(e,void 0,void 0,(function(){var e;return o(this,(function(n){switch(n.label){case 0:this.Er=null,this.wr=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.Ar(this.dr)];case 2:return n.sent(),[3,7];case 3:return ru(e=n.sent())?(oi("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,ic(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.Tr(t)];case 8:return n.sent(),[2]}}))}))}))},t}(),Tc=function(){function t(t,e){this.Rr=t,this.params=e}return t.prototype.Pr=function(t,e){return this.Rr.yr(t).next((function(t){return Math.floor(e/100*t)}))},t.prototype.gr=function(t,e){var n=this;if(0===e)return Qa.resolve(xi.U);var r=new wc(e);return this.Rr.mn(t,(function(t){return r._r(t.sequenceNumber)})).next((function(){return n.Rr.Vr(t,(function(t){return r._r(t)}))})).next((function(){return r.maxValue}))},t.prototype.tr=function(t,e,n){return this.Rr.tr(t,e,n)},t.prototype.pr=function(t,e){return this.Rr.pr(t,e)},t.prototype.br=function(t,e){var n=this;return-1===this.params.Js?(oi("LruGarbageCollector","Garbage collection skipped; disabled"),Qa.resolve(nc)):this.vr(t).next((function(r){return r<n.params.Js?(oi("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.Js),nc):n.Sr(t,e)}))},t.prototype.vr=function(t){return this.Rr.vr(t)},t.prototype.Sr=function(t,e){var n,r,i,o,s,a,u,c=this,h=Date.now();return this.Pr(t,this.params.Ys).next((function(e){return e>c.params.Xs?(oi("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.Xs+" from "+e),r=c.params.Xs):r=e,o=Date.now(),c.gr(t,r)})).next((function(r){return n=r,s=Date.now(),c.tr(t,n,e)})).next((function(e){return i=e,a=Date.now(),c.pr(t,n)})).next((function(t){return u=Date.now(),ii()<=k.DEBUG&&oi("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-h)+"ms\n\tDetermined least recently used "+r+" in "+(s-o)+"ms\n\tRemoved "+i+" targets in "+(a-s)+"ms\n\tRemoved "+t+" documents in "+(u-a)+"ms\nTotal Duration: "+(u-h)+"ms"),Qa.resolve({js:!0,Gs:r,zs:i,Hs:t})}))},t}(),Ec=function(){function t(t,e){this.db=t,this.dr=function(t,e){return new Tc(t,e)}(this,e)}return t.prototype.yr=function(t){var e=this.Dr(t);return this.db.Cr().er(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype.Dr=function(t){var e=0;return this.Vr(t,(function(t){e++})).next((function(){return e}))},t.prototype.mn=function(t,e){return this.db.Cr().mn(t,e)},t.prototype.Vr=function(t,e){return this.Nr(t,(function(t,n){return e(n)}))},t.prototype.ir=function(t,e,n){return _c(t,n)},t.prototype.cr=function(t,e,n){return _c(t,n)},t.prototype.tr=function(t,e,n){return this.db.Cr().tr(t,e,n)},t.prototype.Oi=function(t,e){return _c(t,e)},t.prototype.Fr=function(t,e){return function(t,e){var n=!1;return dc(t)._s((function(r){return hc(t,r,e).next((function(t){return t&&(n=!0),Qa.resolve(!t)}))})).next((function(){return n}))}(t,e)},t.prototype.pr=function(t,e){var n=this,r=this.db.kr().Or(),i=[],o=0;return this.Nr(t,(function(s,a){if(a<=e){var u=n.Fr(t,s).next((function(e){if(!e)return o++,r.di(t,s).next((function(){return r.fi(s),gc(t).delete([0,du(s.path)])}))}));i.push(u)}})).next((function(){return Qa.$n(i)})).next((function(){return r.apply(t)})).next((function(){return o}))},t.prototype.removeTarget=function(t,e){var n=e.Lt(t.Ss);return this.db.Cr().Yi(t,n)},t.prototype.Mr=function(t,e){return _c(t,e)},t.prototype.Nr=function(t,e){var n,r=gc(t),i=xi.U;return r.ls({index:Nu.documentTargetsIndex},(function(t,r){var o=t[0],s=(t[1],r.path),a=r.sequenceNumber;0===o?(i!==xi.U&&e(new Fi(mu(n)),i),i=a,n=s):i=xi.U})).next((function(){i!==xi.U&&e(new Fi(mu(n)),i)}))},t.prototype.vr=function(t){return this.db.kr().Lr(t)},t}();function _c(t,e){return gc(t).put(function(t,e){return new Nu(0,du(t.path),e)}(e,t.Ss))}var Sc=function(){function t(t,e){this.Kt=t,this.Ii=e}return t.prototype.hi=function(t,e,n){return kc(t).put(Dc(e),n)},t.prototype.fi=function(t,e){var n=kc(t),r=Dc(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next((function(r){return r.byteSize+=e,n.$r(t,r)}))},t.prototype.di=function(t,e){var n=this;return kc(t).get(Dc(e)).next((function(t){return n.Br(t)}))},t.prototype.qr=function(t,e){var n=this;return kc(t).get(Dc(e)).next((function(t){var e=n.Br(t);return e?{_i:e,size:uc(t)}:null}))},t.prototype.getEntries=function(t,e){var n=this,r=$s();return this.Ur(t,e,(function(t,e){var i=n.Br(e);r=r.Ht(t,i)})).next((function(){return r}))},t.prototype.Qr=function(t,e){var n=this,r=$s(),i=new Gs(Fi.J);return this.Ur(t,e,(function(t,e){var o=n.Br(e);o?(r=r.Ht(t,o),i=i.Ht(t,uc(e))):(r=r.Ht(t,null),i=i.Ht(t,0))})).next((function(){return{Kr:r,Wr:i}}))},t.prototype.Ur=function(t,e,n){if(e.nt())return Qa.resolve();var r=IDBKeyRange.bound(e.first().path.rt(),e.last().path.rt()),i=e.ee(),o=i.ce();return kc(t).ls({range:r},(function(t,e,r){for(var s=Fi.Tt(t);o&&Fi.J(o,s)<0;)n(o,null),o=i.ce();o&&o.isEqual(s)&&(n(o,e),o=i.ae()?i.ce():null),o?r.rs(o.path.rt()):r.done()})).next((function(){for(;o;)n(o,null),o=i.ae()?i.ce():null}))},t.prototype.jr=function(t,e,n){var r=this,i=Zs(),o=e.path.length+1,s={};if(n.isEqual(Ri.min())){var a=e.path.rt();s.range=IDBKeyRange.lowerBound(a)}else{var u=e.path.rt(),c=qu(n);s.range=IDBKeyRange.lowerBound([u,c],!0),s.index=_u.collectionReadTimeIndex}return kc(t).ls(s,(function(t,n,s){if(t.length===o){var a=Vu(r.Kt,n);e.path.st(a.key.path)?a instanceof bo&&ns(e,a)&&(i=i.Ht(a.key,a)):s.done()}})).next((function(){return i}))},t.prototype.Or=function(t){return new Ac(this,!!t&&t.Gr)},t.prototype.Lr=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},t.prototype.getMetadata=function(t){return Nc(t).get(Su.key).next((function(t){return hi(!!t),t}))},t.prototype.$r=function(t,e){return Nc(t).put(Su.key,e)},t.prototype.Br=function(t){if(t){var e=Vu(this.Kt,t);return e instanceof wo&&e.version.isEqual(Ri.min())?null:e}return null},t}(),Ac=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).zr=e,r.Gr=n,r.Hr=new oc((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),r}return n(e,t),e.prototype.Ti=function(t){var e=this,n=[],r=0,i=new Ws((function(t,e){return pi(t.ot(),e.ot())}));return this.ci.forEach((function(o,s){var a=e.Hr.get(o);if(s._i){var u=Fu(e.zr.Kt,s._i,e.ui(o));i=i.add(o.path.Z());var c=uc(u);r+=c-a,n.push(e.zr.hi(t,o,u))}else if(r-=a,e.Gr){var h=Fu(e.zr.Kt,new wo(o,Ri.min()),e.ui(o));n.push(e.zr.hi(t,o,h))}else n.push(e.zr.fi(t,o))})),i.forEach((function(r){n.push(e.zr.Ii.Qs(t,r))})),n.push(this.zr.updateMetadata(t,r)),Qa.$n(n)},e.prototype.wi=function(t,e){var n=this;return this.zr.qr(t,e).next((function(t){return null===t?(n.Hr.set(e,0),null):(n.Hr.set(e,t.size),t._i)}))},e.prototype.Ei=function(t,e){var n=this;return this.zr.Qr(t,e).next((function(t){var e=t.Kr;return t.Wr.forEach((function(t,e){n.Hr.set(t,e)})),e}))},e}(sc);function Nc(t){return Ru(t,Su.store)}function kc(t){return Ru(t,_u.store)}function Dc(t){return t.path.rt()}var Oc=function(){function t(t){this.Kt=t}return t.prototype.Yn=function(t,e,n,r){var i=this;hi(n<r&&n>=0&&r<=11);var o=new Za("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(gu.store)}(t),function(t){t.createObjectStore(bu.store,{keyPath:bu.keyPath}),t.createObjectStore(wu.store,{keyPath:wu.keyPath,autoIncrement:!0}).createIndex(wu.userMutationsIndex,wu.userMutationsKeyPath,{unique:!0}),t.createObjectStore(Iu.store)}(t),Cc(t),function(t){t.createObjectStore(_u.store)}(t));var s=Qa.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(Nu.store),t.deleteObjectStore(Au.store),t.deleteObjectStore(ku.store)}(t),Cc(t)),s=s.next((function(){return function(t){var e=t.store(ku.store),n=new ku(0,0,Ri.min().G(),0);return e.put(ku.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(s=s.next((function(){return function(t,e){return e.store(wu.store).os().next((function(n){t.deleteObjectStore(wu.store),t.createObjectStore(wu.store,{keyPath:wu.keyPath,autoIncrement:!0}).createIndex(wu.userMutationsIndex,wu.userMutationsKeyPath,{unique:!0});var r=e.store(wu.store),i=n.map((function(t){return r.put(t)}));return Qa.$n(i)}))}(t,o)}))),s=s.next((function(){!function(t){t.createObjectStore(Ou.store,{keyPath:Ou.keyPath})}(t)}))),n<5&&r>=5&&(s=s.next((function(){return i.Jr(o)}))),n<6&&r>=6&&(s=s.next((function(){return function(t){t.createObjectStore(Su.store)}(t),i.Yr(o)}))),n<7&&r>=7&&(s=s.next((function(){return i.Xr(o)}))),n<8&&r>=8&&(s=s.next((function(){return i.Zr(t,o)}))),n<9&&r>=9&&(s=s.next((function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(_u.store);e.createIndex(_u.readTimeIndex,_u.readTimeIndexPath,{unique:!1}),e.createIndex(_u.collectionReadTimeIndex,_u.collectionReadTimeIndexPath,{unique:!1})}(e)}))),n<10&&r>=10&&(s=s.next((function(){return i.eo(o)}))),n<11&&r>=11&&(s=s.next((function(){!function(t){t.createObjectStore(Cu.store,{keyPath:Cu.keyPath})}(t),function(t){t.createObjectStore(Pu.store,{keyPath:Pu.keyPath})}(t)}))),s},t.prototype.Yr=function(t){var e=0;return t.store(_u.store).ls((function(t,n){e+=uc(n)})).next((function(){var n=new Su(e);return t.store(Su.store).put(Su.key,n)}))},t.prototype.Jr=function(t){var e=this,n=t.store(bu.store),r=t.store(wu.store);return n.os().next((function(n){return Qa.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.os(wu.userMutationsIndex,i).next((function(r){return Qa.forEach(r,(function(r){hi(r.userId===n.userId);var i=zu(e.Kt,r);return ac(t,n.userId,i).next((function(){}))}))}))}))}))},t.prototype.Xr=function(t){var e=t.store(Nu.store),n=t.store(_u.store);return t.store(ku.store).get(ku.key).next((function(t){var r=[];return n.ls((function(n,i){var o=new Ui(n),s=function(t){return[0,du(t)]}(o);r.push(e.get(s).next((function(n){return n?Qa.resolve():function(n){return e.put(new Nu(0,du(n),t.highestListenSequenceNumber))}(o)})))})).next((function(){return Qa.$n(r)}))}))},t.prototype.Zr=function(t,e){t.createObjectStore(Du.store,{keyPath:Du.keyPath});var n=e.store(Du.store),r=new Zu,i=function(t){if(r.add(t)){var e=t.et(),i=t.Z();return n.put({collectionId:e,parent:du(i)})}};return e.store(_u.store).ls({hs:!0},(function(t,e){var n=new Ui(t);return i(n.Z())})).next((function(){return e.store(Iu.store).ls({hs:!0},(function(t,e){t[0];var n=t[1],r=(t[2],mu(n));return i(r.Z())}))}))},t.prototype.eo=function(t){var e=this,n=t.store(Au.store);return n.ls((function(t,r){var i=Ku(r),o=Wu(e.Kt,i);return n.put(o)}))},t}();function Cc(t){t.createObjectStore(Nu.store,{keyPath:Nu.keyPath}).createIndex(Nu.documentTargetsIndex,Nu.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(Au.store,{keyPath:Au.keyPath}).createIndex(Au.queryTargetsIndexName,Au.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(ku.store)}var Pc="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",xc=function(){function t(e,n,r,i,o,s,a,u,c,h){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.no=o,this.window=s,this.document=a,this.so=c,this.io=h,this.ro=null,this.oo=!1,this.isPrimary=!1,this.networkEnabled=!0,this.co=null,this.inForeground=!1,this.ao=null,this.uo=null,this.ho=Number.NEGATIVE_INFINITY,this.lo=function(t){return Promise.resolve()},!t.Wn())throw new bi(gi.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.mi=new Ec(this,i),this._o=n+"main",this.Kt=new ju(u),this.fo=new tu(this._o,11,new Oc(this.Kt)),this.wo=new vc(this.mi,this.Kt),this.Ii=new tc,this.Eo=function(t,e){return new Sc(t,e)}(this.Kt,this.Ii),this.To=new Xu,this.window&&this.window.localStorage?this.Io=this.window.localStorage:(this.Io=null,!1===h&&si("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.mo().then((function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new bi(gi.FAILED_PRECONDITION,Pc);return t.Ao(),t.Ro(),t.Po(),t.runTransaction("getHighestListenSequenceNumber","readonly",(function(e){return t.wo.ji(e)}))})).then((function(e){t.ro=new xi(e,t.so)})).then((function(){t.oo=!0})).catch((function(e){return t.fo&&t.fo.close(),Promise.reject(e)}))},t.prototype.yo=function(t){var e=this;return this.lo=function(n){return i(e,void 0,void 0,(function(){return o(this,(function(e){return this.Ir?[2,t(n)]:[2]}))}))},t(this.isPrimary)},t.prototype.Vo=function(t){var e=this;this.fo.Zn((function(n){return i(e,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},t.prototype.po=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.no.ys((function(){return i(e,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return this.Ir?[4,this.mo()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},t.prototype.mo=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(e){return Rc(e).put(new Ou(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next((function(){if(t.isPrimary)return t.bo(e).next((function(e){e||(t.isPrimary=!1,t.no.vo((function(){return t.lo(!1)})))}))})).next((function(){return t.So(e)})).next((function(n){return t.isPrimary&&!n?t.Do(e).next((function(){return!1})):!!n&&t.Co(e).next((function(){return!0}))}))})).catch((function(e){if(ru(e))return oi("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return oi("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((function(e){t.isPrimary!==e&&t.no.vo((function(){return t.lo(e)})),t.isPrimary=e}))},t.prototype.bo=function(t){var e=this;return Lc(t).get(gu.key).next((function(t){return Qa.resolve(e.xo(t))}))},t.prototype.No=function(t){return Rc(t).delete(this.clientId)},t.prototype.Fo=function(){return i(this,void 0,void 0,(function(){var t,e,n,r,i=this;return o(this,(function(o){switch(o.label){case 0:return!this.isPrimary||this.Oo(this.ho,18e5)?[3,2]:(this.ho=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(t){var e=Ru(t,Ou.store);return e.os().next((function(t){var n=i.ko(t,18e5),r=t.filter((function(t){return-1===n.indexOf(t)}));return Qa.forEach(r,(function(t){return e.delete(t.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}))]);case 1:if(t=o.sent(),this.Io)for(e=0,n=t;e<n.length;e++)r=n[e],this.Io.removeItem(this.Mo(r.clientId));o.label=2;case 2:return[2]}}))}))},t.prototype.Po=function(){var t=this;this.uo=this.no.mr("client_metadata_refresh",4e3,(function(){return t.mo().then((function(){return t.Fo()})).then((function(){return t.Po()}))}))},t.prototype.xo=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.So=function(t){var e=this;return this.io?Qa.resolve(!0):Lc(t).get(gu.key).next((function(n){if(null!==n&&e.Oo(n.leaseTimestampMs,5e3)&&!e.Lo(n.ownerId)){if(e.xo(n)&&e.networkEnabled)return!0;if(!e.xo(n)){if(!n.allowTabSynchronization)throw new bi(gi.FAILED_PRECONDITION,Pc);return!1}}return!(!e.networkEnabled||!e.inForeground)||Rc(t).os().next((function(t){return void 0===e.ko(t,5e3).find((function(t){if(e.clientId!==t.clientId){var n=!e.networkEnabled&&t.networkEnabled,r=!e.inForeground&&t.inForeground,i=e.networkEnabled===t.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(t){return e.isPrimary!==t&&oi("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t}))},t.prototype.$o=function(){return i(this,void 0,void 0,(function(){var t=this;return o(this,(function(e){switch(e.label){case 0:return this.oo=!1,this.Bo(),this.uo&&(this.uo.cancel(),this.uo=null),this.qo(),this.Uo(),[4,this.fo.runTransaction("shutdown","readwrite",[gu.store,Ou.store],(function(e){var n=new Lu(e,xi.U);return t.Do(n).next((function(){return t.No(n)}))}))];case 1:return e.sent(),this.fo.close(),this.Qo(),[2]}}))}))},t.prototype.ko=function(t,e){var n=this;return t.filter((function(t){return n.Oo(t.updateTimeMs,e)&&!n.Lo(t.clientId)}))},t.prototype.Ko=function(){var t=this;return this.runTransaction("getActiveClients","readonly",(function(e){return Rc(e).os().next((function(e){return t.ko(e,18e5).map((function(t){return t.clientId}))}))}))},Object.defineProperty(t.prototype,"Ir",{get:function(){return this.oo},enumerable:!1,configurable:!0}),t.prototype.Wo=function(t){return cc.Ri(t,this.Kt,this.Ii,this.mi)},t.prototype.Cr=function(){return this.wo},t.prototype.kr=function(){return this.Eo},t.prototype.jo=function(){return this.Ii},t.prototype.Go=function(){return this.To},t.prototype.runTransaction=function(t,e,n){var r=this;oi("IndexedDbPersistence","Starting transaction:",t);var i,o="readonly"===e?"readonly":"readwrite";return this.fo.runTransaction(t,o,xu,(function(o){return i=new Lu(o,r.ro?r.ro.next():xi.U),"readwrite-primary"===e?r.bo(i).next((function(t){return!!t||r.So(i)})).next((function(e){if(!e)throw si("Failed to obtain primary lease for action '"+t+"'."),r.isPrimary=!1,r.no.vo((function(){return r.lo(!1)})),new bi(gi.FAILED_PRECONDITION,fu);return n(i)})).next((function(t){return r.Co(i).next((function(){return t}))})):r.zo(i).next((function(){return n(i)}))})).then((function(t){return i.bs(),t}))},t.prototype.zo=function(t){var e=this;return Lc(t).get(gu.key).next((function(t){if(null!==t&&e.Oo(t.leaseTimestampMs,5e3)&&!e.Lo(t.ownerId)&&!e.xo(t)&&!(e.io||e.allowTabSynchronization&&t.allowTabSynchronization))throw new bi(gi.FAILED_PRECONDITION,Pc)}))},t.prototype.Co=function(t){var e=new gu(this.clientId,this.allowTabSynchronization,Date.now());return Lc(t).put(gu.key,e)},t.Wn=function(){return tu.Wn()},t.prototype.Do=function(t){var e=this,n=Lc(t);return n.get(gu.key).next((function(t){return e.xo(t)?(oi("IndexedDbPersistence","Releasing primary lease."),n.delete(gu.key)):Qa.resolve()}))},t.prototype.Oo=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(si("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.Ao=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ao=function(){t.no.ys((function(){return t.inForeground="visible"===t.document.visibilityState,t.mo()}))},this.document.addEventListener("visibilitychange",this.ao),this.inForeground="visible"===this.document.visibilityState)},t.prototype.qo=function(){this.ao&&(this.document.removeEventListener("visibilitychange",this.ao),this.ao=null)},t.prototype.Ro=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.co=function(){e.Bo(),e.no.ys((function(){return e.$o()}))},this.window.addEventListener("unload",this.co))},t.prototype.Uo=function(){this.co&&(this.window.removeEventListener("unload",this.co),this.co=null)},t.prototype.Lo=function(t){var e;try{var n=null!==(null===(e=this.Io)||void 0===e?void 0:e.getItem(this.Mo(t)));return oi("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return si("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.Bo=function(){if(this.Io)try{this.Io.setItem(this.Mo(this.clientId),String(Date.now()))}catch(t){si("Failed to set zombie client id.",t)}},t.prototype.Qo=function(){if(this.Io)try{this.Io.removeItem(this.Mo(this.clientId))}catch(t){}},t.prototype.Mo=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function Lc(t){return Ru(t,gu.store)}function Rc(t){return Ru(t,Ou.store)}function Mc(t,e){var n=t.projectId;return t.m||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var Uc=function(){function t(t,e,n){this.Eo=t,this.Ho=e,this.Ii=n}return t.prototype.Jo=function(t,e){var n=this;return this.Ho.Si(t,e).next((function(r){return n.Yo(t,e,r)}))},t.prototype.Yo=function(t,e,n){return this.Eo.di(t,e).next((function(t){for(var r=0,i=n;r<i.length;r++)t=i[r].Ns(e,t);return t}))},t.prototype.Xo=function(t,e,n){var r=$s();return e.forEach((function(t,e){for(var i=0,o=n;i<o.length;i++)e=o[i].Ns(t,e);r=r.Ht(t,e)})),r},t.prototype.Zo=function(t,e){var n=this;return this.Eo.getEntries(t,e).next((function(e){return n.tc(t,e)}))},t.prototype.tc=function(t,e){var n=this;return this.Ho.Di(t,e).next((function(r){var i=n.Xo(t,e,r),o=Ys();return i.forEach((function(t,e){e||(e=new wo(t,Ri.min())),o=o.Ht(t,e)})),o}))},t.prototype.jr=function(t,e,n){return function(t){return Fi.Et(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.ec(t,e.path):Xo(e)?this.nc(t,e,n):this.sc(t,e,n)},t.prototype.ec=function(t,e){return this.Jo(t,new Fi(e)).next((function(t){var e=Zs();return t instanceof bo&&(e=e.Ht(t.key,t)),e}))},t.prototype.nc=function(t,e,n){var r=this,i=e.collectionGroup,o=Zs();return this.Ii.Ks(t,i).next((function(s){return Qa.forEach(s,(function(s){var a=function(t,e){return new Ho(e,null,t.Nt.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,s.child(i));return r.sc(t,a,n).next((function(t){t.forEach((function(t,e){o=o.Ht(t,e)}))}))})).next((function(){return o}))}))},t.prototype.sc=function(t,e,n){var r,i,o=this;return this.Eo.jr(t,e,n).next((function(n){return r=n,o.Ho.xi(t,e)})).next((function(e){return i=e,o.ic(t,i,r).next((function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,a=o.mutations;s<a.length;s++){var u=a[s],c=u.key,h=r.get(c),f=Ns(u,h,h,o.Ds);r=f instanceof bo?r.Ht(c,f):r.remove(c)}}))})).next((function(){return r.forEach((function(t,n){ns(e,n)||(r=r.remove(t))})),r}))},t.prototype.ic=function(t,e,n){for(var r=ra(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof Ps&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.Eo.getEntries(t,r).next((function(t){return t.forEach((function(t,e){null!==e&&e instanceof bo&&(c=c.Ht(t,e))})),c}))},t}(),jc=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.rc=n,this.oc=r}return t.cc=function(e,n){for(var r=ra(),i=ra(),o=0,s=n.docChanges;o<s.length;o++){var a=s[o];switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),Vc=function(){function t(){}return t.prototype.ac=function(t){this.uc=t},t.prototype.jr=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.Nt.length||1===t.Nt.length&&t.Nt[0].field.ht())}(e)||n.isEqual(Ri.min())?this.hc(t,e):this.uc.Zo(t,r).next((function(o){var s=i.lc(e,o);return(zo(e)||Ko(e))&&i._c(e.limitType,s,r,n)?i.hc(t,e):(ii()<=k.DEBUG&&oi("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),es(e)),i.uc.jr(t,e,n).next((function(t){return s.forEach((function(e){t=t.Ht(e.key,e)})),t})))}))},t.prototype.lc=function(t,e){var n=new Ws(rs(t));return e.forEach((function(e,r){r instanceof bo&&ns(t,r)&&(n=n.add(r))})),n},t.prototype._c=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.u(r)>0)},t.prototype.hc=function(t,e){return ii()<=k.DEBUG&&oi("QueryEngine","Using full collection scan to execute query:",es(e)),this.uc.jr(t,e,Ri.min())},t}(),Fc=function(){function t(t,e,n,r){this.persistence=t,this.fc=e,this.Kt=r,this.dc=new Gs(pi),this.wc=new oc((function(t){return _o(t)}),So),this.Ec=Ri.min(),this.Ho=t.Wo(n),this.Tc=t.kr(),this.wo=t.Cr(),this.Ic=new Uc(this.Tc,this.Ho,this.persistence.jo()),this.To=t.Go(),this.fc.ac(this.Ic)}return t.prototype.Ar=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return t.br(n,e.dc)}))},t}();function qc(t,e,n,r){return new Fc(t,e,n,r)}function Hc(t,e){return i(this,void 0,void 0,(function(){var n,r,i,s;return o(this,(function(o){switch(o.label){case 0:return n=fi(t),r=n.Ho,i=n.Ic,[4,n.persistence.runTransaction("Handle user change","readonly",(function(t){var o;return n.Ho.vi(t).next((function(s){return o=s,r=n.persistence.Wo(e),i=new Uc(n.Tc,r,n.persistence.jo()),r.vi(t)})).next((function(e){for(var n=[],r=[],s=ra(),a=0,u=o;a<u.length;a++){var c=u[a];n.push(c.batchId);for(var h=0,f=c.mutations;h<f.length;h++){var l=f[h];s=s.add(l.key)}}for(var d=0,p=e;d<p.length;d++){var v=p[d];r.push(v.batchId);for(var m=0,y=v.mutations;m<y.length;m++){var g=y[m];s=s.add(g.key)}}return i.Zo(t,s).next((function(t){return{mc:t,Ac:n,Rc:r}}))}))}))];case 1:return s=o.sent(),[2,(n.Ho=r,n.Ic=i,n.fc.ac(n.Ic),s)]}}))}))}function Bc(t,e){var n=fi(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(t){var r=e.batch.keys(),i=n.Tc.Or({Gr:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),s=Qa.resolve();return o.forEach((function(t){s=s.next((function(){return r.di(e,t)})).next((function(e){var o=e,s=n.ks.get(t);hi(null!==s),(!o||o.version.u(s)<0)&&(o=i.Cs(t,o,n))&&r.hi(o,n.Os)}))})),s.next((function(){return t.Ho.Ni(e,i)}))}(n,t,e,i).next((function(){return i.apply(t)})).next((function(){return n.Ho.ki(t)})).next((function(){return n.Ic.Zo(t,r)}))}))}function Gc(t){var e=fi(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(function(t){return e.wo.Wi(t)}))}function zc(t,e){var n=fi(t),r=e.Mt,i=n.dc;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(t){var o=n.Tc.Or({Gr:!0});i=n.dc;var s=[];e.Oe.forEach((function(e,o){var a=i.get(o);if(a){s.push(n.wo.rr(t,e.Ke,o).next((function(){return n.wo.sr(t,e.Ue,o)})));var u=e.resumeToken;if(u.o()>0){var c=a.$t(u,r).Lt(t.Ss);i=i.Ht(o,c),function(t,e,n){return hi(e.resumeToken.o()>0),0===t.resumeToken.o()||e.Mt.j()-t.Mt.j()>=3e8||n.Ue.size+n.Qe.size+n.Ke.size>0}(a,c,e)&&s.push(n.wo.Yi(t,c))}}}));var a=Ys();if(e.Me.forEach((function(r,i){e.Le.has(r)&&s.push(n.persistence.mi.Mr(t,r))})),s.push(Kc(t,o,e.Me,r,void 0).next((function(t){a=t}))),!r.isEqual(Ri.min())){var u=n.wo.Wi(t).next((function(e){return n.wo.Gi(t,t.Ss,r)}));s.push(u)}return Qa.$n(s).next((function(){return o.apply(t)})).next((function(){return n.Ic.tc(t,a)}))})).then((function(t){return n.dc=i,t}))}function Kc(t,e,n,r,i){var o=ra();return n.forEach((function(t){return o=o.add(t)})),e.getEntries(t,o).next((function(t){var o=Ys();return n.forEach((function(n,s){var a=t.get(n),u=(null==i?void 0:i.get(n))||r;s instanceof wo&&s.version.isEqual(Ri.min())?(e.fi(n,u),o=o.Ht(n,s)):null==a||s.version.u(a.version)>0||0===s.version.u(a.version)&&a.hasPendingWrites?(e.hi(s,u),o=o.Ht(n,s)):oi("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",s.version)})),o}))}function Wc(t,e){var n=fi(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(t){return void 0===e&&(e=-1),n.Ho.pi(t,e)}))}function Jc(t,e){var n=fi(t);return n.persistence.runTransaction("Allocate target","readwrite",(function(t){var r;return n.wo.nr(t,e).next((function(i){return i?(r=i,Qa.resolve(r)):n.wo.Ui(t).next((function(i){return r=new os(e,i,0,t.Ss),n.wo.zi(t,r).next((function(){return r}))}))}))})).then((function(t){var r=n.dc.get(t.targetId);return(null===r||t.Mt.u(r.Mt)>0)&&(n.dc=n.dc.Ht(t.targetId,t),n.wc.set(e,t.targetId)),t}))}function Xc(t,e,n){return i(this,void 0,void 0,(function(){var r,i,s,a;return o(this,(function(o){switch(o.label){case 0:r=fi(t),i=r.dc.get(e),s=n?"readwrite":"readwrite-primary",o.label=1;case 1:return o.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",s,(function(t){return r.persistence.mi.removeTarget(t,i)}))];case 2:o.sent(),o.label=3;case 3:return[3,5];case 4:if(!ru(a=o.sent()))throw a;return oi("LocalStore","Failed to update sequence numbers for target "+e+": "+a),[3,5];case 5:return r.dc=r.dc.remove(e),r.wc.delete(i.target),[2]}}))}))}function Yc(t,e,n){var r=fi(t),i=Ri.min(),o=ra();return r.persistence.runTransaction("Execute query","readonly",(function(t){return function(t,e,n){var r=fi(t),i=r.wc.get(n);return void 0!==i?Qa.resolve(r.dc.get(i)):r.wo.nr(e,n)}(r,t,$o(e)).next((function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.wo.ar(t,e.targetId).next((function(t){o=t}))})).next((function(){return r.fc.jr(t,e,n?i:Ri.min(),n?o:ra())})).next((function(t){return{documents:t,Pc:o}}))}))}function $c(t,e){var n=fi(t),r=fi(n.wo),i=n.dc.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(t){return r.Dn(t,e).next((function(t){return t?t.target:null}))}))}function Qc(t){var e=fi(t);return e.persistence.runTransaction("Get new document changes","readonly",(function(t){return function(t,e,n){var r=fi(t),i=Ys(),o=qu(n),s=kc(e),a=IDBKeyRange.lowerBound(o,!0);return s.ls({index:_u.readTimeIndex,range:a},(function(t,e){var n=Vu(r.Kt,e);i=i.Ht(n.key,n),o=e.readTime})).next((function(){return{gs:i,readTime:Hu(o)}}))}(e.Tc,t,e.Ec)})).then((function(t){var n=t.gs,r=t.readTime;return e.Ec=r,n}))}function Zc(t){return i(this,void 0,void 0,(function(){var e;return o(this,(function(n){return[2,(e=fi(t)).persistence.runTransaction("Synchronize last document change read time","readonly",(function(t){return function(t){var e=kc(t),n=Ri.min();return e.ls({index:_u.readTimeIndex,reverse:!0},(function(t,e,r){e.readTime&&(n=Hu(e.readTime)),r.done()})).next((function(){return n}))}(t)})).then((function(t){e.Ec=t}))]}))}))}function th(t,e,n,r){return i(this,void 0,void 0,(function(){var i,s,a,u,c,h,f,l,d,p;return o(this,(function(o){switch(o.label){case 0:for(i=fi(t),s=ra(),a=Ys(),u=ea(),c=0,h=n;c<h.length;c++)f=h[c],l=e.yc(f.metadata.name),f.document&&(s=s.add(l)),a=a.Ht(l,e.gc(f)),u=u.Ht(l,e.Vc(f.metadata.readTime));return d=i.Tc.Or({Gr:!0}),[4,Jc(i,function(t){return $o(Go(Ui.ct("__bundle__/docs/"+t)))}(r))];case 1:return p=o.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",(function(t){return Kc(t,d,a,Ri.min(),u).next((function(e){return d.apply(t),e})).next((function(e){return i.wo.Zi(t,p.targetId).next((function(){return i.wo.sr(t,s,p.targetId)})).next((function(){return i.Ic.tc(t,e)}))}))}))]}}))}))}function eh(t,e,n){return void 0===n&&(n=ra()),i(this,void 0,void 0,(function(){var r,i;return o(this,(function(o){switch(o.label){case 0:return[4,Jc(t,$o(Ju(e.bundledQuery)))];case 1:return r=o.sent(),[2,(i=fi(t)).persistence.runTransaction("Save named query","readwrite",(function(t){var o=_a(e.readTime);if(r.Mt.u(o)>=0)return i.To.qs(t,e);var s=r.$t(yi.h,o);return i.dc=i.dc.Ht(s.targetId,s),i.wo.Yi(t,s).next((function(){return i.wo.Zi(t,r.targetId)})).next((function(){return i.wo.sr(t,n,r.targetId)})).next((function(){return i.To.qs(t,e)}))}))]}}))}))}var nh=function(){function t(t){this.Kt=t,this.bc=new Map,this.vc=new Map}return t.prototype.Ls=function(t,e){return Qa.resolve(this.bc.get(e))},t.prototype.$s=function(t,e){var n;return this.bc.set(e.id,{id:(n=e).id,version:n.version,createTime:_a(n.createTime)}),Qa.resolve()},t.prototype.Bs=function(t,e){return Qa.resolve(this.vc.get(e))},t.prototype.qs=function(t,e){return this.vc.set(e.name,function(t){return{name:t.name,query:Ju(t.bundledQuery),readTime:_a(t.readTime)}}(e)),Qa.resolve()},t}(),rh=function(){function t(){this.Sc=new Ws(ih.Dc),this.Cc=new Ws(ih.xc)}return t.prototype.nt=function(){return this.Sc.nt()},t.prototype.ir=function(t,e){var n=new ih(t,e);this.Sc=this.Sc.add(n),this.Cc=this.Cc.add(n)},t.prototype.Nc=function(t,e){var n=this;t.forEach((function(t){return n.ir(t,e)}))},t.prototype.cr=function(t,e){this.Fc(new ih(t,e))},t.prototype.Oc=function(t,e){var n=this;t.forEach((function(t){return n.cr(t,e)}))},t.prototype.kc=function(t){var e=this,n=new Fi(new Ui([])),r=new ih(n,t),i=new ih(n,t+1),o=[];return this.Cc.Ae([r,i],(function(t){e.Fc(t),o.push(t.key)})),o},t.prototype.Mc=function(){var t=this;this.Sc.forEach((function(e){return t.Fc(e)}))},t.prototype.Fc=function(t){this.Sc=this.Sc.delete(t),this.Cc=this.Cc.delete(t)},t.prototype.Lc=function(t){var e=new Fi(new Ui([])),n=new ih(e,t),r=new ih(e,t+1),i=ra();return this.Cc.Ae([n,r],(function(t){i=i.add(t.key)})),i},t.prototype.Mi=function(t){var e=new ih(t,0),n=this.Sc.Pe(e);return null!==n&&t.isEqual(n.key)},t}(),ih=function(){function t(t,e){this.key=t,this.$c=e}return t.Dc=function(t,e){return Fi.J(t.key,e.key)||pi(t.$c,e.$c)},t.xc=function(t,e){return pi(t.$c,e.$c)||Fi.J(t.key,e.key)},t}(),oh=function(){function t(t,e){this.Ii=t,this.mi=e,this.Ho=[],this.Bc=1,this.qc=new Ws(ih.Dc)}return t.prototype.Pi=function(t){return Qa.resolve(0===this.Ho.length)},t.prototype.yi=function(t,e,n,r){var i=this.Bc;this.Bc++,this.Ho.length>0&&this.Ho[this.Ho.length-1];var o=new Mu(i,e,n,r);this.Ho.push(o);for(var s=0,a=r;s<a.length;s++){var u=a[s];this.qc=this.qc.add(new ih(u.key,i)),this.Ii.Qs(t,u.key.path.Z())}return Qa.resolve(o)},t.prototype.gi=function(t,e){return Qa.resolve(this.Uc(e))},t.prototype.pi=function(t,e){var n=e+1,r=this.Qc(n),i=r<0?0:r;return Qa.resolve(this.Ho.length>i?this.Ho[i]:null)},t.prototype.bi=function(){return Qa.resolve(0===this.Ho.length?-1:this.Bc-1)},t.prototype.vi=function(t){return Qa.resolve(this.Ho.slice())},t.prototype.Si=function(t,e){var n=this,r=new ih(e,0),i=new ih(e,Number.POSITIVE_INFINITY),o=[];return this.qc.Ae([r,i],(function(t){var e=n.Uc(t.$c);o.push(e)})),Qa.resolve(o)},t.prototype.Di=function(t,e){var n=this,r=new Ws(pi);return e.forEach((function(t){var e=new ih(t,0),i=new ih(t,Number.POSITIVE_INFINITY);n.qc.Ae([e,i],(function(t){r=r.add(t.$c)}))})),Qa.resolve(this.Kc(r))},t.prototype.xi=function(t,e){var n=e.path,r=n.length+1,i=n;Fi.Et(i)||(i=i.child(""));var o=new ih(new Fi(i),0),s=new Ws(pi);return this.qc.Re((function(t){var e=t.key.path;return!!n.st(e)&&(e.length===r&&(s=s.add(t.$c)),!0)}),o),Qa.resolve(this.Kc(s))},t.prototype.Kc=function(t){var e=this,n=[];return t.forEach((function(t){var r=e.Uc(t);null!==r&&n.push(r)})),n},t.prototype.Ni=function(t,e){var n=this;hi(0===this.Wc(e.batchId,"removed")),this.Ho.shift();var r=this.qc;return Qa.forEach(e.mutations,(function(i){var o=new ih(i.key,e.batchId);return r=r.delete(o),n.mi.Oi(t,i.key)})).next((function(){n.qc=r}))},t.prototype.Fi=function(t){},t.prototype.Mi=function(t,e){var n=new ih(e,0),r=this.qc.Pe(n);return Qa.resolve(e.isEqual(r&&r.key))},t.prototype.ki=function(t){return this.Ho.length,Qa.resolve()},t.prototype.Wc=function(t,e){return this.Qc(t)},t.prototype.Qc=function(t){return 0===this.Ho.length?0:t-this.Ho[0].batchId},t.prototype.Uc=function(t){var e=this.Qc(t);return e<0||e>=this.Ho.length?null:this.Ho[e]},t}(),sh=function(){function t(t,e){this.Ii=t,this.jc=e,this.docs=new Gs(Fi.J),this.size=0}return t.prototype.hi=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.jc(e);return this.docs=this.docs.Ht(r,{_i:e,size:s,readTime:n}),this.size+=s-o,this.Ii.Qs(t,r.path.Z())},t.prototype.fi=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.di=function(t,e){var n=this.docs.get(e);return Qa.resolve(n?n._i:null)},t.prototype.getEntries=function(t,e){var n=this,r=$s();return e.forEach((function(t){var e=n.docs.get(t);r=r.Ht(t,e?e._i:null)})),Qa.resolve(r)},t.prototype.jr=function(t,e,n){for(var r=Zs(),i=new Fi(e.path.child("")),o=this.docs.ne(i);o.ae();){var s=o.ce(),a=s.key,u=s.value,c=u._i,h=u.readTime;if(!e.path.st(a.path))break;h.u(n)<=0||c instanceof bo&&ns(e,c)&&(r=r.Ht(c.key,c))}return Qa.resolve(r)},t.prototype.Gc=function(t,e){return Qa.forEach(this.docs,(function(t){return e(t)}))},t.prototype.Or=function(t){return new ah(this)},t.prototype.Lr=function(t){return Qa.resolve(this.size)},t}(),ah=function(t){function e(e){var n=this;return(n=t.call(this)||this).zr=e,n}return n(e,t),e.prototype.Ti=function(t){var e=this,n=[];return this.ci.forEach((function(r,i){i&&i._i?n.push(e.zr.hi(t,i._i,e.ui(r))):e.zr.fi(r)})),Qa.$n(n)},e.prototype.wi=function(t,e){return this.zr.di(t,e)},e.prototype.Ei=function(t,e){return this.zr.getEntries(t,e)},e}(sc),uh=function(){function t(t){this.persistence=t,this.zc=new oc((function(t){return _o(t)}),So),this.lastRemoteSnapshotVersion=Ri.min(),this.highestTargetId=0,this.Hc=0,this.Jc=new rh,this.targetCount=0,this.Yc=pc.Bi()}return t.prototype.mn=function(t,e){return this.zc.forEach((function(t,n){return e(n)})),Qa.resolve()},t.prototype.Wi=function(t){return Qa.resolve(this.lastRemoteSnapshotVersion)},t.prototype.ji=function(t){return Qa.resolve(this.Hc)},t.prototype.Ui=function(t){return this.highestTargetId=this.Yc.next(),Qa.resolve(this.highestTargetId)},t.prototype.Gi=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.Hc&&(this.Hc=e),Qa.resolve()},t.prototype.Hi=function(t){this.zc.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.Yc=new pc(e),this.highestTargetId=e),t.sequenceNumber>this.Hc&&(this.Hc=t.sequenceNumber)},t.prototype.zi=function(t,e){return this.Hi(e),this.targetCount+=1,Qa.resolve()},t.prototype.Yi=function(t,e){return this.Hi(e),Qa.resolve()},t.prototype.Xi=function(t,e){return this.zc.delete(e.target),this.Jc.kc(e.targetId),this.targetCount-=1,Qa.resolve()},t.prototype.tr=function(t,e,n){var r=this,i=0,o=[];return this.zc.forEach((function(s,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r.zc.delete(s),o.push(r.Zi(t,a.targetId)),i++)})),Qa.$n(o).next((function(){return i}))},t.prototype.er=function(t){return Qa.resolve(this.targetCount)},t.prototype.nr=function(t,e){var n=this.zc.get(e)||null;return Qa.resolve(n)},t.prototype.sr=function(t,e,n){return this.Jc.Nc(e,n),Qa.resolve()},t.prototype.rr=function(t,e,n){this.Jc.Oc(e,n);var r=this.persistence.mi,i=[];return r&&e.forEach((function(e){i.push(r.Oi(t,e))})),Qa.$n(i)},t.prototype.Zi=function(t,e){return this.Jc.kc(e),Qa.resolve()},t.prototype.ar=function(t,e){var n=this.Jc.Lc(e);return Qa.resolve(n)},t.prototype.Mi=function(t,e){return Qa.resolve(this.Jc.Mi(e))},t}(),ch=function(){function t(t,e){var n=this;this.Xc={},this.ro=new xi(0),this.oo=!1,this.oo=!0,this.mi=t(this),this.wo=new uh(this),this.Ii=new Qu,this.Eo=function(t,e){return new sh(t,(function(t){return n.mi.Zc(t)}))}(this.Ii),this.Kt=new ju(e),this.To=new nh(this.Kt)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.$o=function(){return this.oo=!1,Promise.resolve()},Object.defineProperty(t.prototype,"Ir",{get:function(){return this.oo},enumerable:!1,configurable:!0}),t.prototype.Vo=function(){},t.prototype.po=function(){},t.prototype.jo=function(){return this.Ii},t.prototype.Wo=function(t){var e=this.Xc[t.R()];return e||(e=new oh(this.Ii,this.mi),this.Xc[t.R()]=e),e},t.prototype.Cr=function(){return this.wo},t.prototype.kr=function(){return this.Eo},t.prototype.Go=function(){return this.To},t.prototype.runTransaction=function(t,e,n){var r=this;oi("MemoryPersistence","Starting transaction:",t);var i=new hh(this.ro.next());return this.mi.ta(),n(i).next((function(t){return r.mi.ea(i).next((function(){return t}))})).Mn().then((function(t){return i.bs(),t}))},t.prototype.na=function(t,e){return Qa.Bn(Object.values(this.Xc).map((function(n){return function(){return n.Mi(t,e)}})))},t}(),hh=function(t){function e(e){var n=this;return(n=t.call(this)||this).Ss=e,n}return n(e,t),e}(lu),fh=function(){function t(t){this.persistence=t,this.sa=new rh,this.ia=null}return t.ra=function(e){return new t(e)},Object.defineProperty(t.prototype,"oa",{get:function(){if(this.ia)return this.ia;throw ci()},enumerable:!1,configurable:!0}),t.prototype.ir=function(t,e,n){return this.sa.ir(n,e),this.oa.delete(n.toString()),Qa.resolve()},t.prototype.cr=function(t,e,n){return this.sa.cr(n,e),this.oa.add(n.toString()),Qa.resolve()},t.prototype.Oi=function(t,e){return this.oa.add(e.toString()),Qa.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.sa.kc(e.targetId).forEach((function(t){return n.oa.add(t.toString())}));var r=this.persistence.Cr();return r.ar(t,e.targetId).next((function(t){t.forEach((function(t){return n.oa.add(t.toString())}))})).next((function(){return r.Xi(t,e)}))},t.prototype.ta=function(){this.ia=new Set},t.prototype.ea=function(t){var e=this,n=this.persistence.kr().Or();return Qa.forEach(this.oa,(function(r){var i=Fi.ft(r);return e.ca(t,i).next((function(t){t||n.fi(i)}))})).next((function(){return e.ia=null,n.apply(t)}))},t.prototype.Mr=function(t,e){var n=this;return this.ca(t,e).next((function(t){t?n.oa.delete(e.toString()):n.oa.add(e.toString())}))},t.prototype.Zc=function(t){return 0},t.prototype.ca=function(t,e){var n=this;return Qa.Bn([function(){return Qa.resolve(n.sa.Mi(e))},function(){return n.persistence.Cr().Mi(t,e)},function(){return n.persistence.na(t,e)}])},t}();function lh(t,e){return"firestore_clients_"+t+"_"+e}function dh(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.A()&&(r+="_"+e.uid),r}function ph(t,e){return"firestore_targets_"+t+"_"+e}var vh=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.aa=function(e,n,r){var i=JSON.parse(r),o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error),s=void 0;return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(s=new bi(i.error.code,i.error.message)),o?new t(e,n,i.state,s):(si("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.ua=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),mh=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.aa=function(e,n){var r=JSON.parse(n),i="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error),o=void 0;return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(o=new bi(r.error.code,r.error.message)),i?new t(e,r.state,o):(si("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.ua=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),yh=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.aa=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=oa(),s=0;i&&s<r.activeTargetIds.length;++s)i=to(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(si("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),gh=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.aa=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(si("SharedClientState","Failed to parse online state: "+e),null)},t}(),bh=function(){function t(){this.activeTargetIds=oa()}return t.prototype.ha=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.la=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.ua=function(){var t={activeTargetIds:this.activeTargetIds.rt(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),wh=function(){function t(t,e,n,r,i){this.window=t,this.no=e,this.persistenceKey=n,this._a=r,this.fa=null,this.da=null,this.L=null,this.wa=this.Ea.bind(this),this.Ta=new Gs(pi),this.Ir=!1,this.Ia=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.ma=lh(this.persistenceKey,this._a),this.Aa=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.Ta=this.Ta.Ht(this._a,new bh),this.Ra=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Pa=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.ya=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.ga=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Va=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.wa)}return t.Wn=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return i(this,void 0,void 0,(function(){var t,e,n,r,i,s,a,u,c,h,f,l=this;return o(this,(function(o){switch(o.label){case 0:return[4,this.fa.Ko()];case 1:for(t=o.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this._a&&(i=this.getItem(lh(this.persistenceKey,r)))&&(s=yh.aa(r,i))&&(this.Ta=this.Ta.Ht(s.clientId,s));for(this.pa(),(a=this.storage.getItem(this.ga))&&(u=this.ba(a))&&this.va(u),c=0,h=this.Ia;c<h.length;c++)f=h[c],this.Ea(f);return this.Ia=[],this.window.addEventListener("unload",(function(){return l.$o()})),this.Ir=!0,[2]}}))}))},t.prototype.q=function(t){this.setItem(this.Aa,JSON.stringify(t))},t.prototype.Sa=function(){return this.Da(this.Ta)},t.prototype.Ca=function(t){var e=!1;return this.Ta.forEach((function(n,r){r.activeTargetIds.has(t)&&(e=!0)})),e},t.prototype.xa=function(t){this.Na(t,"pending")},t.prototype.Fa=function(t,e,n){this.Na(t,e,n),this.Oa(t)},t.prototype.ka=function(t){var e="not-current";if(this.Ca(t)){var n=this.storage.getItem(ph(this.persistenceKey,t));if(n){var r=mh.aa(t,n);r&&(e=r.state)}}return this.Ma.ha(t),this.pa(),e},t.prototype.La=function(t){this.Ma.la(t),this.pa()},t.prototype.$a=function(t){return this.Ma.activeTargetIds.has(t)},t.prototype.Ba=function(t){this.removeItem(ph(this.persistenceKey,t))},t.prototype.qa=function(t,e,n){this.Ua(t,e,n)},t.prototype.Qa=function(t,e,n){var r=this;e.forEach((function(t){r.Oa(t)})),this.currentUser=t,n.forEach((function(t){r.xa(t)}))},t.prototype.Ka=function(t){this.Wa(t)},t.prototype.ja=function(){this.Ga()},t.prototype.$o=function(){this.Ir&&(this.window.removeEventListener("storage",this.wa),this.removeItem(this.ma),this.Ir=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return oi("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){oi("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){oi("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.Ea=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(oi("SharedClientState","EVENT",n.key,n.newValue),n.key===this.ma)return void si("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.no.vo((function(){return i(e,void 0,void 0,(function(){var t,e,r,i,s,a;return o(this,(function(o){if(this.Ir){if(null!==n.key)if(this.Ra.test(n.key)){if(null==n.newValue)return t=this.za(n.key),[2,this.Ha(t,null)];if(e=this.Ja(n.key,n.newValue))return[2,this.Ha(e.clientId,e)]}else if(this.Pa.test(n.key)){if(null!==n.newValue&&(r=this.Ya(n.key,n.newValue)))return[2,this.Xa(r)]}else if(this.ya.test(n.key)){if(null!==n.newValue&&(i=this.Za(n.key,n.newValue)))return[2,this.tu(i)]}else if(n.key===this.ga){if(null!==n.newValue&&(s=this.ba(n.newValue)))return[2,this.va(s)]}else if(n.key===this.Aa)(a=function(t){var e=xi.U;if(null!=t)try{var n=JSON.parse(t);hi("number"==typeof n),e=n}catch(t){si("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==xi.U&&this.L(a);else if(n.key===this.Va)return[2,this.fa.eu()]}else this.Ia.push(n);return[2]}))}))}))}},Object.defineProperty(t.prototype,"Ma",{get:function(){return this.Ta.get(this._a)},enumerable:!1,configurable:!0}),t.prototype.pa=function(){this.setItem(this.ma,this.Ma.ua())},t.prototype.Na=function(t,e,n){var r=new vh(this.currentUser,t,e,n),i=dh(this.persistenceKey,this.currentUser,t);this.setItem(i,r.ua())},t.prototype.Oa=function(t){var e=dh(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Wa=function(t){var e={clientId:this._a,onlineState:t};this.storage.setItem(this.ga,JSON.stringify(e))},t.prototype.Ua=function(t,e,n){var r=ph(this.persistenceKey,t),i=new mh(t,e,n);this.setItem(r,i.ua())},t.prototype.Ga=function(){this.setItem(this.Va,"value-not-used")},t.prototype.za=function(t){var e=this.Ra.exec(t);return e?e[1]:null},t.prototype.Ja=function(t,e){var n=this.za(t);return yh.aa(n,e)},t.prototype.Ya=function(t,e){var n=this.Pa.exec(t),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return vh.aa(new Ni(i),r,e)},t.prototype.Za=function(t,e){var n=this.ya.exec(t),r=Number(n[1]);return mh.aa(r,e)},t.prototype.ba=function(t){return gh.aa(t)},t.prototype.Xa=function(t){return i(this,void 0,void 0,(function(){return o(this,(function(e){return t.user.uid===this.currentUser.uid?[2,this.fa.nu(t.batchId,t.state,t.error)]:(oi("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])}))}))},t.prototype.tu=function(t){return this.fa.su(t.targetId,t.state,t.error)},t.prototype.Ha=function(t,e){var n=this,r=e?this.Ta.Ht(t,e):this.Ta.remove(t),i=this.Da(this.Ta),o=this.Da(r),s=[],a=[];return o.forEach((function(t){i.has(t)||s.push(t)})),i.forEach((function(t){o.has(t)||a.push(t)})),this.fa.iu(s,a).then((function(){n.Ta=r}))},t.prototype.va=function(t){this.Ta.get(t.clientId)&&this.da(t.onlineState)},t.prototype.Da=function(t){var e=oa();return t.forEach((function(t,n){e=e.ye(n.activeTargetIds)})),e},t}(),Ih=function(){function t(){this.ru=new bh,this.ou={},this.da=null,this.L=null}return t.prototype.xa=function(t){},t.prototype.Fa=function(t,e,n){},t.prototype.ka=function(t){return this.ru.ha(t),this.ou[t]||"not-current"},t.prototype.qa=function(t,e,n){this.ou[t]=e},t.prototype.La=function(t){this.ru.la(t)},t.prototype.$a=function(t){return this.ru.activeTargetIds.has(t)},t.prototype.Ba=function(t){delete this.ou[t]},t.prototype.Sa=function(){return this.ru.activeTargetIds},t.prototype.Ca=function(t){return this.ru.activeTargetIds.has(t)},t.prototype.start=function(){return this.ru=new bh,Promise.resolve()},t.prototype.Qa=function(t,e,n){},t.prototype.Ka=function(t){},t.prototype.$o=function(){},t.prototype.q=function(t){},t.prototype.ja=function(){},t}(),Th=function(){function t(){}return t.prototype.cu=function(t){},t.prototype.$o=function(){},t}(),Eh=function(){function t(){var t=this;this.au=function(){return t.uu()},this.hu=function(){return t.lu()},this._u=[],this.fu()}return t.prototype.cu=function(t){this._u.push(t)},t.prototype.$o=function(){window.removeEventListener("online",this.au),window.removeEventListener("offline",this.hu)},t.prototype.fu=function(){window.addEventListener("online",this.au),window.addEventListener("offline",this.hu)},t.prototype.uu=function(){oi("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this._u;t<e.length;t++)(0,e[t])(0)},t.prototype.lu=function(){oi("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this._u;t<e.length;t++)(0,e[t])(1)},t.Wn=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),_h={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},Sh=function(){function t(t){this.du=t.du,this.wu=t.wu}return t.prototype.Eu=function(t){this.Tu=t},t.prototype.Iu=function(t){this.mu=t},t.prototype.onMessage=function(t){this.Au=t},t.prototype.close=function(){this.wu()},t.prototype.send=function(t){this.du(t)},t.prototype.Ru=function(){this.Tu()},t.prototype.Pu=function(t){this.mu(t)},t.prototype.yu=function(t){this.Au(t)},t}(),Ah=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.I=e.I,n}return n(e,t),e.prototype.Du=function(t,e,n,r){return new Promise((function(i,o){var s=new ni;s.listenOnce($r.COMPLETE,(function(){try{switch(s.getLastErrorCode()){case Yr.NO_ERROR:var e=s.getResponseJson();oi("Connection","XHR received:",JSON.stringify(e)),i(e);break;case Yr.TIMEOUT:oi("Connection",'RPC "'+t+'" timed out'),o(new bi(gi.DEADLINE_EXCEEDED,"Request time out"));break;case Yr.HTTP_ERROR:var n=s.getStatus();if(oi("Connection",'RPC "'+t+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var a=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(gi).indexOf(e)>=0?e:gi.UNKNOWN}(r.status);o(new bi(a,r.message))}else o(new bi(gi.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new bi(gi.UNAVAILABLE,"Connection failed."));break;default:ci()}}finally{oi("Connection",'RPC "'+t+'" completed.')}}));var a=JSON.stringify(r);s.send(e,"POST",a,n,15)}))},e.prototype.xu=function(t,e){var n,r=[this.Vu,"/","google.firestore.v1.Firestore","/",t,"/channel"],i=new zr,o=Ke(),s={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.T.projectId+"/databases/"+this.T.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.I};this.Su(s.initMessageHeaders,e),"undefined"!=typeof window&&(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(l())||"object"==typeof navigator&&"ReactNative"===navigator.product||l().indexOf("Electron/")>=0||function(){var t=l();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}()||l().indexOf("MSAppHost/")>=0||"object"==typeof(n="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0)&&void 0!==n.id||(s.httpHeadersOverwriteParam="$httpHeaders");var a=r.join("");oi("Connection","Creating WebChannel: "+a,s);var u=i.createWebChannel(a,s),c=!1,h=!1,f=new Sh({du:function(t){h?oi("Connection","Not sending because WebChannel is closed:",t):(c||(oi("Connection","Opening WebChannel transport."),u.open(),c=!0),oi("Connection","WebChannel sending:",t),u.send(t))},wu:function(){return u.close()}}),d=function(t,e,n){t.listen(e,(function(t){try{n(t)}catch(t){setTimeout((function(){throw t}),0)}}))};return d(u,ei.EventType.OPEN,(function(){h||oi("Connection","WebChannel transport opened.")})),d(u,ei.EventType.CLOSE,(function(){h||(h=!0,oi("Connection","WebChannel transport closed"),f.Pu())})),d(u,ei.EventType.ERROR,(function(t){h||(h=!0,ai("Connection","WebChannel transport errored:",t),f.Pu(new bi(gi.UNAVAILABLE,"The operation could not be completed")))})),d(u,ei.EventType.MESSAGE,(function(t){var e;if(!h){var n=t.data[0];hi(!!n);var r=n,i=r.error||(null===(e=r[0])||void 0===e?void 0:e.error);if(i){oi("Connection","WebChannel received error:",i);var o=i.status,s=function(t){var e=Us[t];if(void 0!==e)return Bs(e)}(o),a=i.message;void 0===s&&(s=gi.INTERNAL,a="Unknown error status: "+o+" with message "+i.message),h=!0,f.Pu(new bi(s,a)),u.close()}else oi("Connection","WebChannel received:",n),f.yu(n)}})),d(o,Qr.STAT_EVENT,(function(t){t.stat===Zr?oi("Connection","Detected buffering proxy"):t.stat===ti&&oi("Connection","Detected no buffering proxy")})),setTimeout((function(){f.Ru()}),0),f},e}(function(){function t(t){this.gu=t,this.T=t.T;var e=t.ssl?"https":"http";this.Vu=e+"://"+t.host,this.pu="projects/"+this.T.projectId+"/databases/"+this.T.database+"/documents"}return t.prototype.bu=function(t,e,n,r){var i=this.vu(t,e);oi("RestConnection","Sending: ",i,n);var o={};return this.Su(o,r),this.Du(t,i,o,n).then((function(t){return oi("RestConnection","Received: ",t),t}),(function(e){throw ai("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e}))},t.prototype.Cu=function(t,e,n,r){return this.bu(t,e,n,r)},t.prototype.Su=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.2.1",t["Content-Type"]="text/plain",e)for(var n in e.V)e.V.hasOwnProperty(n)&&(t[n]=e.V[n])},t.prototype.vu=function(t,e){var n=_h[t];return this.Vu+"/v1/"+e+":"+n},t}());function Nh(){return"undefined"!=typeof window?window:null}function kh(){return"undefined"!=typeof document?document:null}function Dh(t){return new wa(t,!0)}var Oh=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.no=t,this.ds=e,this.Nu=n,this.Fu=r,this.Ou=i,this.ku=0,this.Mu=null,this.Lu=Date.now(),this.reset()}return t.prototype.reset=function(){this.ku=0},t.prototype.$u=function(){this.ku=this.Ou},t.prototype.Bu=function(t){var e=this;this.cancel();var n=Math.floor(this.ku+this.qu()),r=Math.max(0,Date.now()-this.Lu),i=Math.max(0,n-r);i>0&&oi("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.ku+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Mu=this.no.mr(this.ds,i,(function(){return e.Lu=Date.now(),t()})),this.ku*=this.Fu,this.ku<this.Nu&&(this.ku=this.Nu),this.ku>this.Ou&&(this.ku=this.Ou)},t.prototype.Uu=function(){null!==this.Mu&&(this.Mu.Ps(),this.Mu=null)},t.prototype.cancel=function(){null!==this.Mu&&(this.Mu.cancel(),this.Mu=null)},t.prototype.qu=function(){return(Math.random()-.5)*this.ku},t}(),Ch=function(){function t(t,e,n,r,i,o){this.no=t,this.Qu=n,this.Ku=r,this.Wu=i,this.listener=o,this.state=0,this.ju=0,this.Gu=null,this.stream=null,this.zu=new Oh(t,e)}return t.prototype.Hu=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.Ju=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.Yu()},t.prototype.stop=function(){return i(this,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return this.Hu()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.Xu=function(){this.state=0,this.zu.reset()},t.prototype.Zu=function(){var t=this;this.Ju()&&null===this.Gu&&(this.Gu=this.no.mr(this.Qu,6e4,(function(){return t.th()})))},t.prototype.eh=function(t){this.nh(),this.stream.send(t)},t.prototype.th=function(){return i(this,void 0,void 0,(function(){return o(this,(function(t){return this.Ju()?[2,this.close(0)]:[2]}))}))},t.prototype.nh=function(){this.Gu&&(this.Gu.cancel(),this.Gu=null)},t.prototype.close=function(t,e){return i(this,void 0,void 0,(function(){return o(this,(function(n){switch(n.label){case 0:return this.nh(),this.zu.cancel(),this.ju++,3!==t?this.zu.reset():e&&e.code===gi.RESOURCE_EXHAUSTED?(si(e.toString()),si("Using maximum backoff delay to prevent overloading the backend."),this.zu.$u()):e&&e.code===gi.UNAUTHENTICATED&&this.Wu.v(),null!==this.stream&&(this.sh(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Iu(e)];case 1:return n.sent(),[2]}}))}))},t.prototype.sh=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.ih(this.ju),n=this.ju;this.Wu.getToken().then((function(e){t.ju===n&&t.rh(e)}),(function(n){e((function(){var e=new bi(gi.UNKNOWN,"Fetching auth token failed: "+n.message);return t.oh(e)}))}))},t.prototype.rh=function(t){var e=this,n=this.ih(this.ju);this.stream=this.ah(t),this.stream.Eu((function(){n((function(){return e.state=2,e.listener.Eu()}))})),this.stream.Iu((function(t){n((function(){return e.oh(t)}))})),this.stream.onMessage((function(t){n((function(){return e.onMessage(t)}))}))},t.prototype.Yu=function(){var t=this;this.state=4,this.zu.Bu((function(){return i(t,void 0,void 0,(function(){return o(this,(function(t){return this.state=0,this.start(),[2]}))}))}))},t.prototype.oh=function(t){return oi("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.ih=function(t){var e=this;return function(n){e.no.ys((function(){return e.ju===t?n():(oi("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},t}(),Ph=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).Kt=i,s}return n(e,t),e.prototype.ah=function(t){return this.Ku.xu("Listen",t)},e.prototype.onMessage=function(t){this.zu.reset();var e=function(t,e){var n;if("targetChange"in e){e.targetChange;var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:ci()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.qt?(hi(void 0===e||"string"==typeof e),yi.fromBase64String(e||"")):(hi(void 0===e||e instanceof Uint8Array),yi.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),s=(a=e.targetChange.cause)&&function(t){var e=void 0===t.code?gi.UNKNOWN:Bs(t.code);return new bi(e,t.message||"")}(a);n=new da(r,i,o,s||null)}else if("documentChange"in e){e.documentChange,(r=e.documentChange).document,r.document.name,r.document.updateTime,i=ka(t,r.document.name),o=_a(r.document.updateTime);var a=new vo({mapValue:{fields:r.document.fields}}),u=(s=new bo(i,o,a,{}),r.targetIds||[]),c=r.removedTargetIds||[];n=new fa(u,c,s.key,s)}else if("documentDelete"in e)e.documentDelete,(r=e.documentDelete).document,i=ka(t,r.document),o=r.readTime?_a(r.readTime):Ri.min(),a=new wo(i,o),s=r.removedTargetIds||[],n=new fa([],s,a.key,a);else if("documentRemove"in e)e.documentRemove,(r=e.documentRemove).document,i=ka(t,r.document),o=r.removedTargetIds||[],n=new fa([],o,i,null);else{if(!("filter"in e))return ci();e.filter;var h=e.filter;h.targetId,r=h.count||0,i=new qs(r),o=h.targetId,n=new la(o,i)}return n}(this.Kt,t),n=function(t){if(!("targetChange"in t))return Ri.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?Ri.min():e.readTime?_a(e.readTime):Ri.min()}(t);return this.listener.uh(e,n)},e.prototype.hh=function(t){var e={};e.database=Ca(this.Kt),e.addTarget=function(t,e){var n,r=e.target;return(n=Ao(r)?{documents:Ua(t,r)}:{query:ja(t,r)}).targetId=e.targetId,e.resumeToken.o()>0?n.resumeToken=Ta(t,e.resumeToken):e.Mt.u(Ri.min())>0&&(n.readTime=Ia(t,e.Mt.G())),n}(this.Kt,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return ci()}}(0,e.kt);return null==n?null:{"goog-listen-tags":n}}(this.Kt,t);n&&(e.labels=n),this.eh(e)},e.prototype.lh=function(t){var e={};e.database=Ca(this.Kt),e.removeTarget=t,this.eh(e)},e}(Ch),xh=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).Kt=i,s._h=!1,s}return n(e,t),Object.defineProperty(e.prototype,"fh",{get:function(){return this._h},enumerable:!1,configurable:!0}),e.prototype.start=function(){this._h=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.sh=function(){this._h&&this.dh([])},e.prototype.ah=function(t){return this.Ku.xu("Write",t)},e.prototype.onMessage=function(t){if(hi(!!t.streamToken),this.lastStreamToken=t.streamToken,this._h){this.zu.reset();var e=function(t,e){return t&&t.length>0?(hi(void 0!==e),t.map((function(t){return function(t,e){var n=t.updateTime?_a(t.updateTime):_a(e);n.isEqual(Ri.min())&&(n=_a(e));var r=null;return t.transformResults&&t.transformResults.length>0&&(r=t.transformResults),new Ts(n,r)}(t,e)}))):[]}(t.writeResults,t.commitTime),n=_a(t.commitTime);return this.listener.wh(n,e)}return hi(!t.writeResults||0===t.writeResults.length),this._h=!0,this.listener.Eh()},e.prototype.Th=function(){var t={};t.database=Ca(this.Kt),this.eh(t)},e.prototype.dh=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map((function(t){return Ra(e.Kt,t)}))};this.eh(n)},e}(Ch),Lh=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Ku=n,i.Kt=r,i.Ih=!1,i}return n(e,t),e.prototype.mh=function(){if(this.Ih)throw new bi(gi.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.bu=function(t,e,n){var r=this;return this.mh(),this.credentials.getToken().then((function(i){return r.Ku.bu(t,e,n,i)})).catch((function(t){throw t.code===gi.UNAUTHENTICATED&&r.credentials.v(),t}))},e.prototype.Cu=function(t,e,n){var r=this;return this.mh(),this.credentials.getToken().then((function(i){return r.Ku.Cu(t,e,n,i)})).catch((function(t){throw t.code===gi.UNAUTHENTICATED&&r.credentials.v(),t}))},e.prototype.terminate=function(){this.Ih=!1},e}((function(){})),Rh=function(){function t(t,e){this.fs=t,this.da=e,this.state="Unknown",this.Ah=0,this.Rh=null,this.Ph=!0}return t.prototype.yh=function(){var t=this;0===this.Ah&&(this.gh("Unknown"),this.Rh=this.fs.mr("online_state_timeout",1e4,(function(){return t.Rh=null,t.Vh("Backend didn't respond within 10 seconds."),t.gh("Offline"),Promise.resolve()})))},t.prototype.ph=function(t){"Online"===this.state?this.gh("Unknown"):(this.Ah++,this.Ah>=1&&(this.bh(),this.Vh("Connection failed 1 times. Most recent error: "+t.toString()),this.gh("Offline")))},t.prototype.set=function(t){this.bh(),this.Ah=0,"Online"===t&&(this.Ph=!1),this.gh(t)},t.prototype.gh=function(t){t!==this.state&&(this.state=t,this.da(t))},t.prototype.Vh=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Ph?(si(e),this.Ph=!1):oi("OnlineStateTracker",e)},t.prototype.bh=function(){null!==this.Rh&&(this.Rh.cancel(),this.Rh=null)},t}(),Mh=function(t,e,n,r,s){var a=this;this.Sh=t,this.Dh=e,this.fs=n,this.Ch={},this.xh=[],this.Nh=new Map,this.Fh=new Set,this.Oh=[],this.kh=s,this.kh.cu((function(t){n.ys((function(){return i(a,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return zh(this)?(oi("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return i(this,void 0,void 0,(function(){var e;return o(this,(function(n){switch(n.label){case 0:return(e=fi(t)).Fh.add(4),[4,jh(e)];case 1:return n.sent(),e.Mh.set("Unknown"),e.Fh.delete(4),[4,Uh(e)];case 2:return n.sent(),[2]}}))}))}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))})),this.Mh=new Rh(n,r)};function Uh(t){return i(this,void 0,void 0,(function(){var e,n;return o(this,(function(r){switch(r.label){case 0:if(!zh(t))return[3,4];e=0,n=t.Oh,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function jh(t){return i(this,void 0,void 0,(function(){var e,n;return o(this,(function(r){switch(r.label){case 0:e=0,n=t.Oh,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function Vh(t,e){var n=fi(t);n.Nh.has(e.targetId)||(n.Nh.set(e.targetId,e),Gh(n)?Bh(n):af(n).Ju()&&qh(n,e))}function Fh(t,e){var n=fi(t),r=af(n);n.Nh.delete(e),r.Ju()&&Hh(n,e),0===n.Nh.size&&(r.Ju()?r.Zu():zh(n)&&n.Mh.set("Unknown"))}function qh(t,e){t.Lh.cn(e.targetId),af(t).hh(e)}function Hh(t,e){t.Lh.cn(e),af(t).lh(e)}function Bh(t){t.Lh=new va({Sn:function(e){return t.Ch.Sn(e)},Dn:function(e){return t.Nh.get(e)||null}}),af(t).start(),t.Mh.yh()}function Gh(t){return zh(t)&&!af(t).Hu()&&t.Nh.size>0}function zh(t){return 0===fi(t).Fh.size}function Kh(t){t.Lh=void 0}function Wh(t){return i(this,void 0,void 0,(function(){return o(this,(function(e){return t.Nh.forEach((function(e,n){qh(t,e)})),[2]}))}))}function Jh(t,e){return i(this,void 0,void 0,(function(){return o(this,(function(n){return Kh(t),Gh(t)?(t.Mh.ph(e),Bh(t)):t.Mh.set("Unknown"),[2]}))}))}function Xh(t,e,n){return i(this,void 0,void 0,(function(){var r,s,a;return o(this,(function(u){switch(u.label){case 0:if(t.Mh.set("Online"),!(e instanceof da&&2===e.state&&e.cause))return[3,6];u.label=1;case 1:return u.trys.push([1,3,,5]),[4,function(t,e){return i(this,void 0,void 0,(function(){var n,r,i,s;return o(this,(function(o){switch(o.label){case 0:n=e.cause,r=0,i=e.targetIds,o.label=1;case 1:return r<i.length?(s=i[r],t.Nh.has(s)?[4,t.Ch.$h(s,n)]:[3,3]):[3,5];case 2:o.sent(),t.Nh.delete(s),t.Lh.removeTarget(s),o.label=3;case 3:o.label=4;case 4:return r++,[3,1];case 5:return[2]}}))}))}(t,e)];case 2:return u.sent(),[3,5];case 3:return r=u.sent(),oi("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,Yh(t,r)];case 4:return u.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof fa?t.Lh.wn(e):e instanceof la?t.Lh.yn(e):t.Lh.In(e),n.isEqual(Ri.min()))return[3,13];u.label=7;case 7:return u.trys.push([7,11,,13]),[4,Gc(t.Sh)];case 8:return s=u.sent(),n.u(s)>=0?[4,function(t,e){var n=t.Lh.pn(e);return n.Oe.forEach((function(n,r){if(n.resumeToken.o()>0){var i=t.Nh.get(r);i&&t.Nh.set(r,i.$t(n.resumeToken,e))}})),n.ke.forEach((function(e){var n=t.Nh.get(e);if(n){t.Nh.set(e,n.$t(yi.h,n.Mt)),Hh(t,e);var r=new os(n.target,e,1,n.sequenceNumber);qh(t,r)}})),t.Ch.Bh(n)}(t,n)]:[3,10];case 9:u.sent(),u.label=10;case 10:return[3,13];case 11:return oi("RemoteStore","Failed to raise snapshot:",a=u.sent()),[4,Yh(t,a)];case 12:return u.sent(),[3,13];case 13:return[2]}}))}))}function Yh(t,e,n){return i(this,void 0,void 0,(function(){var r=this;return o(this,(function(s){switch(s.label){case 0:if(!ru(e))throw e;return t.Fh.add(1),[4,jh(t)];case 1:return s.sent(),t.Mh.set("Offline"),n||(n=function(){return Gc(t.Sh)}),t.fs.vo((function(){return i(r,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return oi("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Fh.delete(1),[4,Uh(t)];case 2:return e.sent(),[2]}}))}))})),[2]}}))}))}function $h(t,e){return e().catch((function(n){return Yh(t,n,e)}))}function Qh(t){return i(this,void 0,void 0,(function(){var e,n,r,i,s;return o(this,(function(o){switch(o.label){case 0:e=fi(t),n=uf(e),r=e.xh.length>0?e.xh[e.xh.length-1].batchId:-1,o.label=1;case 1:if(!function(t){return zh(t)&&t.xh.length<10}(e))return[3,7];o.label=2;case 2:return o.trys.push([2,4,,6]),[4,Wc(e.Sh,r)];case 3:return null===(i=o.sent())?(0===e.xh.length&&n.Zu(),[3,7]):(r=i.batchId,function(t,e){t.xh.push(e);var n=uf(t);n.Ju()&&n.fh&&n.dh(e.mutations)}(e,i),[3,6]);case 4:return s=o.sent(),[4,Yh(e,s)];case 5:return o.sent(),[3,6];case 6:return[3,1];case 7:return Zh(e)&&tf(e),[2]}}))}))}function Zh(t){return zh(t)&&!uf(t).Hu()&&t.xh.length>0}function tf(t){uf(t).start()}function ef(t){return i(this,void 0,void 0,(function(){return o(this,(function(e){return uf(t).Th(),[2]}))}))}function nf(t){return i(this,void 0,void 0,(function(){var e,n,r,i;return o(this,(function(o){for(e=uf(t),n=0,r=t.xh;n<r.length;n++)i=r[n],e.dh(i.mutations);return[2]}))}))}function rf(t,e,n){return i(this,void 0,void 0,(function(){var r,i;return o(this,(function(o){switch(o.label){case 0:return r=t.xh.shift(),i=Uu.from(r,e,n),[4,$h(t,(function(){return t.Ch.qh(i)}))];case 1:return o.sent(),[4,Qh(t)];case 2:return o.sent(),[2]}}))}))}function of(t,e){return i(this,void 0,void 0,(function(){return o(this,(function(n){switch(n.label){case 0:return e&&uf(t).fh?[4,function(t,e){return i(this,void 0,void 0,(function(){var n,r;return o(this,(function(i){switch(i.label){case 0:return Hs(r=e.code)&&r!==gi.ABORTED?(n=t.xh.shift(),uf(t).Xu(),[4,$h(t,(function(){return t.Ch.Uh(n.batchId,e)}))]):[3,3];case 1:return i.sent(),[4,Qh(t)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return Zh(t)&&tf(t),[2]}}))}))}function sf(t,e){return i(this,void 0,void 0,(function(){var n;return o(this,(function(r){switch(r.label){case 0:return n=fi(t),e?(n.Fh.delete(2),[4,Uh(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Fh.add(2),[4,jh(n)]);case 3:r.sent(),n.Mh.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}}))}))}function af(t){var e=this;return t.Qh||(t.Qh=function(t,e,n){var r=fi(t);return r.mh(),new Ph(e,r.Ku,r.credentials,r.Kt,n)}(t.Dh,t.fs,{Eu:Wh.bind(null,t),Iu:Jh.bind(null,t),uh:Xh.bind(null,t)}),t.Oh.push((function(n){return i(e,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return n?(t.Qh.Xu(),Gh(t)?Bh(t):t.Mh.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Qh.stop()];case 2:e.sent(),Kh(t),e.label=3;case 3:return[2]}}))}))}))),t.Qh}function uf(t){var e=this;return t.Kh||(t.Kh=function(t,e,n){var r=fi(t);return r.mh(),new xh(e,r.Ku,r.credentials,r.Kt,n)}(t.Dh,t.fs,{Eu:ef.bind(null,t),Iu:of.bind(null,t),Eh:nf.bind(null,t),wh:rf.bind(null,t)}),t.Oh.push((function(n){return i(e,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return n?(t.Kh.Xu(),[4,Qh(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Kh.stop()];case 3:e.sent(),t.xh.length>0&&(oi("RemoteStore","Stopping write stream with "+t.xh.length+" pending writes"),t.xh=[]),e.label=4;case 4:return[2]}}))}))}))),t.Kh}var cf=function(){this.Wh=void 0,this.listeners=[]},hf=function(){this.queries=new oc((function(t){return ts(t)}),Zo),this.onlineState="Unknown",this.jh=new Set};function ff(t,e){return i(this,void 0,void 0,(function(){var n,r,i,s,a,u,c;return o(this,(function(o){switch(o.label){case 0:if(n=fi(t),r=e.query,i=!1,(s=n.queries.get(r))||(i=!0,s=new cf),!i)return[3,4];o.label=1;case 1:return o.trys.push([1,3,,4]),a=s,[4,n.Gh(r)];case 2:return a.Wh=o.sent(),[3,4];case 3:return u=o.sent(),c=cu(u,"Initialization of query '"+es(e.query)+"' failed"),[2,void e.onError(c)];case 4:return n.queries.set(r,s),s.listeners.push(e),e.zh(n.onlineState),s.Wh&&e.Hh(s.Wh)&&vf(n),[2]}}))}))}function lf(t,e){return i(this,void 0,void 0,(function(){var n,r,i,s,a;return o(this,(function(o){return n=fi(t),r=e.query,i=!1,(s=n.queries.get(r))&&(a=s.listeners.indexOf(e))>=0&&(s.listeners.splice(a,1),i=0===s.listeners.length),i?[2,(n.queries.delete(r),n.Jh(r))]:[2]}))}))}function df(t,e){for(var n=fi(t),r=!1,i=0,o=e;i<o.length;i++){var s=o[i],a=s.query,u=n.queries.get(a);if(u){for(var c=0,h=u.listeners;c<h.length;c++)h[c].Hh(s)&&(r=!0);u.Wh=s}}r&&vf(n)}function pf(t,e,n){var r=fi(t),i=r.queries.get(e);if(i)for(var o=0,s=i.listeners;o<s.length;o++)s[o].onError(n);r.queries.delete(e)}function vf(t){t.jh.forEach((function(t){t.next()}))}var mf=function(){function t(t,e,n){this.query=t,this.Yh=e,this.Xh=!1,this.Zh=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Hh=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new ua(t.query,t.docs,t.De,e,t.Ce,t.fromCache,t.xe,!0)}var o=!1;return this.Xh?this.tl(t)&&(this.Yh.next(t),o=!0):this.el(t,this.onlineState)&&(this.nl(t),o=!0),this.Zh=t,o},t.prototype.onError=function(t){this.Yh.error(t)},t.prototype.zh=function(t){this.onlineState=t;var e=!1;return this.Zh&&!this.Xh&&this.el(this.Zh,t)&&(this.nl(this.Zh),e=!0),e},t.prototype.el=function(t,e){if(!t.fromCache)return!0;var n="Offline"!==e;return!(this.options.sl&&n||t.docs.nt()&&"Offline"!==e)},t.prototype.tl=function(t){if(t.docChanges.length>0)return!0;var e=this.Zh&&this.Zh.hasPendingWrites!==t.hasPendingWrites;return!(!t.xe&&!e)&&!0===this.options.includeMetadataChanges},t.prototype.nl=function(t){t=ua.Fe(t.query,t.docs,t.Ce,t.fromCache),this.Xh=!0,this.Yh.next(t)},t}(),yf=function(){function t(t,e){this.payload=t,this.byteLength=e}return t.prototype.il=function(){return"metadata"in this.payload},t}(),gf=function(){function t(t){this.Kt=t}return t.prototype.yc=function(t){return ka(this.Kt,t)},t.prototype.gc=function(t){return t.metadata.exists?La(this.Kt,t.document,!1):new wo(this.yc(t.metadata.name),this.Vc(t.metadata.readTime))},t.prototype.Vc=function(t){return _a(t)},t}();!function(){function t(t,e,n){this.rl=t,this.Sh=e,this.Kt=n,this.queries=[],this.documents=[],this.progress=function(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}(t)}t.prototype.ol=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},t.prototype.cl=function(t){for(var e=new Map,n=new gf(this.Kt),r=0,i=t;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var s=n.yc(o.metadata.name),a=0,u=o.metadata.queries;a<u.length;a++){var c=u[a],h=(e.get(c)||ra()).add(s);e.set(c,h)}}return e},t.prototype.complete=function(){return i(this,void 0,void 0,(function(){var t,e,n,r,i;return o(this,(function(o){switch(o.label){case 0:return[4,th(this.Sh,new gf(this.Kt),this.documents,this.rl.id)];case 1:t=o.sent(),e=this.cl(this.documents),n=0,r=this.queries,o.label=2;case 2:return n<r.length?(i=r[n],[4,eh(this.Sh,i,e.get(i.name))]):[3,5];case 3:o.sent(),o.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new hu(Object.assign({},this.progress),t))]}}))}))}}();var bf=function(t){this.key=t},wf=function(t){this.key=t},If=function(){function t(t,e){this.query=t,this.al=e,this.ul=null,this.qe=!1,this.hl=ra(),this.Ce=ra(),this.ll=rs(t),this._l=new sa(this.ll)}return Object.defineProperty(t.prototype,"fl",{get:function(){return this.al},enumerable:!1,configurable:!0}),t.prototype.dl=function(t,e){var n=this,r=e?e.wl:new aa,i=e?e._l:this._l,o=e?e.Ce:this.Ce,s=i,a=!1,u=zo(this.query)&&i.size===this.query.limit?i.last():null,c=Ko(this.query)&&i.size===this.query.limit?i.first():null;if(t.Zt((function(t,e){var h=i.get(t),f=e instanceof bo?e:null;f&&(f=ns(n.query,f)?f:null);var l=!!h&&n.Ce.has(h.key),d=!!f&&(f.bt||n.Ce.has(f.key)&&f.hasCommittedMutations),p=!1;h&&f?h.data().isEqual(f.data())?l!==d&&(r.track({type:3,doc:f}),p=!0):n.El(h,f)||(r.track({type:2,doc:f}),p=!0,(u&&n.ll(f,u)>0||c&&n.ll(f,c)<0)&&(a=!0)):!h&&f?(r.track({type:0,doc:f}),p=!0):h&&!f&&(r.track({type:1,doc:h}),p=!0,(u||c)&&(a=!0)),p&&(f?(s=s.add(f),o=d?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))})),zo(this.query)||Ko(this.query))for(;s.size>this.query.limit;){var h=zo(this.query)?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{_l:s,wl:r,_c:a,Ce:o}},t.prototype.El=function(t,e){return t.bt&&e.hasCommittedMutations&&!e.bt},t.prototype.Ti=function(t,e,n){var r=this,i=this._l;this._l=t._l,this.Ce=t.Ce;var o=t.wl.Se();o.sort((function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ci()}};return n(t)-n(e)}(t.type,e.type)||r.ll(t.doc,e.doc)})),this.Tl(n);var s=e?this.Il():[],a=0===this.hl.size&&this.qe?1:0,u=a!==this.ul;return this.ul=a,0!==o.length||u?{snapshot:new ua(this.query,t._l,i,o,t.Ce,0===a,u,!1),ml:s}:{ml:s}},t.prototype.zh=function(t){return this.qe&&"Offline"===t?(this.qe=!1,this.Ti({_l:this._l,wl:new aa,Ce:this.Ce,_c:!1},!1)):{ml:[]}},t.prototype.Al=function(t){return!this.al.has(t)&&!!this._l.has(t)&&!this._l.get(t).bt},t.prototype.Tl=function(t){var e=this;t&&(t.Ue.forEach((function(t){return e.al=e.al.add(t)})),t.Qe.forEach((function(t){})),t.Ke.forEach((function(t){return e.al=e.al.delete(t)})),this.qe=t.qe)},t.prototype.Il=function(){var t=this;if(!this.qe)return[];var e=this.hl;this.hl=ra(),this._l.forEach((function(e){t.Al(e.key)&&(t.hl=t.hl.add(e.key))}));var n=[];return e.forEach((function(e){t.hl.has(e)||n.push(new wf(e))})),this.hl.forEach((function(t){e.has(t)||n.push(new bf(t))})),n},t.prototype.Rl=function(t){this.al=t.Pc,this.hl=ra();var e=this.dl(t.documents);return this.Ti(e,!0)},t.prototype.Pl=function(){return ua.Fe(this.query,this._l,this.Ce,0===this.ul)},t}(),Tf=function(t,e,n){this.query=t,this.targetId=e,this.view=n},Ef=function(t){this.key=t,this.yl=!1},_f=function(){function t(t,e,n,r,i,o){this.Sh=t,this.gl=e,this.Vl=n,this.pl=r,this.currentUser=i,this.bl=o,this.vl={},this.Sl=new oc((function(t){return ts(t)}),Zo),this.Dl=new Map,this.Cl=[],this.xl=new Gs(Fi.J),this.Nl=new Map,this.Fl=new rh,this.Ol={},this.kl=new Map,this.Ml=pc.qi(),this.onlineState="Unknown",this.Ll=void 0}return Object.defineProperty(t.prototype,"$l",{get:function(){return!0===this.Ll},enumerable:!1,configurable:!0}),t}();function Sf(t,e){return i(this,void 0,void 0,(function(){var n,r,i,s,a,u;return o(this,(function(o){switch(o.label){case 0:return n=tl(t),(s=n.Sl.get(e))?(r=s.targetId,n.pl.ka(r),i=s.view.Pl(),[3,4]):[3,1];case 1:return[4,Jc(n.Sh,$o(e))];case 2:return a=o.sent(),u=n.pl.ka(a.targetId),r=a.targetId,[4,Af(n,e,r,"current"===u)];case 3:i=o.sent(),n.$l&&Vh(n.gl,a),o.label=4;case 4:return[2,i]}}))}))}function Af(t,e,n,r){return i(this,void 0,void 0,(function(){var s,a,u,c,h,f;return o(this,(function(l){switch(l.label){case 0:return t.Bl=function(e,n,r){return function(t,e,n,r){return i(this,void 0,void 0,(function(){var i,s,a;return o(this,(function(o){switch(o.label){case 0:return(i=e.view.dl(n))._c?[4,Yc(t.Sh,e.query,!1).then((function(t){var n=t.documents;return e.view.dl(n,i)}))]:[3,2];case 1:i=o.sent(),o.label=2;case 2:return s=r&&r.Oe.get(e.targetId),a=e.view.Ti(i,t.$l,s),[2,(Vf(t,e.targetId,a.ml),a.snapshot)]}}))}))}(t,e,n,r)},[4,Yc(t.Sh,e,!0)];case 1:return s=l.sent(),a=new If(e,s.Pc),u=a.dl(s.documents),c=ha.Be(n,r&&"Offline"!==t.onlineState),h=a.Ti(u,t.$l,c),Vf(t,n,h.ml),f=new Tf(e,n,a),[2,(t.Sl.set(e,f),t.Dl.has(n)?t.Dl.get(n).push(e):t.Dl.set(n,[e]),h.snapshot)]}}))}))}function Nf(t,e){return i(this,void 0,void 0,(function(){var n,r,i;return o(this,(function(o){switch(o.label){case 0:return n=fi(t),r=n.Sl.get(e),(i=n.Dl.get(r.targetId)).length>1?[2,(n.Dl.set(r.targetId,i.filter((function(t){return!Zo(t,e)}))),void n.Sl.delete(e))]:n.$l?(n.pl.La(r.targetId),n.pl.Ca(r.targetId)?[3,2]:[4,Xc(n.Sh,r.targetId,!1).then((function(){n.pl.Ba(r.targetId),Fh(n.gl,r.targetId),Uf(n,r.targetId)})).catch(ic)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return Uf(n,r.targetId),[4,Xc(n.Sh,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}}))}))}function kf(t,e,n){return i(this,void 0,void 0,(function(){var r,i,s,a;return o(this,(function(o){switch(o.label){case 0:r=el(t),o.label=1;case 1:return o.trys.push([1,5,,6]),[4,function(t,e){var n,r=fi(t),i=Li.now(),o=e.reduce((function(t,e){return t.add(e.key)}),ra());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(t){return r.Ic.Zo(t,o).next((function(o){n=o;for(var s=[],a=0,u=e;a<u.length;a++){var c=u[a],h=ks(c,n.get(c.key));null!=h&&s.push(new Ps(c.key,h,yo(h.proto.mapValue),Es.exists(!0)))}return r.Ho.yi(t,i,s,e)}))})).then((function(t){var e=t.Fs(n);return{batchId:t.batchId,ci:e}}))}(r.Sh,e)];case 2:return i=o.sent(),r.pl.xa(i.batchId),function(t,e,n){var r=t.Ol[t.currentUser.R()];r||(r=new Gs(pi)),r=r.Ht(e,n),t.Ol[t.currentUser.R()]=r}(r,i.batchId,n),[4,Hf(r,i.ci)];case 3:return o.sent(),[4,Qh(r.gl)];case 4:return o.sent(),[3,6];case 5:return s=o.sent(),a=cu(s,"Failed to persist write"),n.reject(a),[3,6];case 6:return[2]}}))}))}function Df(t,e){return i(this,void 0,void 0,(function(){var n,r;return o(this,(function(i){switch(i.label){case 0:n=fi(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,zc(n.Sh,e)];case 2:return r=i.sent(),e.Oe.forEach((function(t,e){var r=n.Nl.get(e);r&&(hi(t.Ue.size+t.Qe.size+t.Ke.size<=1),t.Ue.size>0?r.yl=!0:t.Qe.size>0?hi(r.yl):t.Ke.size>0&&(hi(r.yl),r.yl=!1))})),[4,Hf(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,ic(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}}))}))}function Of(t,e,n){var r=fi(t);if(r.$l&&0===n||!r.$l&&1===n){var i=[];r.Sl.forEach((function(t,n){var r=n.view.zh(e);r.snapshot&&i.push(r.snapshot)})),function(t,e){var n=fi(t);n.onlineState=e;var r=!1;n.queries.forEach((function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].zh(e)&&(r=!0)})),r&&vf(n)}(r.Vl,e),i.length&&r.vl.uh(i),r.onlineState=e,r.$l&&r.pl.Ka(e)}}function Cf(t,e,n){return i(this,void 0,void 0,(function(){var r,i,s,a,u,c;return o(this,(function(o){switch(o.label){case 0:return(r=fi(t)).pl.qa(e,"rejected",n),i=r.Nl.get(e),(s=i&&i.key)?(a=(a=new Gs(Fi.J)).Ht(s,new wo(s,Ri.min())),u=ra().add(s),c=new ca(Ri.min(),new Map,new Ws(pi),a,u),[4,Df(r,c)]):[3,2];case 1:return o.sent(),r.xl=r.xl.remove(s),r.Nl.delete(e),qf(r),[3,4];case 2:return[4,Xc(r.Sh,e,!1).then((function(){return Uf(r,e,n)})).catch(ic)];case 3:o.sent(),o.label=4;case 4:return[2]}}))}))}function Pf(t,e){return i(this,void 0,void 0,(function(){var n,r,i;return o(this,(function(o){switch(o.label){case 0:n=fi(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,Bc(n.Sh,e)];case 2:return i=o.sent(),Mf(n,r,null),Rf(n,r),n.pl.Fa(r,"acknowledged"),[4,Hf(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,ic(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function xf(t,e,n){return i(this,void 0,void 0,(function(){var r,i;return o(this,(function(o){switch(o.label){case 0:r=fi(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(t,e){var n=fi(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(t){var r;return n.Ho.gi(t,e).next((function(e){return hi(null!==e),r=e.keys(),n.Ho.Ni(t,e)})).next((function(){return n.Ho.ki(t)})).next((function(){return n.Ic.Zo(t,r)}))}))}(r.Sh,e)];case 2:return i=o.sent(),Mf(r,e,n),Rf(r,e),r.pl.Fa(e,"rejected",n),[4,Hf(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,ic(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function Lf(t,e){return i(this,void 0,void 0,(function(){var n,r,i,s,a;return o(this,(function(o){switch(o.label){case 0:zh((n=fi(t)).gl)||oi("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,function(t){var e=fi(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(t){return e.Ho.bi(t)}))}(n.Sh)];case 2:return-1===(r=o.sent())?[2,void e.resolve()]:((i=n.kl.get(r)||[]).push(e),n.kl.set(r,i),[3,4]);case 3:return s=o.sent(),a=cu(s,"Initialization of waitForPendingWrites() operation failed"),e.reject(a),[3,4];case 4:return[2]}}))}))}function Rf(t,e){(t.kl.get(e)||[]).forEach((function(t){t.resolve()})),t.kl.delete(e)}function Mf(t,e,n){var r=fi(t),i=r.Ol[r.currentUser.R()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Ol[r.currentUser.R()]=i}}function Uf(t,e,n){void 0===n&&(n=null),t.pl.La(e);for(var r=0,i=t.Dl.get(e);r<i.length;r++){var o=i[r];t.Sl.delete(o),n&&t.vl.ql(o,n)}t.Dl.delete(e),t.$l&&t.Fl.kc(e).forEach((function(e){t.Fl.Mi(e)||jf(t,e)}))}function jf(t,e){var n=t.xl.get(e);null!==n&&(Fh(t.gl,n),t.xl=t.xl.remove(e),t.Nl.delete(n),qf(t))}function Vf(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof bf?(t.Fl.ir(o.key,e),Ff(t,o)):o instanceof wf?(oi("SyncEngine","Document no longer in limbo: "+o.key),t.Fl.cr(o.key,e),t.Fl.Mi(o.key)||jf(t,o.key)):ci()}}function Ff(t,e){var n=e.key;t.xl.get(n)||(oi("SyncEngine","New document in limbo: "+n),t.Cl.push(n),qf(t))}function qf(t){for(;t.Cl.length>0&&t.xl.size<t.bl;){var e=t.Cl.shift(),n=t.Ml.next();t.Nl.set(n,new Ef(e)),t.xl=t.xl.Ht(e,n),Vh(t.gl,new os($o(Go(e.path)),n,2,xi.U))}}function Hf(t,e,n){return i(this,void 0,void 0,(function(){var r,s,a,u;return o(this,(function(c){switch(c.label){case 0:return r=fi(t),s=[],a=[],u=[],r.Sl.nt()?[3,3]:(r.Sl.forEach((function(t,i){u.push(r.Bl(i,e,n).then((function(t){if(t){r.$l&&r.pl.qa(i.targetId,t.fromCache?"not-current":"current"),s.push(t);var e=jc.cc(i.targetId,t);a.push(e)}})))})),[4,Promise.all(u)]);case 1:return c.sent(),r.vl.uh(s),[4,function(t,e){return i(this,void 0,void 0,(function(){var n,r,i,s,a,u,c,h,f;return o(this,(function(o){switch(o.label){case 0:n=fi(t),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(t){return Qa.forEach(e,(function(e){return Qa.forEach(e.rc,(function(r){return n.persistence.mi.ir(t,e.targetId,r)})).next((function(){return Qa.forEach(e.oc,(function(r){return n.persistence.mi.cr(t,e.targetId,r)}))}))}))}))];case 2:return o.sent(),[3,4];case 3:if(!ru(r=o.sent()))throw r;return oi("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,s=e;i<s.length;i++)a=s[i],u=a.targetId,a.fromCache||(c=n.dc.get(u),h=c.Mt,f=c.Bt(h),n.dc=n.dc.Ht(u,f));return[2]}}))}))}(r.Sh,a)];case 2:c.sent(),c.label=3;case 3:return[2]}}))}))}function Bf(t,e){return i(this,void 0,void 0,(function(){var n,r;return o(this,(function(i){switch(i.label){case 0:return(n=fi(t)).currentUser.isEqual(e)?[3,3]:(oi("SyncEngine","User change. New user:",e.R()),[4,Hc(n.Sh,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.kl.forEach((function(t){t.forEach((function(t){t.reject(new bi(gi.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),t.kl.clear()}(n),n.pl.Qa(e,r.Ac,r.Rc),[4,Hf(n,r.mc)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}function Gf(t,e){var n=fi(t),r=n.Nl.get(e);if(r&&r.yl)return ra().add(r.key);var i=ra(),o=n.Dl.get(e);if(!o)return i;for(var s=0,a=o;s<a.length;s++){var u=a[s],c=n.Sl.get(u);i=i.ye(c.view.fl)}return i}function zf(t,e){return i(this,void 0,void 0,(function(){var n,r,i;return o(this,(function(o){switch(o.label){case 0:return[4,Yc((n=fi(t)).Sh,e.query,!0)];case 1:return r=o.sent(),i=e.view.Rl(r),[2,(n.$l&&Vf(n,e.targetId,i.ml),i)]}}))}))}function Kf(t){return i(this,void 0,void 0,(function(){var e;return o(this,(function(n){return[2,Qc((e=fi(t)).Sh).then((function(t){return Hf(e,t)}))]}))}))}function Wf(t,e,n,r){return i(this,void 0,void 0,(function(){var i,s;return o(this,(function(o){switch(o.label){case 0:return[4,function(t,e){var n=fi(t),r=fi(n.Ho);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(t){return r.Vi(t,e).next((function(e){return e?n.Ic.Zo(t,e):Qa.resolve(null)}))}))}((i=fi(t)).Sh,e)];case 1:return null===(s=o.sent())?[3,6]:"pending"!==n?[3,3]:[4,Qh(i.gl)];case 2:return o.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(Mf(i,e,r||null),Rf(i,e),function(t,e){fi(fi(t).Ho).Fi(e)}(i.Sh,e)):ci(),o.label=4;case 4:return[4,Hf(i,s)];case 5:return o.sent(),[3,7];case 6:oi("SyncEngine","Cannot apply mutation batch with id: "+e),o.label=7;case 7:return[2]}}))}))}function Jf(t,e){return i(this,void 0,void 0,(function(){var n,r,i,s,a,u,c,h;return o(this,(function(o){switch(o.label){case 0:return tl(n=fi(t)),el(n),!0!==e||!0===n.Ll?[3,3]:(r=n.pl.Sa(),[4,Xf(n,r.rt())]);case 1:return i=o.sent(),n.Ll=!0,[4,sf(n.gl,!0)];case 2:for(o.sent(),s=0,a=i;s<a.length;s++)u=a[s],Vh(n.gl,u);return[3,7];case 3:return!1!==e||!1===n.Ll?[3,7]:(c=[],h=Promise.resolve(),n.Dl.forEach((function(t,e){n.pl.$a(e)?c.push(e):h=h.then((function(){return Uf(n,e),Xc(n.Sh,e,!0)})),Fh(n.gl,e)})),[4,h]);case 4:return o.sent(),[4,Xf(n,c)];case 5:return o.sent(),function(t){var e=fi(t);e.Nl.forEach((function(t,n){Fh(e.gl,n)})),e.Fl.Mc(),e.Nl=new Map,e.xl=new Gs(Fi.J)}(n),n.Ll=!1,[4,sf(n.gl,!1)];case 6:o.sent(),o.label=7;case 7:return[2]}}))}))}function Xf(t,e,n){return i(this,void 0,void 0,(function(){var n,r,i,s,a,u,c,h,f,l,d,p,v,m;return o(this,(function(o){switch(o.label){case 0:n=fi(t),r=[],i=[],s=0,a=e,o.label=1;case 1:return s<a.length?(u=a[s],c=void 0,(h=n.Dl.get(u))&&0!==h.length?[4,Jc(n.Sh,$o(h[0]))]:[3,7]):[3,13];case 2:c=o.sent(),f=0,l=h,o.label=3;case 3:return f<l.length?(d=l[f],p=n.Sl.get(d),[4,zf(n,p)]):[3,6];case 4:(v=o.sent()).snapshot&&i.push(v.snapshot),o.label=5;case 5:return f++,[3,3];case 6:return[3,11];case 7:return[4,$c(n.Sh,u)];case 8:return m=o.sent(),[4,Jc(n.Sh,m)];case 9:return c=o.sent(),[4,Af(n,Yf(m),u,!1)];case 10:o.sent(),o.label=11;case 11:r.push(c),o.label=12;case 12:return s++,[3,1];case 13:return[2,(n.vl.uh(i),r)]}}))}))}function Yf(t){return Bo(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function $f(t){var e=fi(t);return fi(fi(e.Sh).persistence).Ko()}function Qf(t,e,n,r){return i(this,void 0,void 0,(function(){var i,s,a;return o(this,(function(o){switch(o.label){case 0:return(i=fi(t)).Ll?(oi("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Dl.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,Qc(i.Sh)];case 3:return s=o.sent(),a=ca.$e(e,"current"===n),[4,Hf(i,s,a)];case 4:return o.sent(),[3,8];case 5:return[4,Xc(i.Sh,e,!0)];case 6:return o.sent(),Uf(i,e,r),[3,8];case 7:ci(),o.label=8;case 8:return[2]}}))}))}function Zf(t,e,n){return i(this,void 0,void 0,(function(){var r,i,s,a,u,c,h,f,l,d;return o(this,(function(p){switch(p.label){case 0:if(!(r=tl(t)).Ll)return[3,10];i=0,s=e,p.label=1;case 1:return i<s.length?(a=s[i],r.Dl.has(a)?(oi("SyncEngine","Adding an already active target "+a),[3,5]):[4,$c(r.Sh,a)]):[3,6];case 2:return u=p.sent(),[4,Jc(r.Sh,u)];case 3:return c=p.sent(),[4,Af(r,Yf(u),c.targetId,!1)];case 4:p.sent(),Vh(r.gl,c),p.label=5;case 5:return i++,[3,1];case 6:h=function(t){return o(this,(function(e){switch(e.label){case 0:return r.Dl.has(t)?[4,Xc(r.Sh,t,!1).then((function(){Fh(r.gl,t),Uf(r,t)})).catch(ic)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))},f=0,l=n,p.label=7;case 7:return f<l.length?(d=l[f],[5,h(d)]):[3,10];case 8:p.sent(),p.label=9;case 9:return f++,[3,7];case 10:return[2]}}))}))}function tl(t){var e=fi(t);return e.gl.Ch.Bh=Df.bind(null,e),e.gl.Ch.Sn=Gf.bind(null,e),e.gl.Ch.$h=Cf.bind(null,e),e.vl.uh=df.bind(null,e.Vl),e.vl.ql=pf.bind(null,e.Vl),e}function el(t){var e=fi(t);return e.gl.Ch.qh=Pf.bind(null,e),e.gl.Ch.Uh=xf.bind(null,e),e}var nl=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return i(this,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return this.Kt=Dh(t.gu.T),this.pl=this.jl(t),this.persistence=this.Gl(t),[4,this.persistence.start()];case 1:return e.sent(),this.zl=this.Hl(t),this.Sh=this.Jl(t),[2]}}))}))},t.prototype.Hl=function(t){return null},t.prototype.Jl=function(t){return qc(this.persistence,new Vc,t.Yl,this.Kt)},t.prototype.Gl=function(t){return new ch(fh.ra,this.Kt)},t.prototype.jl=function(t){return new Ih},t.prototype.terminate=function(){return i(this,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return this.zl&&this.zl.stop(),[4,this.pl.$o()];case 1:return t.sent(),[4,this.persistence.$o()];case 2:return t.sent(),[2]}}))}))},t}(),rl=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Xl=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return n(e,t),e.prototype.initialize=function(e){return i(this,void 0,void 0,(function(){return o(this,(function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,Zc(this.Sh)];case 2:return n.sent(),[4,this.Xl.initialize(this,e)];case 3:return n.sent(),[4,el(this.Xl.fa)];case 4:return n.sent(),[4,Qh(this.Xl.gl)];case 5:return n.sent(),[2]}}))}))},e.prototype.Jl=function(t){return qc(this.persistence,new Vc,t.Yl,this.Kt)},e.prototype.Hl=function(t){var e=this.persistence.mi.dr;return new Ic(e,t.fs)},e.prototype.Gl=function(t){var e=Mc(t.gu.T,t.gu.persistenceKey),n=void 0!==this.cacheSizeBytes?rc.Zs(this.cacheSizeBytes):rc.ni;return new xc(this.synchronizeTabs,e,t.clientId,n,t.fs,Nh(),kh(),this.Kt,this.pl,!!this.forceOwnership)},e.prototype.jl=function(t){return new Ih},e}(nl),il=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Xl=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return n(e,t),e.prototype.initialize=function(e){return i(this,void 0,void 0,(function(){var n,r=this;return o(this,(function(s){switch(s.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return s.sent(),n=this.Xl.fa,this.pl instanceof wh?(this.pl.fa={nu:Wf.bind(null,n),su:Qf.bind(null,n),iu:Zf.bind(null,n),Ko:$f.bind(null,n),eu:Kf.bind(null,n)},[4,this.pl.start()]):[3,3];case 2:s.sent(),s.label=3;case 3:return[4,this.persistence.yo((function(t){return i(r,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return[4,Jf(this.Xl.fa,t)];case 1:return e.sent(),this.zl&&(t&&!this.zl.Ir?this.zl.start(this.Sh):t||this.zl.stop()),[2]}}))}))}))];case 4:return s.sent(),[2]}}))}))},e.prototype.jl=function(t){var e=Nh();if(!wh.Wn(e))throw new bi(gi.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Mc(t.gu.T,t.gu.persistenceKey);return new wh(e,t.fs,n,t.clientId,t.Yl)},e}(rl),ol=function(){function t(){}return t.prototype.initialize=function(t,e){return i(this,void 0,void 0,(function(){var n=this;return o(this,(function(r){switch(r.label){case 0:return this.Sh?[3,2]:(this.Sh=t.Sh,this.pl=t.pl,this.Dh=this.Zl(e),this.gl=this.t_(e),this.Vl=this.e_(e),this.fa=this.n_(e,!t.synchronizeTabs),this.pl.da=function(t){return Of(n.fa,t,1)},this.gl.Ch.s_=Bf.bind(null,this.fa),[4,sf(this.gl,this.fa.$l)]);case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},t.prototype.e_=function(t){return new hf},t.prototype.Zl=function(t){var e,n=Dh(t.gu.T),r=(e=t.gu,new Ah(e));return function(t,e,n){return new Lh(t,e,n)}(t.credentials,r,n)},t.prototype.t_=function(t){var e,n,r,i,o,s=this;return e=this.Sh,n=this.Dh,r=t.fs,i=function(t){return Of(s.fa,t,0)},o=Eh.Wn()?new Eh:new Th,new Mh(e,n,r,i,o)},t.prototype.n_=function(t,e){return function(t,e,n,r,i,o,s){var a=new _f(t,e,n,r,i,o);return s&&(a.Ll=!0),a}(this.Sh,this.gl,this.Vl,this.pl,t.Yl,t.bl,e)},t.prototype.terminate=function(){return function(t){return i(this,void 0,void 0,(function(){var e;return o(this,(function(n){switch(n.label){case 0:return e=fi(t),oi("RemoteStore","RemoteStore shutting down."),e.Fh.add(5),[4,jh(e)];case 1:return n.sent(),e.kh.$o(),e.Mh.set("Unknown"),[2]}}))}))}(this.gl)},t}(),sl=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.i_(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.i_(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.r_=function(){this.muted=!0},t.prototype.i_=function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)},t}(),al=(function(){function t(t,e){var n=this;this.o_=t,this.Kt=e,this.metadata=new $a,this.buffer=new Uint8Array,this.c_=new TextDecoder("utf-8"),this.a_().then((function(t){t&&t.il()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))}),(function(t){return n.metadata.reject(t)}))}t.prototype.close=function(){return this.o_.cancel()},t.prototype.getMetadata=function(){return i(this,void 0,void 0,(function(){return o(this,(function(t){return[2,this.metadata.promise]}))}))},t.prototype.Kl=function(){return i(this,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.a_())]}}))}))},t.prototype.a_=function(){return i(this,void 0,void 0,(function(){var t,e,n,r;return o(this,(function(i){switch(i.label){case 0:return[4,this.u_()];case 1:return null===(t=i.sent())?[2,null]:(e=this.c_.decode(t),n=Number(e),isNaN(n)&&this.h_("length string ("+e+") is not valid number"),[4,this.l_(n)]);case 2:return r=i.sent(),[2,new yf(JSON.parse(r),t.length+n)]}}))}))},t.prototype.__=function(){return this.buffer.findIndex((function(t){return t==="{".charCodeAt(0)}))},t.prototype.u_=function(){return i(this,void 0,void 0,(function(){var t,e;return o(this,(function(n){switch(n.label){case 0:return this.__()<0?[4,this.f_()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.__())<0&&this.h_("Reached the end of bundle when a length string is expected."),e=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),e)])}}))}))},t.prototype.l_=function(t){return i(this,void 0,void 0,(function(){var e;return o(this,(function(n){switch(n.label){case 0:return this.buffer.length<t?[4,this.f_()]:[3,3];case 1:n.sent()&&this.h_("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return e=this.c_.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),e)]}}))}))},t.prototype.h_=function(t){throw this.o_.cancel(),new Error("Invalid bundle format: "+t)},t.prototype.f_=function(){return i(this,void 0,void 0,(function(){var t,e;return o(this,(function(n){switch(n.label){case 0:return[4,this.o_.read()];case 1:return(t=n.sent()).done||((e=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e),[2,t.done]}}))}))}}(),function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new bi(gi.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this.d_=new Vi(t)}return t.prototype.isEqual=function(t){return this.d_.isEqual(t.d_)},t}()),ul=function(t){this._methodName=t};function cl(t,e,n){if(!n)throw new bi(gi.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function hl(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new bi(gi.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function fl(t,e,n,r){if(!0===e&&!0===r)throw new bi(gi.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function ll(t){if(!Fi.Et(t))throw new bi(gi.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function dl(t){if(Fi.Et(t))throw new bi(gi.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function pl(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":ci()}function vl(t,e){if("_delegate"in t&&(t=t._),!(t instanceof e)){if(e.name===t.constructor.name)throw new bi(gi.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=pl(t);throw new bi(gi.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function ml(t,e){if(e<=0)throw new bi(gi.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var yl=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new bi(gi.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new bi(gi.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,fl("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},t}(),gl=new Map,bl=function(){function t(t,e){this.w_="(lite)",this.E_=new yl({}),this.T_=!1,t instanceof Ai?(this.I_=t,this.m_=new Di):(this.A_=t,this.I_=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new bi(gi.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ai(t.options.projectId)}(t),this.m_=new Oi(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this.A_)throw new bi(gi.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.A_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"R_",{get:function(){return this.T_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"P_",{get:function(){return void 0!==this.y_},enumerable:!1,configurable:!0}),t.prototype.g_=function(t){if(this.T_)throw new bi(gi.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this.E_=new yl(t),void 0!==t.credentials&&(this.m_=function(t){if(!t)return new Di;switch(t.type){case"gapi":var e=t.client;return hi(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new Pi(e,t.sessionIndex||"0");case"provider":return t.client;default:throw new bi(gi.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype.V_=function(){return this.E_},t.prototype.p_=function(){return this.T_=!0,this.E_},t.prototype._delete=function(){return this.y_||(this.y_=this.b_()),this.y_},t.prototype.b_=function(){return(t=gl.get(this))&&(oi("ComponentProvider","Removing Datastore"),gl.delete(this),t.terminate()),Promise.resolve();var t},t}(),wl=function(){function t(t,e,n){this.v_=e,this.S_=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"D_",{get:function(){return this.S_.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this.S_.path.et()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this.S_.path.ot()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new Tl(this.firestore,this.v_,this.S_.path.Z())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this.S_)},t}(),Il=function(){function t(t,e,n){this.v_=e,this.C_=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this.C_)},t}(),Tl=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,Go(r))||this).firestore=e,i.D_=r,i.type="collection",i}return n(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this.C_.path.et()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.C_.path.ot()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this.D_.Z();return t.nt()?null:new wl(this.firestore,null,new Fi(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this.D_)},e}(Il);function El(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t instanceof Ii&&(t=t._),cl("collection","path",e),t instanceof bl)return dl(n=Ui.ct.apply(Ui,c([e],r))),new Tl(t,null,n);if(!(t instanceof wl||t instanceof Tl))throw new bi(gi.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return dl(n=Ui.ct.apply(Ui,c([t.path],r)).child(Ui.ct(e))),new Tl(t.firestore,null,n)}function _l(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t instanceof Ii&&(t=t._),1===arguments.length&&(e=di.t()),cl("doc","path",e),t instanceof bl)return ll(n=Ui.ct.apply(Ui,c([e],r))),new wl(t,null,new Fi(n));if(!(t instanceof wl||t instanceof Tl))throw new bi(gi.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return ll(n=t.D_.child(Ui.ct.apply(Ui,c([e],r)))),new wl(t.firestore,t instanceof Tl?t.v_:null,new Fi(n))}function Sl(t,e){return t instanceof Ii&&(t=t._),e instanceof Ii&&(e=e._),(t instanceof wl||t instanceof Tl)&&(e instanceof wl||e instanceof Tl)&&t.firestore===e.firestore&&t.path===e.path&&t.v_===e.v_}function Al(t,e){return t instanceof Ii&&(t=t._),e instanceof Ii&&(e=e._),t instanceof Il&&e instanceof Il&&t.firestore===e.firestore&&Zo(t.C_,e.C_)&&t.v_===e.v_}var Nl=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new bi(gi.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new bi(gi.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this.x_=t,this.N_=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this.x_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this.N_},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.x_===t.x_&&this.N_===t.N_},t.prototype.toJSON=function(){return{latitude:this.x_,longitude:this.N_}},t.prototype.K=function(t){return pi(this.x_,t.x_)||pi(this.N_,t.N_)},t}(),kl=/^__.*__$/,Dl=function(){function t(t,e,n){this.data=t,this.zt=e,this.fieldTransforms=n}return t.prototype.F_=function(t,e){return null!==this.zt?new Ps(t,this.data,this.zt,e,this.fieldTransforms):new Cs(t,this.data,e,this.fieldTransforms)},t}(),Ol=function(){function t(t,e,n){this.data=t,this.zt=e,this.fieldTransforms=n}return t.prototype.F_=function(t,e){return new Ps(t,this.data,this.zt,e,this.fieldTransforms)},t}();function Cl(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ci()}}var Pl=function(){function t(t,e,n,r,i,o){this.settings=t,this.T=e,this.Kt=n,this.ignoreUndefinedProperties=r,void 0===i&&this.O_(),this.fieldTransforms=i||[],this.zt=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"k_",{get:function(){return this.settings.k_},enumerable:!1,configurable:!0}),t.prototype.M_=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.T,this.Kt,this.ignoreUndefinedProperties,this.fieldTransforms,this.zt)},t.prototype.L_=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.M_({path:n,B_:!1});return r.q_(t),r},t.prototype.U_=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.M_({path:n,B_:!1});return r.O_(),r},t.prototype.Q_=function(t){return this.M_({path:void 0,B_:!0})},t.prototype.K_=function(t){return Ql(t,this.settings.methodName,this.settings.W_||!1,this.path,this.settings.j_)},t.prototype.contains=function(t){return void 0!==this.zt.find((function(e){return t.st(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.st(e.field)}))},t.prototype.O_=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.q_(this.path.get(t))},t.prototype.q_=function(t){if(0===t.length)throw this.K_("Document fields must not be empty");if(Cl(this.k_)&&kl.test(t))throw this.K_('Document fields cannot begin and end with "__"')},t}(),xl=function(){function t(t,e,n){this.T=t,this.ignoreUndefinedProperties=e,this.Kt=n||Dh(t)}return t.prototype.G_=function(t,e,n,r){return void 0===r&&(r=!1),new Pl({k_:t,methodName:e,j_:n,path:Vi.at(),B_:!1,W_:r},this.T,this.Kt,this.ignoreUndefinedProperties)},t}();function Ll(t){var e=t.p_(),n=Dh(t.I_);return new xl(t.I_,!!e.ignoreUndefinedProperties,n)}function Rl(t,e,n,r,i,o){void 0===o&&(o={});var s=t.G_(o.merge||o.mergeFields?2:0,e,n,i);Jl("Data must be an object, but it was:",s,r);var a,u,c=Kl(r,s);if(o.merge)a=new Gi(s.zt),u=s.fieldTransforms;else if(o.mergeFields){for(var h=[],f=0,l=o.mergeFields;f<l.length;f++){var d=Xl(e,l[f],n);if(!s.contains(d))throw new bi(gi.INVALID_ARGUMENT,"Field '"+d+"' is specified in your field mask but missing from your input data.");Zl(h,d)||h.push(d)}a=new Gi(h),u=s.fieldTransforms.filter((function(t){return a.It(t.field)}))}else a=null,u=s.fieldTransforms;return new Dl(new vo(c),a,u)}var Ml=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.z_=function(t){if(2!==t.k_)throw 1===t.k_?t.K_(this._methodName+"() can only appear at the top level of your update data"):t.K_(this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.zt.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(ul);function Ul(t,e,n){return new Pl({k_:3,j_:e.settings.j_,methodName:t._methodName,B_:n},e.T,e.Kt,e.ignoreUndefinedProperties)}var jl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.z_=function(t){return new Is(t.path,new ds)},e.prototype.isEqual=function(t){return t instanceof e},e}(ul),Vl=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).H_=n,r}return n(e,t),e.prototype.z_=function(t){var e=Ul(this,t,!0),n=this.H_.map((function(t){return zl(t,e)})),r=new ps(n);return new Is(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(ul),Fl=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).H_=n,r}return n(e,t),e.prototype.z_=function(t){var e=Ul(this,t,!0),n=this.H_.map((function(t){return zl(t,e)})),r=new ms(n);return new Is(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(ul),ql=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).J_=n,r}return n(e,t),e.prototype.z_=function(t){var e=new gs(t.Kt,us(t.Kt,this.J_));return new Is(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(ul);function Hl(t,e,n,r){var i=t.G_(1,e,n);Jl("Data must be an object, but it was:",i,r);var o=[],s=new mo;Hi(r,(function(t,r){var a=$l(e,t,n);r instanceof Ii&&(r=r._);var u=i.U_(a);if(r instanceof Ml)o.push(a);else{var c=zl(r,u);null!=c&&(o.push(a),s.set(a,c))}}));var a=new Gi(o);return new Ol(s.yt(),a,i.fieldTransforms)}function Bl(t,e,n,r,i,o){var s=t.G_(1,e,n),a=[Xl(e,r,n)],u=[i];if(o.length%2!=0)throw new bi(gi.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)a.push(Xl(e,o[c])),u.push(o[c+1]);for(var h=[],f=new mo,l=a.length-1;l>=0;--l)if(!Zl(h,a[l])){var d=a[l],p=u[l];p instanceof Ii&&(p=p._);var v=s.U_(d);if(p instanceof Ml)h.push(d);else{var m=zl(p,v);null!=m&&(h.push(d),f.set(d,m))}}var y=new Gi(h);return new Ol(f.yt(),y,s.fieldTransforms)}function Gl(t,e,n,r){return void 0===r&&(r=!1),zl(n,t.G_(r?4:3,e))}function zl(t,e){if(t instanceof Ii&&(t=t._),Wl(t))return Jl("Unsupported field value:",e,t),Kl(t,e);if(t instanceof ul)return function(t,e){if(!Cl(e.k_))throw e.K_(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.K_(t._methodName+"() is not currently supported inside arrays");var n=t.z_(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(e.path&&e.zt.push(e.path),t instanceof Array){if(e.settings.B_&&4!==e.k_)throw e.K_("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=zl(o[i],e.Q_(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(t instanceof Ii&&(t=t._),null===t)return{nullValue:"NULL_VALUE"};if("number"==typeof t)return us(e.Kt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=Li.fromDate(t);return{timestampValue:Ia(e.Kt,n)}}if(t instanceof Li)return n=new Li(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:Ia(e.Kt,n)};if(t instanceof Nl)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof wi)return{bytesValue:Ta(e.Kt,t.l)};if(t instanceof wl){n=e.T;var r=t.firestore.I_;if(!r.isEqual(n))throw e.K_("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:Sa(t.firestore.I_||e.T,t.S_.path)}}if(void 0===t&&e.ignoreUndefinedProperties)return null;throw e.K_("Unsupported field value: "+pl(t))}(t,e)}function Kl(t,e){var n={};return Bi(t)?e.path&&e.path.length>0&&e.zt.push(e.path):Hi(t,(function(t,r){var i=zl(r,e.L_(t));null!=i&&(n[t]=i)})),{mapValue:{fields:n}}}function Wl(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Li||t instanceof Nl||t instanceof wi||t instanceof wl||t instanceof ul)}function Jl(t,e,n){if(!Wl(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=pl(n);throw"an object"===r?e.K_(t+" a custom object"):e.K_(t+" "+r)}}function Xl(t,e,n){if(e instanceof Ii&&(e=e._),e instanceof al)return e.d_;if("string"==typeof e)return $l(t,e);throw Ql("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var Yl=new RegExp("[~\\*/\\[\\]]");function $l(t,e,n){if(e.search(Yl)>=0)throw Ql("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(al.bind.apply(al,c([void 0],e.split("."))))).d_}catch(r){throw Ql("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function Ql(t,e,n,r,i){var o=r&&!r.nt(),s=void 0!==i,a="Function "+e+"() called with invalid data";n&&(a+=" (via `toFirestore()`)");var u="";return(o||s)&&(u+=" (found",o&&(u+=" in field "+r),s&&(u+=" in document "+i),u+=")"),new bi(gi.INVALID_ARGUMENT,(a+=". ")+t+u)}function Zl(t,e){return t.some((function(t){return t.isEqual(e)}))}var td=function(){function t(t){this.Dh=t,this.Y_=new Map,this.mutations=[],this.X_=!1,this.Z_=null,this.tf=new Set}return t.prototype.ef=function(t){return i(this,void 0,void 0,(function(){var e,n=this;return o(this,(function(r){switch(r.label){case 0:if(this.nf(),this.mutations.length>0)throw new bi(gi.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return i(this,void 0,void 0,(function(){var n,r,i,s,a,u;return o(this,(function(o){switch(o.label){case 0:return n=fi(t),r=Ca(n.Kt)+"/documents",i={documents:e.map((function(t){return Na(n.Kt,t)}))},[4,n.Cu("BatchGetDocuments",r,i)];case 1:return s=o.sent(),a=new Map,s.forEach((function(t){var e=function(t,e){return"found"in e?function(t,e){hi(!!e.found),e.found.name,e.found.updateTime;var n=ka(t,e.found.name),r=_a(e.found.updateTime),i=new vo({mapValue:{fields:e.found.fields}});return new bo(n,r,i,{})}(t,e):"missing"in e?function(t,e){hi(!!e.missing),hi(!!e.readTime);var n=ka(t,e.missing),r=_a(e.readTime);return new wo(n,r)}(t,e):ci()}(n.Kt,t);a.set(e.key.toString(),e)})),u=[],[2,(e.forEach((function(t){var e=a.get(t.toString());hi(!!e),u.push(e)})),u)]}}))}))}(this.Dh,t)];case 1:return[2,((e=r.sent()).forEach((function(t){t instanceof wo||t instanceof bo?n.sf(t):ci()})),e)]}}))}))},t.prototype.set=function(t,e){this.write(e.F_(t,this.Gt(t))),this.tf.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.F_(t,this.rf(t)))}catch(t){this.Z_=t}this.tf.add(t.toString())},t.prototype.delete=function(t){this.write(new Vs(t,this.Gt(t))),this.tf.add(t.toString())},t.prototype.commit=function(){return i(this,void 0,void 0,(function(){var t,e=this;return o(this,(function(n){switch(n.label){case 0:if(this.nf(),this.Z_)throw this.Z_;return t=this.Y_,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(t,n){var r=Fi.ft(n);e.mutations.push(new Fs(r,e.Gt(r)))})),[4,function(t,e){return i(this,void 0,void 0,(function(){var n,r,i;return o(this,(function(o){switch(o.label){case 0:return n=fi(t),r=Ca(n.Kt)+"/documents",i={writes:e.map((function(t){return Ra(n.Kt,t)}))},[4,n.bu("Commit",r,i)];case 1:return o.sent(),[2]}}))}))}(this.Dh,this.mutations)];case 1:return n.sent(),this.X_=!0,[2]}}))}))},t.prototype.sf=function(t){var e;if(t instanceof bo)e=t.version;else{if(!(t instanceof wo))throw ci();e=Ri.min()}var n=this.Y_.get(t.key.toString());if(n){if(!e.isEqual(n))throw new bi(gi.ABORTED,"Document version changed between two reads.")}else this.Y_.set(t.key.toString(),e)},t.prototype.Gt=function(t){var e=this.Y_.get(t.toString());return!this.tf.has(t.toString())&&e?Es.updateTime(e):Es.Wt()},t.prototype.rf=function(t){var e=this.Y_.get(t.toString());if(!this.tf.has(t.toString())&&e){if(e.isEqual(Ri.min()))throw new bi(gi.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Es.updateTime(e)}return Es.exists(!0)},t.prototype.write=function(t){this.nf(),this.mutations.push(t)},t.prototype.nf=function(){},t}(),ed=function(){function t(t,e,n,r){this.fs=t,this.Dh=e,this.updateFunction=n,this.Ts=r,this.cf=5,this.zu=new Oh(this.fs,"transaction_retry")}return t.prototype.run=function(){this.af()},t.prototype.af=function(){var t=this;this.zu.Bu((function(){return i(t,void 0,void 0,(function(){var t,e,n=this;return o(this,(function(r){return t=new td(this.Dh),(e=this.uf(t))&&e.then((function(e){n.fs.ys((function(){return t.commit().then((function(){n.Ts.resolve(e)})).catch((function(t){n.hf(t)}))}))})).catch((function(t){n.hf(t)})),[2]}))}))}))},t.prototype.uf=function(t){try{var e=this.updateFunction(t);return!Qi(e)&&e.catch&&e.then?e:(this.Ts.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.Ts.reject(t),null}},t.prototype.hf=function(t){var e=this;this.cf>0&&this.lf(t)?(this.cf-=1,this.fs.ys((function(){return e.af(),Promise.resolve()}))):this.Ts.reject(t)},t.prototype.lf=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!Hs(e)}return!1},t}(),nd=function(){function t(t,e,n){var r=this;this.credentials=t,this.fs=e,this.gu=n,this.user=Ni.UNAUTHENTICATED,this.clientId=di.t(),this._f=function(){},this.N=new $a,this.credentials.S((function(t){oi("FirestoreClient","Received user=",t.uid),r.user=t,r._f(t),r.N.resolve()}))}return t.prototype.getConfiguration=function(){return i(this,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return[4,this.N.promise];case 1:return[2,(t.sent(),{fs:this.fs,gu:this.gu,clientId:this.clientId,credentials:this.credentials,Yl:this.user,bl:100})]}}))}))},t.prototype.ff=function(t){var e=this;this._f=t,this.N.promise.then((function(){return e._f(e.user)}))},t.prototype.df=function(){if(this.fs.wf)throw new bi(gi.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.fs.Ef();var e=new $a;return this.fs.Tf((function(){return i(t,void 0,void 0,(function(){var t,n;return o(this,(function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.If?[4,this.If.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.mf?[4,this.mf.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.D(),e.resolve(),[3,6];case 5:return t=r.sent(),n=cu(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}}))}))})),e.promise},t}();function rd(t,e){return i(this,void 0,void 0,(function(){var n,r,s=this;return o(this,(function(a){switch(a.label){case 0:return t.fs.Af(),oi("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=a.sent(),[4,e.initialize(n)];case 2:return a.sent(),r=n.Yl,t.ff((function(n){r.isEqual(n)||(r=n,t.fs.vo((function(){return i(s,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return[4,Hc(e.Sh,n)];case 1:return t.sent(),[2]}}))}))})))})),e.persistence.Vo((function(){return t.terminate()})),t.mf=e,[2]}}))}))}function id(t,e){return i(this,void 0,void 0,(function(){var n,r;return o(this,(function(s){switch(s.label){case 0:return t.fs.Af(),[4,od(t)];case 1:return n=s.sent(),oi("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=s.sent(),[4,e.initialize(n,r)];case 3:return s.sent(),t.ff((function(n){return t.fs.vo((function(){return function(t,e){return i(this,void 0,void 0,(function(){var n,r;return o(this,(function(i){switch(i.label){case 0:return(n=fi(t)).fs.Af(),oi("RemoteStore","RemoteStore received new credentials"),r=zh(n),n.Fh.add(3),[4,jh(n)];case 1:return i.sent(),r&&n.Mh.set("Unknown"),[4,n.Ch.s_(e)];case 2:return i.sent(),n.Fh.delete(3),[4,Uh(n)];case 3:return i.sent(),[2]}}))}))}(e.gl,n)}))})),t.If=e,[2]}}))}))}function od(t){return i(this,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return t.mf?[3,2]:(oi("FirestoreClient","Using default OfflineComponentProvider"),[4,rd(t,new nl)]);case 1:e.sent(),e.label=2;case 2:return[2,t.mf]}}))}))}function sd(t){return i(this,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return t.If?[3,2]:(oi("FirestoreClient","Using default OnlineComponentProvider"),[4,id(t,new ol)]);case 1:e.sent(),e.label=2;case 2:return[2,t.If]}}))}))}function ad(t){return od(t).then((function(t){return t.persistence}))}function ud(t){return od(t).then((function(t){return t.Sh}))}function cd(t){return sd(t).then((function(t){return t.gl}))}function hd(t){return sd(t).then((function(t){return t.fa}))}function fd(t){return i(this,void 0,void 0,(function(){var e,n;return o(this,(function(r){switch(r.label){case 0:return[4,sd(t)];case 1:return e=r.sent(),[2,((n=e.Vl).Gh=Sf.bind(null,e.fa),n.Jh=Nf.bind(null,e.fa),n)]}}))}))}function ld(t,e,n){var r=this;void 0===n&&(n={});var s=new $a;return t.fs.ys((function(){return i(r,void 0,void 0,(function(){var r;return o(this,(function(i){switch(i.label){case 0:return r=function(t,e,n,r,i){var o=new sl({next:function(o){e.ys((function(){return lf(t,s)}));var a=o.docs.has(n);!a&&o.fromCache?i.reject(new bi(gi.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&o.fromCache&&r&&"server"===r.source?i.reject(new bi(gi.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),s=new mf(Go(n.path),o,{includeMetadataChanges:!0,sl:!0});return ff(t,s)},[4,fd(t)];case 1:return[2,r.apply(void 0,[i.sent(),t.fs,e,n,s])]}}))}))})),s.promise}function dd(t,e,n){var r=this;void 0===n&&(n={});var s=new $a;return t.fs.ys((function(){return i(r,void 0,void 0,(function(){var r;return o(this,(function(i){switch(i.label){case 0:return r=function(t,e,n,r,i){var o=new sl({next:function(n){e.ys((function(){return lf(t,s)})),n.fromCache&&"server"===r.source?i.reject(new bi(gi.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),s=new mf(n,o,{includeMetadataChanges:!0,sl:!0});return ff(t,s)},[4,fd(t)];case 1:return[2,r.apply(void 0,[i.sent(),t.fs,e,n,s])]}}))}))})),s.promise}var pd=function(){function t(){var t=this;this.Rf=Promise.resolve(),this.Pf=[],this.yf=!1,this.gf=[],this.Vf=null,this.pf=!1,this.bf=[],this.zu=new Oh(this,"async_queue_retry"),this.vf=function(){var e=kh();e&&oi("AsyncQueue","Visibility state changed to "+e.visibilityState),t.zu.Uu()};var e=kh();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.vf)}return Object.defineProperty(t.prototype,"wf",{get:function(){return this.yf},enumerable:!1,configurable:!0}),t.prototype.ys=function(t){this.enqueue(t)},t.prototype.Tf=function(t){this.Sf(),this.Df(t)},t.prototype.Ef=function(){if(!this.yf){this.yf=!0;var t=kh();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.vf)}},t.prototype.enqueue=function(t){return this.Sf(),this.yf?new Promise((function(t){})):this.Df(t)},t.prototype.vo=function(t){var e=this;this.ys((function(){return e.Pf.push(t),e.Cf()}))},t.prototype.Cf=function(){return i(this,void 0,void 0,(function(){var t,e=this;return o(this,(function(n){switch(n.label){case 0:if(0===this.Pf.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.Pf[0]()];case 2:return n.sent(),this.Pf.shift(),this.zu.reset(),[3,4];case 3:if(!ru(t=n.sent()))throw t;return oi("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.Pf.length>0&&this.zu.Bu((function(){return e.Cf()})),n.label=5;case 5:return[2]}}))}))},t.prototype.Df=function(t){var e=this,n=this.Rf.then((function(){return e.pf=!0,t().catch((function(t){throw e.Vf=t,e.pf=!1,si("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t})).then((function(t){return e.pf=!1,t}))}));return this.Rf=n,n},t.prototype.mr=function(t,e,n){var r=this;this.Sf(),this.bf.indexOf(t)>-1&&(e=0);var i=uu.Is(this,t,e,n,(function(t){return r.xf(t)}));return this.gf.push(i),i},t.prototype.Sf=function(){this.Vf&&ci()},t.prototype.Af=function(){},t.prototype.Nf=function(){return i(this,void 0,void 0,(function(){var t;return o(this,(function(e){switch(e.label){case 0:return[4,t=this.Rf];case 1:e.sent(),e.label=2;case 2:if(t!==this.Rf)return[3,0];e.label=3;case 3:return[2]}}))}))},t.prototype.Ff=function(t){for(var e=0,n=this.gf;e<n.length;e++)if(n[e].ds===t)return!0;return!1},t.prototype.Of=function(t){var e=this;return this.Nf().then((function(){e.gf.sort((function(t,e){return t.ws-e.ws}));for(var n=0,r=e.gf;n<r.length;n++){var i=r[n];if(i.Ps(),"all"!==t&&i.ds===t)break}return e.Nf()}))},t.prototype.kf=function(t){this.bf.push(t)},t.prototype.xf=function(t){var e=this.gf.indexOf(t);this.gf.splice(e,1)},t}(),vd=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).Mf=new pd,r.w_="name"in e?e.name:"[DEFAULT]",r}return n(e,t),e.prototype.b_=function(){return this.Lf||yd(this),this.Lf.terminate()},e}(bl);function md(t){return t.Lf||yd(t),t.Lf.df(),t.Lf}function yd(t){var e=t.p_(),n=function(t,e,n){return new Si(t,e,n.host,n.ssl,n.experimentalForceLongPolling,n.experimentalAutoDetectLongPolling)}(t.I_,t.w_,e);t.Lf=new nd(t.m_,t.Mf,n)}function gd(t,e,n){var r=this,s=new $a;return t.fs.enqueue((function(){return i(r,void 0,void 0,(function(){var r;return o(this,(function(i){switch(i.label){case 0:return i.trys.push([0,3,,4]),[4,rd(t,n)];case 1:return i.sent(),[4,id(t,e)];case 2:return i.sent(),s.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===gi.FAILED_PRECONDITION||t.code===gi.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=i.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),s.reject(r),[3,4];case 4:return[2]}}))}))})).then((function(){return s.promise}))}function bd(t){if(t.R_||t.P_)throw new bi(gi.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var wd=function(){function t(){}return t.prototype.$f=function(t,e){switch(void 0===e&&(e="none"),eo(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Wi(t.integerValue||t.doubleValue);case 3:return this.Bf(t.timestampValue);case 4:return this.qf(t,e);case 5:return t.stringValue;case 6:return this.Uf(Ji(t.bytesValue));case 7:return this.Qf(t.referenceValue);case 8:return this.Kf(t.geoPointValue);case 9:return this.Wf(t.arrayValue,e);case 10:return this.jf(t.mapValue,e);default:throw ci()}},t.prototype.jf=function(t,e){var n=this,r={};return Hi(t.fields||{},(function(t,i){r[t]=n.$f(i,e)})),r},t.prototype.Kf=function(t){return new Nl(Wi(t.latitude),Wi(t.longitude))},t.prototype.Wf=function(t,e){var n=this;return(t.values||[]).map((function(t){return n.$f(t,e)}))},t.prototype.qf=function(t,e){switch(e){case"previous":var n=Yi(t);return null==n?null:this.$f(n,e);case"estimate":return this.Bf($i(t));default:return null}},t.prototype.Bf=function(t){var e=Ki(t);return new Li(e.seconds,e.nanos)},t.prototype.Gf=function(t,e){var n=Ui.ct(t);hi(Ya(n));var r=new Ai(n.get(1),n.get(3)),i=new Fi(n.X(5));return r.isEqual(e)||si("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}(),Id=function(){function t(t,e,n,r,i){this.zf=t,this.Hf=e,this.S_=n,this.Jf=r,this.v_=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this.S_.path.et()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new wl(this.zf,this.v_,this.S_)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this.Jf},t.prototype.data=function(){if(this.Jf){if(this.v_){var t=new Td(this.zf,this.Hf,this.S_,this.Jf,null);return this.v_.fromFirestore(t)}return this.Hf.$f(this.Jf.vt())}},t.prototype.get=function(t){if(this.Jf){var e=this.Jf.data().field(Ed("DocumentSnapshot.get",t));if(null!==e)return this.Hf.$f(e)}},t}(),Td=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(Id);function Ed(t,e){return"string"==typeof e?$l(t,e):e instanceof Ii?e._.d_:e.d_}function _d(t){if(Ko(t)&&0===t.Nt.length)throw new bi(gi.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Sd=function(){};function Ad(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o.Yf(t)}return t}var Nd=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Xf=e,i.Zf=n,i.td=r,i.type="where",i}return n(e,t),e.prototype.Yf=function(t){var e=Ll(t.firestore),n=function(t,e,n,r,i,o,s){var a;if(i.ht()){if("array-contains"===o||"array-contains-any"===o)throw new bi(gi.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){Ld(s,o);for(var u=[],c=0,h=s;c<h.length;c++){var f=h[c];u.push(xd(r,t,f))}a={arrayValue:{values:u}}}else a=xd(r,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||Ld(s,o),a=Gl(n,"where",s,"in"===o||"not-in"===o);var l=No.create(i,o,a);return function(t,e){if(e.xt()){var n=Jo(t);if(null!==n&&!n.isEqual(e.field))throw new bi(gi.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=Wo(t);null!==r&&Rd(0,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw i===e.op?new bi(gi.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter."):new bi(gi.INVALID_ARGUMENT,"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,l),l}(t.C_,0,e,t.firestore.I_,this.Xf,this.Zf,this.td);return new Il(t.firestore,t.v_,function(t,e){var n=t.filters.concat([e]);return new Ho(t.path,t.collectionGroup,t.Nt.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t.C_,n))},e}(Sd),kd=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Xf=e,r.ed=n,r.type="orderBy",r}return n(e,t),e.prototype.Yf=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new bi(gi.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new bi(gi.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new jo(e,n);return function(t,e){if(null===Wo(t)){var n=Jo(t);null!==n&&Rd(0,n,e.field)}}(t,r),r}(t.C_,this.Xf,this.ed);return new Il(t.firestore,t.v_,function(t,e){var n=t.Nt.concat([e]);return new Ho(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t.C_,e))},e}(Sd),Dd=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.nd=n,i.sd=r,i}return n(e,t),e.prototype.Yf=function(t){return new Il(t.firestore,t.v_,Qo(t.C_,this.nd,this.sd))},e}(Sd),Od=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.rd=n,i.od=r,i}return n(e,t),e.prototype.Yf=function(t){var e=Pd(t,this.type,this.rd,this.od);return new Il(t.firestore,t.v_,function(t,e){return new Ho(t.path,t.collectionGroup,t.Nt.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t.C_,e))},e}(Sd),Cd=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.rd=n,i.od=r,i}return n(e,t),e.prototype.Yf=function(t){var e=Pd(t,this.type,this.rd,this.od);return new Il(t.firestore,t.v_,function(t,e){return new Ho(t.path,t.collectionGroup,t.Nt.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t.C_,e))},e}(Sd);function Pd(t,e,n,r){if(n[0]instanceof Ii&&(n[0]=n[0]._),n[0]instanceof Id)return function(t,e,n,r,i){if(!r)throw new bi(gi.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],s=0,a=Yo(t);s<a.length;s++){var u=a[s];if(u.field.ht())o.push(uo(e,r.key));else{var c=r.field(u.field);if(Xi(c))throw new bi(gi.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var h=u.field.ot();throw new bi(gi.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+h+"' (used as the orderBy) does not exist.")}o.push(c)}}return new Mo(o,i)}(t.C_,t.firestore.I_,e,n[0].Jf,r);var i=Ll(t.firestore);return function(t,e,n,r,i,o){var s=t.Nt;if(i.length>s.length)throw new bi(gi.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],u=0;u<i.length;u++){var c=i[u];if(s[u].field.ht()){if("string"!=typeof c)throw new bi(gi.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!Xo(t)&&-1!==c.indexOf("/"))throw new bi(gi.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var h=t.path.child(Ui.ct(c));if(!Fi.Et(h))throw new bi(gi.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+h+"' is not because it contains an odd number of segments.");var f=new Fi(h);a.push(uo(e,f))}else{var l=Gl(n,r,c);a.push(l)}}return new Mo(a,o)}(t.C_,t.firestore.I_,i,e,n,r)}function xd(t,e,n){if(n instanceof Ii&&(n=n._),"string"==typeof n){if(""===n)throw new bi(gi.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!Xo(e)&&-1!==n.indexOf("/"))throw new bi(gi.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(Ui.ct(n));if(!Fi.Et(r))throw new bi(gi.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return uo(t,new Fi(r))}if(n instanceof wl)return uo(t,n.S_);throw new bi(gi.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+pl(n)+".")}function Ld(t,e){if(!Array.isArray(t)||0===t.length)throw new bi(gi.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new bi(gi.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function Rd(t,e,n){if(!n.isEqual(e))throw new bi(gi.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}function Md(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}function Ud(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var jd=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return n(e,t),e.prototype.Uf=function(t){return new wi(t)},e.prototype.Qf=function(t){var e=this.Gf(t,this.firestore.I_);return new wl(this.firestore,null,e)},e}(wd),Vd=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),Fd=function(t){function e(e,n,r,i,o,s){var a=this;return(a=t.call(this,e,n,r,i,s)||this).zf=e,a.ad=e,a.metadata=o,a}return n(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this.Jf){if(this.v_){var e=new qd(this.zf,this.Hf,this.S_,this.Jf,this.metadata,null);return this.v_.fromFirestore(e,t)}return this.Hf.$f(this.Jf.vt(),t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this.Jf){var n=this.Jf.data().field(Ed("DocumentSnapshot.get",t));if(null!==n)return this.Hf.$f(n,e.serverTimestamps)}},e}(Id),qd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(Fd),Hd=function(){function t(t,e,n,r){this.zf=t,this.Hf=e,this.ud=r,this.metadata=new Vd(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this.ud.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this.ud.docs.forEach((function(r){t.call(e,new qd(n.zf,n.Hf,r.key,r,new Vd(n.ud.Ce.has(r.key),n.ud.fromCache),n.query.v_))}))},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this.ud.Ne)throw new bi(gi.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this.hd&&this.ld===e||(this.hd=function(t,e){if(t.ud.De.nt()){var n=0;return t.ud.docChanges.map((function(e){var r=new qd(t.zf,t.Hf,e.doc.key,e.doc,new Vd(t.ud.Ce.has(e.doc.key),t.ud.fromCache),t.query.v_);return e.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}}))}var r=t.ud.De;return t.ud.docChanges.filter((function(t){return e||3!==t.type})).map((function(e){var n=new qd(t.zf,t.Hf,e.doc.key,e.doc,new Vd(t.ud.Ce.has(e.doc.key),t.ud.fromCache),t.query.v_),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:Bd(e.type),doc:n,oldIndex:i,newIndex:o}}))}(this,e),this.ld=e),this.hd},t}();function Bd(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ci()}}function Gd(t,e){return t instanceof Fd&&e instanceof Fd?t.zf===e.zf&&t.S_.isEqual(e.S_)&&(null===t.Jf?null===e.Jf:t.Jf.isEqual(e.Jf))&&t.v_===e.v_:t instanceof Hd&&e instanceof Hd&&t.zf===e.zf&&Al(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t.ud.isEqual(e.ud)}var zd=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return n(e,t),e.prototype.Uf=function(t){return new wi(t)},e.prototype.Qf=function(t){var e=this.Gf(t,this.firestore.I_);return new wl(this.firestore,null,e)},e}(wd);function Kd(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=vl(t,wl);var o=vl(t.firestore,vd),s=Ll(o);return e instanceof Ii&&(e=e._),Jd(o,[("string"==typeof e||e instanceof al?Bl(s,"updateDoc",t.S_,e,n,r):Hl(s,"updateDoc",t.S_,e)).F_(t.S_,Es.exists(!0))])}function Wd(t){for(var e,n,r,s=[],a=1;a<arguments.length;a++)s[a-1]=arguments[a];t instanceof Ii&&(t=t._);var u={includeMetadataChanges:!1},c=0;"object"!=typeof s[c]||Md(s[c])||(u=s[c],c++);var h,f,l,d={includeMetadataChanges:u.includeMetadataChanges};if(Md(s[c])){var p=s[c];s[c]=null===(e=p.next)||void 0===e?void 0:e.bind(p),s[c+1]=null===(n=p.error)||void 0===n?void 0:n.bind(p),s[c+2]=null===(r=p.complete)||void 0===r?void 0:r.bind(p)}if(t instanceof wl)f=vl(t.firestore,vd),l=Go(t.S_.path),h={next:function(e){s[c]&&s[c](Xd(f,t,e))},error:s[c+1],complete:s[c+2]};else{var v=vl(t,Il);f=vl(v.firestore,vd),l=v.C_;var m=new zd(f);h={next:function(t){s[c]&&s[c](new Hd(f,m,v,t))},error:s[c+1],complete:s[c+2]},_d(t.C_)}return function(t,e,n,r){var s=this,a=new sl(r),u=new mf(e,a,n);return t.fs.ys((function(){return i(s,void 0,void 0,(function(){var e;return o(this,(function(n){switch(n.label){case 0:return e=ff,[4,fd(t)];case 1:return[2,e.apply(void 0,[n.sent(),u])]}}))}))})),function(){a.r_(),t.fs.ys((function(){return i(s,void 0,void 0,(function(){var e;return o(this,(function(n){switch(n.label){case 0:return e=lf,[4,fd(t)];case 1:return[2,e.apply(void 0,[n.sent(),u])]}}))}))}))}}(md(f),l,d,h)}function Jd(t,e){return function(t,e){var n=this,r=new $a;return t.fs.ys((function(){return i(n,void 0,void 0,(function(){var n;return o(this,(function(i){switch(i.label){case 0:return n=kf,[4,hd(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(md(t),e)}function Xd(t,e,n){var r=n.docs.get(e.S_),i=new zd(t);return new Fd(t,i,e.S_,r,new Vd(n.hasPendingWrites,n.fromCache),e.v_)}var Yd=function(){function t(t,e){this.zf=t,this._d=e,this.fd=[],this.dd=!1,this.wd=Ll(t)}return t.prototype.set=function(t,e,n){this.Ed();var r=$d(t,this.zf),i=Ud(r.v_,e,n),o=Rl(this.wd,"WriteBatch.set",r.S_,i,null!==r.v_,n);return this.fd.push(o.F_(r.S_,Es.Wt())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this.Ed();var o,s=$d(t,this.zf);return e instanceof Ii&&(e=e._),o="string"==typeof e||e instanceof al?Bl(this.wd,"WriteBatch.update",s.S_,e,n,r):Hl(this.wd,"WriteBatch.update",s.S_,e),this.fd.push(o.F_(s.S_,Es.exists(!0))),this},t.prototype.delete=function(t){this.Ed();var e=$d(t,this.zf);return this.fd=this.fd.concat(new Vs(e.S_,Es.Wt())),this},t.prototype.commit=function(){return this.Ed(),this.dd=!0,this.fd.length>0?this._d(this.fd):Promise.resolve()},t.prototype.Ed=function(){if(this.dd)throw new bi(gi.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function $d(t,e){if(t instanceof Ii&&(t=t._),t.firestore!==e)throw new bi(gi.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var Qd=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).zf=e,r}return n(e,t),e.prototype.get=function(e){var n=this,r=$d(e,this.zf),i=new zd(this.zf);return t.prototype.get.call(this,e).then((function(t){return new Fd(n.zf,i,r.S_,t.Jf,new Vd(!1,!1),r.v_)}))},e}(function(){function t(t,e){this.zf=t,this.Td=e,this.wd=Ll(t)}return t.prototype.get=function(t){var e=this,n=$d(t,this.zf),r=new jd(this.zf);return this.Td.ef([n.S_]).then((function(t){if(!t||1!==t.length)return ci();var i=t[0];if(i instanceof wo)return new Id(e.zf,r,n.S_,null,n.v_);if(i instanceof bo)return new Id(e.zf,r,i.key,i,n.v_);throw ci()}))},t.prototype.set=function(t,e,n){var r=$d(t,this.zf),i=Ud(r.v_,e,n),o=Rl(this.wd,"Transaction.set",r.S_,i,null!==r.v_,n);return this.Td.set(r.S_,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,s=$d(t,this.zf);return e instanceof Ii&&(e=e._),o="string"==typeof e||e instanceof al?Bl(this.wd,"Transaction.update",s.S_,e,n,r):Hl(this.wd,"Transaction.update",s.S_,e),this.Td.update(s.S_,o),this},t.prototype.delete=function(t){var e=$d(t,this.zf);return this.Td.delete(e.S_),this},t}()),Zd=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){bd(t=vl(t,vd));var n=md(t),r=t.p_(),i=new ol;return gd(n,i,new rl(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){bd(t=vl(t,vd));var e=md(t),n=t.p_(),r=new ol;return gd(e,r,new il(r,n.cacheSizeBytes))}(t._)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t.R_&&!t.P_)throw new bi(gi.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new $a;return t.Mf.Tf((function(){return i(e,void 0,void 0,(function(){var e;return o(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return i(this,void 0,void 0,(function(){var e;return o(this,(function(n){switch(n.label){case 0:return tu.Wn()?(e=t+"main",[4,tu.delete(e)]):[2,Promise.resolve()];case 1:return n.sent(),[2]}}))}))}(Mc(t.I_,t.w_))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}}))}))})),n.promise}(t._)},t}(),tp=function(t){function e(e,n,r){var i=this;return(i=t.call(this,n)||this).Id=r,i.INTERNAL={delete:function(){return i.terminate()}},e instanceof Ai||(i.md=e),i}return n(e,t),Object.defineProperty(e.prototype,"I_",{get:function(){return this._.I_},enumerable:!1,configurable:!0}),e.prototype.settings=function(t){t.merge&&delete(t=Object.assign(Object.assign({},this._.V_()),t)).merge,this._.g_(t)},e.prototype.useEmulator=function(t,e){"firestore.googleapis.com"!==this._.V_().host&&ai("Host has been set in both settings() and useEmulator(), emulator host will be used"),this.settings({host:t+":"+e,ssl:!1,merge:!0})},e.prototype.enableNetwork=function(){return function(t){var e=this;return t.fs.enqueue((function(){return i(e,void 0,void 0,(function(){var e,n;return o(this,(function(r){switch(r.label){case 0:return[4,ad(t)];case 1:return e=r.sent(),[4,cd(t)];case 2:return n=r.sent(),[2,(e.po(!0),function(t){var e=fi(t);return e.Fh.delete(0),Uh(e)}(n))]}}))}))}))}(md(vl(this._,vd)))},e.prototype.disableNetwork=function(){return function(t){var e=this;return t.fs.enqueue((function(){return i(e,void 0,void 0,(function(){var e,n;return o(this,(function(r){switch(r.label){case 0:return[4,ad(t)];case 1:return e=r.sent(),[4,cd(t)];case 2:return n=r.sent(),[2,(e.po(!1),function(t){return i(this,void 0,void 0,(function(){var e;return o(this,(function(n){switch(n.label){case 0:return(e=fi(t)).Fh.add(0),[4,jh(e)];case 1:return n.sent(),e.Mh.set("Offline"),[2]}}))}))}(n))]}}))}))}))}(md(vl(this._,vd)))},e.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&fl("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Id.enableMultiTabIndexedDbPersistence(this):this.Id.enableIndexedDbPersistence(this,n)},e.prototype.clearPersistence=function(){return this.Id.clearIndexedDbPersistence(this)},e.prototype.terminate=function(){return this.app._removeServiceInstance("firestore"),this.app._removeServiceInstance("firestore-exp"),this._._delete()},e.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new $a;return t.fs.ys((function(){return i(e,void 0,void 0,(function(){var e;return o(this,(function(r){switch(r.label){case 0:return e=Lf,[4,hd(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}}))}))})),n.promise}(md(vl(this._,vd)))},e.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,r=new sl(e);return t.fs.ys((function(){return i(n,void 0,void 0,(function(){var e;return o(this,(function(n){switch(n.label){case 0:return e=function(t,e){fi(t).jh.add(e),e.next()},[4,fd(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))})),function(){r.r_(),t.fs.ys((function(){return i(n,void 0,void 0,(function(){var e;return o(this,(function(n){switch(n.label){case 0:return e=function(t,e){fi(t).jh.delete(e)},[4,fd(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))}))}}(md(t=vl(t,vd)),Md(e)?e:{next:e})}(this._,t)},Object.defineProperty(e.prototype,"app",{get:function(){if(!this.md)throw new bi(gi.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.md},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){try{return new dp(this,El(this._,t))}catch(t){throw op(t,"collection()","Firestore.collection()")}},e.prototype.doc=function(t){try{return new ip(this,_l(this._,t))}catch(t){throw op(t,"doc()","Firestore.doc()")}},e.prototype.collectionGroup=function(t){try{return new hp(this,function(t,e){if(t=vl(t,bl),cl("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new bi(gi.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new Il(t,null,function(t){return new Ho(Ui.at(),t)}(e))}(this._,t))}catch(t){throw op(t,"collectionGroup()","Firestore.collectionGroup()")}},e.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new $a;return t.fs.ys((function(){return i(n,void 0,void 0,(function(){var n;return o(this,(function(i){switch(i.label){case 0:return[4,function(t){return sd(t).then((function(t){return t.Dh}))}(t)];case 1:return n=i.sent(),new ed(t.fs,n,e,r).run(),[2]}}))}))})),r.promise}(md(t),(function(n){return e(new Qd(t,n))}))}(this._,(function(n){return t(new np(e,n))}))},e.prototype.batch=function(){var t=this;return md(this._),new rp(new Yd(this._,(function(e){return Jd(t._,e)})))},e.prototype.loadBundle=function(t){throw new bi(gi.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},e.prototype.namedQuery=function(t){throw new bi(gi.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},e}(Ii),ep=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return n(e,t),e.prototype.Uf=function(t){return new _i(new wi(t))},e.prototype.Qf=function(t){var e=this.Gf(t,this.firestore.I_);return ip.Ad(e,this.firestore,null)},e}(wd),np=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).zf=e,r}return n(e,t),e.prototype.get=function(t){var e=this,n=pp(t);return this._.get(n).then((function(t){return new up(e.zf,t)}))},e.prototype.set=function(t,e,n){var r=pp(t);return n?(hl("Transaction.set",n),this._.set(r,e,n)):this._.set(r,e),this},e.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=pp(t);return 2===arguments.length?this._.update(s,e):(r=this._).update.apply(r,c([s,e,n],i)),this},e.prototype.delete=function(t){var e=pp(t);return this._.delete(e),this},e}(Ii),rp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.set=function(t,e,n){var r=pp(t);return n?(hl("WriteBatch.set",n),this._.set(r,e,n)):this._.set(r,e),this},e.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=pp(t);return 2===arguments.length?this._.update(s,e):(r=this._).update.apply(r,c([s,e,n],i)),this},e.prototype.delete=function(t){var e=pp(t);return this._.delete(e),this},e.prototype.commit=function(){return this._.commit()},e}(Ii),ip=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).firestore=e,r.Hf=new ep(e),r}return n(e,t),e.Rd=function(t,n,r){if(t.length%2!=0)throw new bi(gi.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.ot()+" has "+t.length);return new e(n,new wl(n._,r,new Fi(t)))},e.Ad=function(t,n,r){return new e(n,new wl(n._,r,t))},Object.defineProperty(e.prototype,"id",{get:function(){return this._.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new dp(this.firestore,this._.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._.path},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){try{return new dp(this.firestore,El(this._,t))}catch(t){throw op(t,"collection()","DocumentReference.collection()")}},e.prototype.isEqual=function(t){return t instanceof Ii&&(t=t._),t instanceof wl&&Sl(this._,t)},e.prototype.set=function(t,e){e=hl("DocumentReference.set",e);try{return function(t,e,n){t=vl(t,wl);var r=vl(t.firestore,vd),i=Ud(t.v_,e,n);return Jd(r,[Rl(Ll(r),"setDoc",t.S_,i,null!==t.v_,n).F_(t.S_,Es.Wt())])}(this._,t,e)}catch(t){throw op(t,"setDoc()","DocumentReference.set()")}},e.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?Kd(this._,t):Kd.apply(void 0,c([this._,t,e],n))}catch(t){throw op(t,"updateDoc()","DocumentReference.update()")}},e.prototype.delete=function(){return Jd(vl((t=this._).firestore,vd),[new Vs(t.S_,Es.Wt())]);var t},e.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=sp(e),i=ap(e,(function(e){return new up(t.firestore,new Fd(t.firestore._,t.Hf,e.S_,e.Jf,e.metadata,t._.v_))}));return Wd(this._,r,i)},e.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=vl(t,wl);var e=vl(t.firestore,vd),n=md(e),r=new zd(e);return function(t,e){var n=this,r=new $a;return t.fs.ys((function(){return i(n,void 0,void 0,(function(){var n;return o(this,(function(s){switch(s.label){case 0:return n=function(t,e,n){return i(this,void 0,void 0,(function(){var r,i;return o(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,function(t,e){var n=fi(t);return n.persistence.runTransaction("read document","readonly",(function(t){return n.Ic.Jo(t,e)}))}(t,e)];case 1:return(i=o.sent())instanceof bo?n.resolve(i):i instanceof wo?n.resolve(null):n.reject(new bi(gi.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=cu(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}}))}))},[4,ud(t)];case 1:return[2,n.apply(void 0,[s.sent(),e,r])]}}))}))})),r.promise}(n,t.S_).then((function(n){return new Fd(e,r,t.S_,n,new Vd(n instanceof bo&&n.bt,!0),t.v_)}))}(this._):"server"===(null==t?void 0:t.source)?function(t){t=vl(t,wl);var e=vl(t.firestore,vd);return ld(md(e),t.S_,{source:"server"}).then((function(n){return Xd(e,t,n)}))}(this._):function(t){t=vl(t,wl);var e=vl(t.firestore,vd);return ld(md(e),t.S_).then((function(n){return Xd(e,t,n)}))}(this._)).then((function(t){return new up(e.firestore,new Fd(e.firestore._,e.Hf,t.S_,t.Jf,t.metadata,e._.v_))}))},e.prototype.withConverter=function(t){return new e(this.firestore,this._.withConverter(t))},e}(Ii);function op(t,e,n){return t.message=t.message.replace(e,n),t}function sp(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!Md(r))return r}return{}}function ap(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=Md(t[0])?t[0]:Md(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var up=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).zf=e,r}return n(e,t),Object.defineProperty(e.prototype,"ref",{get:function(){return new ip(this.zf,this._.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"exists",{get:function(){return this._.exists()},enumerable:!1,configurable:!0}),e.prototype.data=function(t){return this._.data(t)},e.prototype.get=function(t,e){return this._.get(t,e)},e.prototype.isEqual=function(t){return Gd(this._,t._)},e}(Ii),cp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.data=function(t){return this._.data(t)},e}(up),hp=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).firestore=e,r.Hf=new ep(e),r}return n(e,t),e.prototype.where=function(t,n,r){try{return new e(this.firestore,Ad(this._,function(t,e,n){var r=e,i=Ed("where",t);return new Nd(i,r,n)}(t,n,r)))}catch(t){throw op(t,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.orderBy=function(t,n){try{return new e(this.firestore,Ad(this._,function(t,e){void 0===e&&(e="asc");var n=e,r=Ed("orderBy",t);return new kd(r,n)}(t,n)))}catch(t){throw op(t,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.limit=function(t){try{return new e(this.firestore,Ad(this._,function(t){return ml("limit",t),new Dd("limit",t,"F")}(t)))}catch(t){throw op(t,"limit()","Query.limit()")}},e.prototype.limitToLast=function(t){try{return new e(this.firestore,Ad(this._,function(t){return ml("limitToLast",t),new Dd("limitToLast",t,"L")}(t)))}catch(t){throw op(t,"limitToLast()","Query.limitToLast()")}},e.prototype.startAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Ad(this._,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Od("startAt",t,!0)}.apply(void 0,t)))}catch(t){throw op(t,"startAt()","Query.startAt()")}},e.prototype.startAfter=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Ad(this._,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Od("startAfter",t,!1)}.apply(void 0,t)))}catch(t){throw op(t,"startAfter()","Query.startAfter()")}},e.prototype.endBefore=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Ad(this._,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Cd("endBefore",t,!0)}.apply(void 0,t)))}catch(t){throw op(t,"endBefore()","Query.endBefore()")}},e.prototype.endAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Ad(this._,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Cd("endAt",t,!1)}.apply(void 0,t)))}catch(t){throw op(t,"endAt()","Query.endAt()")}},e.prototype.isEqual=function(t){return Al(this._,t._)},e.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=vl(t,Il);var e=vl(t.firestore,vd),n=md(e),r=new zd(e);return function(t,e){var n=this,r=new $a;return t.fs.ys((function(){return i(n,void 0,void 0,(function(){var n;return o(this,(function(s){switch(s.label){case 0:return n=function(t,e,n){return i(this,void 0,void 0,(function(){var r,i,s,a,u;return o(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,Yc(t,e,!0)];case 1:return u=o.sent(),r=new If(e,u.Pc),i=r.dl(u.documents),s=r.Ti(i,!1),n.resolve(s.snapshot),[3,3];case 2:return a=o.sent(),u=cu(a,"Failed to execute query '"+e+" against cache"),n.reject(u),[3,3];case 3:return[2]}}))}))},[4,ud(t)];case 1:return[2,n.apply(void 0,[s.sent(),e,r])]}}))}))})),r.promise}(n,t.C_).then((function(n){return new Hd(e,r,t,n)}))}(this._):"server"===(null==t?void 0:t.source)?function(t){t=vl(t,Il);var e=vl(t.firestore,vd),n=md(e),r=new zd(e);return dd(n,t.C_,{source:"server"}).then((function(n){return new Hd(e,r,t,n)}))}(this._):function(t){t=vl(t,Il);var e=vl(t.firestore,vd),n=md(e),r=new zd(e);return _d(t.C_),dd(n,t.C_).then((function(n){return new Hd(e,r,t,n)}))}(this._)).then((function(t){return new lp(e.firestore,new Hd(e.firestore._,e.Hf,e._,t.ud))}))},e.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=sp(e),i=ap(e,(function(e){return new lp(t.firestore,new Hd(t.firestore._,t.Hf,t._,e.ud))}));return Wd(this._,r,i)},e.prototype.withConverter=function(t){return new e(this.firestore,this._.withConverter(t))},e}(Ii),fp=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).zf=e,r}return n(e,t),Object.defineProperty(e.prototype,"type",{get:function(){return this._.type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"doc",{get:function(){return new cp(this.zf,this._.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"oldIndex",{get:function(){return this._.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"newIndex",{get:function(){return this._.newIndex},enumerable:!1,configurable:!0}),e}(Ii),lp=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).zf=e,r}return n(e,t),Object.defineProperty(e.prototype,"query",{get:function(){return new hp(this.zf,this._.query)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._.size},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return this._.empty},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"docs",{get:function(){var t=this;return this._.docs.map((function(e){return new cp(t.zf,e)}))},enumerable:!1,configurable:!0}),e.prototype.docChanges=function(t){var e=this;return this._.docChanges(t).map((function(t){return new fp(e.zf,t)}))},e.prototype.forEach=function(t,e){var n=this;this._.forEach((function(r){t.call(e,new cp(n.zf,r))}))},e.prototype.isEqual=function(t){return Gd(this._,t._)},e}(Ii),dp=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r._=n,r}return n(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._.parent;return t?new ip(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new ip(this.firestore,void 0===t?_l(this._):_l(this._,t))}catch(t){throw op(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=vl(t.firestore,vd),r=_l(t),i=Ud(t.v_,e);return Jd(n,[Rl(Ll(t.firestore),"addDoc",r.S_,i,null!==t.v_,{}).F_(r.S_,Es.exists(!1))]).then((function(){return r}))}(this._,t).then((function(t){return new ip(e.firestore,t)}))},e.prototype.isEqual=function(t){return Sl(this._,t._)},e.prototype.withConverter=function(t){return new e(this.firestore,this._.withConverter(t))},e}(hp);function pp(t){return t instanceof Ii&&(t=t._),vl(t,wl)}var vp=function(t){function e(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.call(this,new(al.bind.apply(al,c([void 0],e))))||this}return n(e,t),e.documentId=function(){return new e(Vi.lt().ot())},e.prototype.isEqual=function(t){return t instanceof Ii&&(t=t._),t instanceof al&&this._.d_.isEqual(t.d_)},e}(Ii),mp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.serverTimestamp=function(){var t=new jl("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)},e.delete=function(){var t=new Ml("deleteField");return t._methodName="FieldValue.delete",new e(t)},e.arrayUnion=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Vl("arrayUnion",t)}.apply(void 0,t);return r._methodName="FieldValue.arrayUnion",new e(r)},e.arrayRemove=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Fl("arrayRemove",t)}.apply(void 0,t);return r._methodName="FieldValue.arrayRemove",new e(r)},e.increment=function(t){var n=function(t){return new ql("increment",t)}(t);return n._methodName="FieldValue.increment",new e(n)},e.prototype.isEqual=function(t){return this._.isEqual(t._)},e}(Ii);!function(){function t(){this.Pd={},this.yd=new $a,this.gd={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}t.prototype.onProgress=function(t,e,n){this.Pd={next:t,error:e,complete:n}},t.prototype.catch=function(t){return this.yd.promise.catch(t)},t.prototype.then=function(t,e){return this.yd.promise.then(t,e)},t.prototype.Ul=function(t){this.Ql(t),this.Pd.complete&&this.Pd.complete(),this.yd.resolve(t)},t.prototype.Wl=function(t){this.gd.taskState="Error",this.Pd.next&&this.Pd.next(this.gd),this.Pd.error&&this.Pd.error(t),this.yd.reject(t)},t.prototype.Ql=function(t){this.gd=t,this.Pd.next&&this.Pd.next(t)}}();var yp,gp={Firestore:tp,GeoPoint:Nl,Timestamp:Li,Blob:_i,Transaction:np,WriteBatch:rp,DocumentReference:ip,DocumentSnapshot:up,Query:hp,QueryDocumentSnapshot:cp,QuerySnapshot:lp,CollectionReference:dp,FieldPath:vp,FieldValue:mp,setLogLevel:function(t){var e;e=t,ri.setLogLevel(e)},CACHE_SIZE_UNLIMITED:-1};(function(t,e){t.INTERNAL.registerComponent(new E("firestore",(function(t){return function(t,e){return new tp(t,new vd(t,e),new Zd)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(Object.assign({},gp)))})(yp=Y),yp.registerVersion("@firebase/firestore","2.1.1"),Y.initializeApp({apiKey:"AIzaSyC63F1zX2DiieYj2WGXdnddfL4GTHknJCg",authDomain:"i-m-done.firebaseapp.com",projectId:"i-m-done",appId:"1:1073038908131:web:3973ec4e4b5b57cb4903d6"});const bp=Y.auth(),wp=Y.firestore();wp.settings({timestampsInSnapshots:!0});const Ip=()=>{const t=document.getElementById("content");return t.innerHTML='\n        <nav class="navSidebar">\n            <div class="navSidebar__header" id="userCredsHeader"></div>\n            <div class="navSidebar__content">\n                <ul class="navSidebar__contentLinks">\n                    <li class="active">\n                        <i class="ri-home-4-line"></i>\n                        <h4>Home</h4>\n                    </li>\n                    <li>\n                        <i class="ri-calendar-event-line"></i>\n                        <h4>Today</h4>\n                    </li>\n                    <li id="dropdown" class="closed">\n                        <div class="dropdown__header">\n                            <div class="left">\n                                <i class="ri-bar-chart-box-line"></i>\n                                <h4>Projects</h4>\n                            </div>\n                            <div class="right">\n                                <i class="ri-arrow-right-s-fill"></i>\n                            </div>\n                        </div>\n                        <div class="dropdown__content">\n                            <ul class="dropdown__list"></ul>\n                            <button class="btn-label" id="createProjectBtn"><i class="ri-add-fill"></i> Add Projet</button>\n                        </div>\n                    </li>    \n                </ul>\n            </div>\n        </nav>\n        <section class="dashboard">\n            <div class="dashboard__projects">\n                <h2>Projects</h2>\n                <div class="dashboard__projects__list" id="userProjectsList">\n                </div>\n            </div>\n            <div class="dashboard__tasks">\n                <h2>All Tasks</h2>\n                <div class="dashboard__tasks__list" id="userTasksList"></div>\n                <button class="btn create" id="createTaskBtn"><i class="ri-add-fill"></i> Add Task</button>\n            </div>\n        </section>\n        <section class="infoSidebar">\n            <article class="itemInfo" id="itemInfo">\n                <div class="itemInfo__empty">\n                    <img src="./assets/watering_plant.svg">\n                    <h5>Clean here</h5>\n                    <p>No task has been choose</p>\n                </div>\n            </article>\n        </section>\n    ',t},Tp=()=>{const t=document.getElementById("content");t.innerHTML="";const e=document.createElement("section");return e.classList.add("authPage"),e.id="login",e.innerHTML='\n        <img class="logo__big" src="./assets/logo.svg" alt="Company Logo">\n        <h1>Login to your Account</h1>\n        <form class="authForm">\n            <div class="inputField">\n                <input type="email" name="email" id="email" placeholder="Email Address" required/>\n            </div>\n            <div class="inputField">\n                <input type="password" name="passowrd" id="password" placeholder="Password" required/>\n            </div>\n            <p>I don\'t have an account <span data-ref="signupPage" class="redirect">Signup</span></p>\n            <button class="btn">Login</button>\n        </form>\n    ',t.append(e),t},Ep=()=>{const t=document.getElementById("content");t.innerHTML="";const e=document.createElement("section");return e.classList.add("authPage"),e.id="signup",e.innerHTML='\n        <img class="logo__big" src="./assets/logo.svg" alt="Company Logo">\n        <h1>Create an Account</h1>\n        <form class="authForm">\n            <div class="inputField">\n                <input type="text" name="username" id="username" placeholder="Username" required/>\n            </div>\n            <div class="inputField">\n                <input type="email" name="email" id="email" placeholder="Email Address" required/>\n            </div>\n            <div class="inputField">\n                <input type="password" name="passowrd" id="password" placeholder="Password" required/>\n            </div>\n            <p>I already have an account <span data-ref="loginPage" class="redirect">Login</span></p>\n            <button class="btn">Register</button>\n        </form>\n    ',t.append(e),t};class _p{static signupUser(t,e,n){bp.createUserWithEmailAndPassword(e,n).then((n=>{wp.collection("users").doc(n.user.uid).set({email:e,username:t})})).catch((t=>Nv.showToastError(t.message)))}static loginUser(t,e){bp.signInWithEmailAndPassword(t,e).then((t=>{})).catch((t=>Nv.showToastError(t.message)))}static logoutUser(){bp.signOut()}static getUserID(){return bp.currentUser.uid}}class Sp{constructor(t,e,n,r,i){this.title=t,this.description=e,this.project=n,this.priority=r,this.deadline=i,this.checked=!1}}class Ap{constructor(t,e,n){this.title=t,this.description=e,this.color=n}}function Np(t,e){if(e.length<t)throw new TypeError(t+" argument"+(t>1?"s":"")+" required, but only "+e.length+" present")}function kp(t){Np(1,arguments);var e=Object.prototype.toString.call(t);return t instanceof Date||"object"==typeof t&&"[object Date]"===e?new Date(t.getTime()):"number"==typeof t||"[object Number]"===e?new Date(t):("string"!=typeof t&&"[object String]"!==e||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn((new Error).stack)),new Date(NaN))}function Dp(t){Np(1,arguments);var e=kp(t);return!isNaN(e)}var Op={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function Cp(t){return function(e){var n=e||{},r=n.width?String(n.width):t.defaultWidth;return t.formats[r]||t.formats[t.defaultWidth]}}var Pp,xp={date:Cp({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:Cp({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:Cp({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},Lp={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function Rp(t){return function(e,n){var r,i=n||{};if("formatting"===(i.context?String(i.context):"standalone")&&t.formattingValues){var o=t.defaultFormattingWidth||t.defaultWidth,s=i.width?String(i.width):o;r=t.formattingValues[s]||t.formattingValues[o]}else{var a=t.defaultWidth,u=i.width?String(i.width):t.defaultWidth;r=t.values[u]||t.values[a]}return r[t.argumentCallback?t.argumentCallback(e):e]}}function Mp(t){return function(e,n){var r=String(e),i=n||{},o=i.width,s=o&&t.matchPatterns[o]||t.matchPatterns[t.defaultMatchWidth],a=r.match(s);if(!a)return null;var u,c=a[0],h=o&&t.parsePatterns[o]||t.parsePatterns[t.defaultParseWidth];return u="[object Array]"===Object.prototype.toString.call(h)?function(t,e){for(var n=0;n<t.length;n++)if(t[n].test(c))return n}(h):function(t,e){for(var n in t)if(t.hasOwnProperty(n)&&t[n].test(c))return n}(h),u=t.valueCallback?t.valueCallback(u):u,{value:u=i.valueCallback?i.valueCallback(u):u,rest:r.slice(c.length)}}}const Up={code:"en-US",formatDistance:function(t,e,n){var r;return n=n||{},r="string"==typeof Op[t]?Op[t]:1===e?Op[t].one:Op[t].other.replace("{{count}}",e),n.addSuffix?n.comparison>0?"in "+r:r+" ago":r},formatLong:xp,formatRelative:function(t,e,n,r){return Lp[t]},localize:{ordinalNumber:function(t,e){var n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:Rp({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:Rp({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:function(t){return Number(t)-1}}),month:Rp({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:Rp({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:Rp({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:(Pp={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:function(t){return parseInt(t,10)}},function(t,e){var n=String(t),r=e||{},i=n.match(Pp.matchPattern);if(!i)return null;var o=i[0],s=n.match(Pp.parsePattern);if(!s)return null;var a=Pp.valueCallback?Pp.valueCallback(s[0]):s[0];return{value:a=r.valueCallback?r.valueCallback(a):a,rest:n.slice(o.length)}}),era:Mp({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:Mp({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(t){return t+1}}),month:Mp({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:Mp({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:Mp({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}};function jp(t){if(null===t||!0===t||!1===t)return NaN;var e=Number(t);return isNaN(e)?e:e<0?Math.ceil(e):Math.floor(e)}function Vp(t,e){Np(2,arguments);var n=kp(t).getTime(),r=jp(e);return new Date(n+r)}function Fp(t,e){Np(2,arguments);var n=jp(e);return Vp(t,-n)}function qp(t,e){for(var n=t<0?"-":"",r=Math.abs(t).toString();r.length<e;)r="0"+r;return n+r}const Hp=function(t,e){var n=t.getUTCFullYear(),r=n>0?n:1-n;return qp("yy"===e?r%100:r,e.length)},Bp=function(t,e){var n=t.getUTCMonth();return"M"===e?String(n+1):qp(n+1,2)},Gp=function(t,e){return qp(t.getUTCDate(),e.length)},zp=function(t,e){return qp(t.getUTCHours()%12||12,e.length)},Kp=function(t,e){return qp(t.getUTCHours(),e.length)},Wp=function(t,e){return qp(t.getUTCMinutes(),e.length)},Jp=function(t,e){return qp(t.getUTCSeconds(),e.length)},Xp=function(t,e){var n=e.length,r=t.getUTCMilliseconds();return qp(Math.floor(r*Math.pow(10,n-3)),e.length)};var Yp=864e5;function $p(t){Np(1,arguments);var e=1,n=kp(t),r=n.getUTCDay(),i=(r<e?7:0)+r-e;return n.setUTCDate(n.getUTCDate()-i),n.setUTCHours(0,0,0,0),n}function Qp(t){Np(1,arguments);var e=kp(t),n=e.getUTCFullYear(),r=new Date(0);r.setUTCFullYear(n+1,0,4),r.setUTCHours(0,0,0,0);var i=$p(r),o=new Date(0);o.setUTCFullYear(n,0,4),o.setUTCHours(0,0,0,0);var s=$p(o);return e.getTime()>=i.getTime()?n+1:e.getTime()>=s.getTime()?n:n-1}function Zp(t){Np(1,arguments);var e=Qp(t),n=new Date(0);n.setUTCFullYear(e,0,4),n.setUTCHours(0,0,0,0);var r=$p(n);return r}var tv=6048e5;function ev(t,e){Np(1,arguments);var n=e||{},r=n.locale,i=r&&r.options&&r.options.weekStartsOn,o=null==i?0:jp(i),s=null==n.weekStartsOn?o:jp(n.weekStartsOn);if(!(s>=0&&s<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var a=kp(t),u=a.getUTCDay(),c=(u<s?7:0)+u-s;return a.setUTCDate(a.getUTCDate()-c),a.setUTCHours(0,0,0,0),a}function nv(t,e){Np(1,arguments);var n=kp(t,e),r=n.getUTCFullYear(),i=e||{},o=i.locale,s=o&&o.options&&o.options.firstWeekContainsDate,a=null==s?1:jp(s),u=null==i.firstWeekContainsDate?a:jp(i.firstWeekContainsDate);if(!(u>=1&&u<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var c=new Date(0);c.setUTCFullYear(r+1,0,u),c.setUTCHours(0,0,0,0);var h=ev(c,e),f=new Date(0);f.setUTCFullYear(r,0,u),f.setUTCHours(0,0,0,0);var l=ev(f,e);return n.getTime()>=h.getTime()?r+1:n.getTime()>=l.getTime()?r:r-1}function rv(t,e){Np(1,arguments);var n=e||{},r=n.locale,i=r&&r.options&&r.options.firstWeekContainsDate,o=null==i?1:jp(i),s=null==n.firstWeekContainsDate?o:jp(n.firstWeekContainsDate),a=nv(t,e),u=new Date(0);u.setUTCFullYear(a,0,s),u.setUTCHours(0,0,0,0);var c=ev(u,e);return c}var iv=6048e5;function ov(t,e){var n=t>0?"-":"+",r=Math.abs(t),i=Math.floor(r/60),o=r%60;if(0===o)return n+String(i);var s=e||"";return n+String(i)+s+qp(o,2)}function sv(t,e){return t%60==0?(t>0?"-":"+")+qp(Math.abs(t)/60,2):av(t,e)}function av(t,e){var n=e||"",r=t>0?"-":"+",i=Math.abs(t);return r+qp(Math.floor(i/60),2)+n+qp(i%60,2)}const uv={G:function(t,e,n){var r=t.getUTCFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if("yo"===e){var r=t.getUTCFullYear(),i=r>0?r:1-r;return n.ordinalNumber(i,{unit:"year"})}return Hp(t,e)},Y:function(t,e,n,r){var i=nv(t,r),o=i>0?i:1-i;return"YY"===e?qp(o%100,2):"Yo"===e?n.ordinalNumber(o,{unit:"year"}):qp(o,e.length)},R:function(t,e){return qp(Qp(t),e.length)},u:function(t,e){return qp(t.getUTCFullYear(),e.length)},Q:function(t,e,n){var r=Math.ceil((t.getUTCMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return qp(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){var r=Math.ceil((t.getUTCMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return qp(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){var r=t.getUTCMonth();switch(e){case"M":case"MM":return Bp(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){var r=t.getUTCMonth();switch(e){case"L":return String(r+1);case"LL":return qp(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){var i=function(t,e){Np(1,arguments);var n=kp(t),r=ev(n,e).getTime()-rv(n,e).getTime();return Math.round(r/iv)+1}(t,r);return"wo"===e?n.ordinalNumber(i,{unit:"week"}):qp(i,e.length)},I:function(t,e,n){var r=function(t){Np(1,arguments);var e=kp(t),n=$p(e).getTime()-Zp(e).getTime();return Math.round(n/tv)+1}(t);return"Io"===e?n.ordinalNumber(r,{unit:"week"}):qp(r,e.length)},d:function(t,e,n){return"do"===e?n.ordinalNumber(t.getUTCDate(),{unit:"date"}):Gp(t,e)},D:function(t,e,n){var r=function(t){Np(1,arguments);var e=kp(t),n=e.getTime();e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0);var r=e.getTime(),i=n-r;return Math.floor(i/Yp)+1}(t);return"Do"===e?n.ordinalNumber(r,{unit:"dayOfYear"}):qp(r,e.length)},E:function(t,e,n){var r=t.getUTCDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){var i=t.getUTCDay(),o=(i-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(o);case"ee":return qp(o,2);case"eo":return n.ordinalNumber(o,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){var i=t.getUTCDay(),o=(i-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(o);case"cc":return qp(o,e.length);case"co":return n.ordinalNumber(o,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(t,e,n){var r=t.getUTCDay(),i=0===r?7:r;switch(e){case"i":return String(i);case"ii":return qp(i,e.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){var r=t.getUTCHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":case"aaa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaaaa":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(t,e,n){var r,i=t.getUTCHours();switch(r=12===i?"noon":0===i?"midnight":i/12>=1?"pm":"am",e){case"b":case"bb":case"bbb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"bbbbb":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},B:function(t,e,n){var r,i=t.getUTCHours();switch(r=i>=17?"evening":i>=12?"afternoon":i>=4?"morning":"night",e){case"B":case"BB":case"BBB":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},h:function(t,e,n){if("ho"===e){var r=t.getUTCHours()%12;return 0===r&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return zp(t,e)},H:function(t,e,n){return"Ho"===e?n.ordinalNumber(t.getUTCHours(),{unit:"hour"}):Kp(t,e)},K:function(t,e,n){var r=t.getUTCHours()%12;return"Ko"===e?n.ordinalNumber(r,{unit:"hour"}):qp(r,e.length)},k:function(t,e,n){var r=t.getUTCHours();return 0===r&&(r=24),"ko"===e?n.ordinalNumber(r,{unit:"hour"}):qp(r,e.length)},m:function(t,e,n){return"mo"===e?n.ordinalNumber(t.getUTCMinutes(),{unit:"minute"}):Wp(t,e)},s:function(t,e,n){return"so"===e?n.ordinalNumber(t.getUTCSeconds(),{unit:"second"}):Jp(t,e)},S:function(t,e){return Xp(t,e)},X:function(t,e,n,r){var i=(r._originalDate||t).getTimezoneOffset();if(0===i)return"Z";switch(e){case"X":return sv(i);case"XXXX":case"XX":return av(i);case"XXXXX":case"XXX":default:return av(i,":")}},x:function(t,e,n,r){var i=(r._originalDate||t).getTimezoneOffset();switch(e){case"x":return sv(i);case"xxxx":case"xx":return av(i);case"xxxxx":case"xxx":default:return av(i,":")}},O:function(t,e,n,r){var i=(r._originalDate||t).getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+ov(i,":");case"OOOO":default:return"GMT"+av(i,":")}},z:function(t,e,n,r){var i=(r._originalDate||t).getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+ov(i,":");case"zzzz":default:return"GMT"+av(i,":")}},t:function(t,e,n,r){var i=r._originalDate||t;return qp(Math.floor(i.getTime()/1e3),e.length)},T:function(t,e,n,r){return qp((r._originalDate||t).getTime(),e.length)}};function cv(t,e){switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}}function hv(t,e){switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}}const fv={p:hv,P:function(t,e){var n,r=t.match(/(P+)(p+)?/),i=r[1],o=r[2];if(!o)return cv(t,e);switch(i){case"P":n=e.dateTime({width:"short"});break;case"PP":n=e.dateTime({width:"medium"});break;case"PPP":n=e.dateTime({width:"long"});break;case"PPPP":default:n=e.dateTime({width:"full"})}return n.replace("{{date}}",cv(i,e)).replace("{{time}}",hv(o,e))}};var lv=6e4;function dv(t){return t.getTime()%lv}function pv(t){var e=new Date(t.getTime()),n=Math.ceil(e.getTimezoneOffset());e.setSeconds(0,0);var r=n>0?(lv+dv(e))%lv:dv(e);return n*lv+r}var vv=["D","DD"],mv=["YY","YYYY"];function yv(t){return-1!==vv.indexOf(t)}function gv(t){return-1!==mv.indexOf(t)}function bv(t,e,n){if("YYYY"===t)throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(e,"`) for formatting years to the input `").concat(n,"`; see: https://git.io/fxCyr"));if("YY"===t)throw new RangeError("Use `yy` instead of `YY` (in `".concat(e,"`) for formatting years to the input `").concat(n,"`; see: https://git.io/fxCyr"));if("D"===t)throw new RangeError("Use `d` instead of `D` (in `".concat(e,"`) for formatting days of the month to the input `").concat(n,"`; see: https://git.io/fxCyr"));if("DD"===t)throw new RangeError("Use `dd` instead of `DD` (in `".concat(e,"`) for formatting days of the month to the input `").concat(n,"`; see: https://git.io/fxCyr"))}var wv=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Iv=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Tv=/^'([^]*?)'?$/,Ev=/''/g,_v=/[a-zA-Z]/;function Sv(t,e,n){Np(2,arguments);var r=String(e),i=n||{},o=i.locale||Up,s=o.options&&o.options.firstWeekContainsDate,a=null==s?1:jp(s),u=null==i.firstWeekContainsDate?a:jp(i.firstWeekContainsDate);if(!(u>=1&&u<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var c=o.options&&o.options.weekStartsOn,h=null==c?0:jp(c),f=null==i.weekStartsOn?h:jp(i.weekStartsOn);if(!(f>=0&&f<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!o.localize)throw new RangeError("locale must contain localize property");if(!o.formatLong)throw new RangeError("locale must contain formatLong property");var l=kp(t);if(!Dp(l))throw new RangeError("Invalid time value");var d=pv(l),p=Fp(l,d),v={firstWeekContainsDate:u,weekStartsOn:f,locale:o,_originalDate:l},m=r.match(Iv).map((function(t){var e=t[0];return"p"===e||"P"===e?(0,fv[e])(t,o.formatLong,v):t})).join("").match(wv).map((function(n){if("''"===n)return"'";var r=n[0];if("'"===r)return Av(n);var s=uv[r];if(s)return!i.useAdditionalWeekYearTokens&&gv(n)&&bv(n,e,t),!i.useAdditionalDayOfYearTokens&&yv(n)&&bv(n,e,t),s(p,n,o.localize,v);if(r.match(_v))throw new RangeError("Format string contains an unescaped latin alphabet character `"+r+"`");return n})).join("");return m}function Av(t){return t.match(Tv)[1].replace(Ev,"'")}class Nv{static showToastError(t){const e=document.createElement("div");e.classList.add("toastError"),e.innerHTML=`\n            <h4>${t}</h4>\n        `,document.body.appendChild(e),setTimeout((()=>{e.remove()}),3e3)}static rewriteDOM(t){document.body.append(t()),Nv.eventListeners(t);const e=document.querySelectorAll(".redirect");Nv.getRedirectLinks(e)}static getRedirectLinks(t){t.forEach((t=>{t.addEventListener("click",(()=>{"loginPage"===t.dataset.ref&&Nv.rewriteDOM(Tp),"signupPage"===t.dataset.ref&&Nv.rewriteDOM(Ep)}))}))}static eventListeners(t){if(t==Ep){console.log("signupPage");const t=document.querySelector("#signup .authForm");t.addEventListener("submit",(e=>{e.preventDefault();const n=t.username.value,r=t.email.value,i=t.password.value;_p.signupUser(n,r,i)}))}if(t==Tp){console.log("loginPage");const t=document.querySelector("#login .authForm");t.addEventListener("submit",(e=>{e.preventDefault();const n=t.email.value,r=t.password.value;_p.loginUser(n,r)}))}if(t==Ip){console.log("dashboardPage"),document.getElementById("createTaskBtn").addEventListener("click",(()=>{this.createNewTaskTab()}));const t=document.querySelector(".dropdown__header");t.addEventListener("click",(()=>{t.parentElement.classList.toggle("opened"),t.parentElement.classList.toggle("closed")})),document.getElementById("createProjectBtn").addEventListener("click",(()=>{this.createNewProjectTab()}))}}static createNewProjectTab(){const t=document.getElementById("itemInfo");t.innerHTML='\n        <form class="createForm">\n            <span class="createForm__type">project</span>\n            <input type="text" name="title" id="title" placeholder="Title" required minlength="5"/>\n            <textarea type="text" name="description" id="description" rows="10" required minlength="40"></textarea>\n            <div class="createForm__flexInputContainer">\n                <label for="deadline">Color</label>\n                <input type="color" name="color" id="color" value="#4361EE" required>\n            </div>\n            <div class="createForm__btnContainer">\n                <button class="btn outlined" id="cancelBtn">Cancel</a>\n                <button type="submit" class="btn" id="submitBtn">Create</a>\n            </div>\n        </form>\n        ';const e=t.querySelector(".createForm"),n=document.getElementById("submitBtn"),r=document.getElementById("cancelBtn");n.addEventListener("click",(t=>{t.preventDefault();const n=new Ap(e.title.value,e.description.value,e.color.value);this.createProject(n)})),r.addEventListener("click",(()=>{this.clearSideBar()}))}static createProject(t){wp.collection("users").doc(_p.getUserID()).collection("projects").add({title:t.title,description:t.description,color:t.color,tasks:[]}).then((t=>{this.clearSideBar()})).catch((t=>console.log(t)))}static createNewTaskTab(){const t=document.getElementById("itemInfo");t.innerHTML='\n            <form class="createForm">\n                <span class="createForm__type">task</span>\n                <input type="text" name="title" id="title" placeholder="Title" required minlength="5"/>\n                <textarea type="text" name="description" id="description" rows="10" required minlength="40"></textarea>\n                <div class="createForm__flexInputContainer">\n                    <label for="project">Project</label>\n                    <div class="createForm__customSelect">\n                        <select id="project" required>\n                            <option value="">----</option>\n                        </select>\n                        <span class="createForm__customSelect__customArrow"></span>\n                    </div>\n                </div>\n                <div class="createForm__flexInputContainer">\n                    <label for="priority">Priority</label>\n                    <div class="createForm__customSelect">\n                        <select id="priority" required>\n                            <option value="">----</option>\n                            <option value="High">High</option>\n                            <option value="Medium">Medium</option>\n                            <option value="Low">Low</option>\n                        </select>\n                        <span class="createForm__customSelect__customArrow"></span>\n                    </div>\n                </div>\n                <div class="createForm__flexInputContainer">\n                    <label for="deadline">Deadline</label>\n                    <input type="date" name="deadline" id="deadline" required>\n                </div>\n                <div class="createForm__btnContainer">\n                    <button class="btn outlined" id="cancelBtn">Cancel</a>\n                    <button type="submit" class="btn" id="submitBtn">Create</a>\n                </div>\n            </form>\n        ';const e=document.getElementById("project"),n=t.querySelector(".createForm"),r=document.getElementById("submitBtn"),i=document.getElementById("cancelBtn");wp.collection("users").doc(_p.getUserID()).collection("projects").get().then((t=>{t.forEach((t=>{const n=document.createElement("option");n.value=t.data().title,n.innerText=t.data().title,e.append(n)}))})).catch((t=>console.log(t))),r.addEventListener("click",(t=>{t.preventDefault();const e=new Sp(n.title.value,n.description.value,n.project.value,n.priority.value,n.deadline.value);this.createTask(e)})),i.addEventListener("click",(()=>{this.clearSideBar()}))}static displayUserTodaysTasks(t){wp.collection("users").doc(t.uid).collection("tasks").onSnapshot((e=>{const n=document.getElementById("userTasksList");n.innerHTML="",e.docs.forEach((e=>{const r=document.createElement("article");r.classList.add("dashboard__task"),r.dataset.id=e.id,r.innerHTML=`\n                    <div class="checkbox__container">\n                        <input type="checkbox" id="checkbox" />\n                        <label for="checkbox" class="checkbox__mark"></label>\n                    </div>\n                    <div class="task__info">\n                        <h5>${e.data().title}</h5>\n                        <div class="task__data">\n                            <span class="task__data__dueDate">${Sv(e.data().deadline.toDate(),"dd-MM-yyyy")}</span>\n                            <span class="task__data__priority ${e.data().priority}">${e.data().priority} Priority</span>\n                        </div>\n                    </div>\n                    <div class="task__project" data-project="${e.data().project}">\n                        <p>${e.data().project}</p>\n                        <span class="markup"></span>\n                    </div>\n                `;const i=r.querySelector(".task__project");"undefined"==i.dataset.project&&(i.style.display="none"),n.append(r),r.addEventListener("click",(()=>this.displayItemInfo("task",e.id,t)))}))}),(t=>console.log(t)))}static displayUserCreds(t){wp.collection("users").doc(t.uid).get().then((t=>{const e=document.getElementById("userCredsHeader");e.innerHTML=`\n            <div class="navSidebar__header__userCircle">\n                <h3>${t.data().username.split("")[0]}</h3>\n            </div>\n            <div class="navSidebar__header__userCreds">\n                <h4>${t.data().username}</h4>\n                <p>${t.data().email}</p>\n            </div>\n            <i class="ri-logout-circle-r-line" id="logout"></i>\n            `,e.querySelector("#logout").addEventListener("click",(()=>{_p.logoutUser()}))})).catch((t=>console.log(t)))}static displayItemInfo(t,e,n){wp.collection("users").doc(n.uid).collection(t+"s").doc(e).onSnapshot((e=>{const n=document.getElementById("itemInfo");n.innerHTML=`\n                <span class="itemInfo__type">${t}</span>\n                <div class="itemInfo__header">\n                    <h3>${e.data().title}</h3>\n                    <div class="itemInfo__header__ctaIcons">\n                        <i class="ri-edit-2-line" id="editItem"></i>\n                        <i class="ri-close-circle-line" id="deleteItem"></i>\n                    </div>\n                </div>\n                <p class="itemInfo__description">\n                    ${e.data().description} \n                </p>\n                <div class="itemInfo__meta">\n                    <h5>Project</h5>\n                    <p>${e.data().project}</p>\n                </div>\n                <div class="itemInfo__meta">\n                    <h5>Priority</h5>\n                    <p class="${e.data().priority}">${e.data().priority} Priority</p>\n                </div>\n                <div class="itemInfo__meta">\n                    <h5>Deadline</h5>\n                    <p>${Sv(e.data().deadline.toDate(),"dd-MM-yyyy")}</p>\n                </div>\n            `,n.querySelector("#deleteItem").addEventListener("click",(()=>{this.deleteItemFromCollection("task",e.id),this.clearSideBar()}))}),(t=>console.log(t)))}static displayProjectInfo(t){wp.collection("users").doc(_p.getUserID()).collection("projects").doc(t).onSnapshot((t=>{const e=document.getElementById("itemInfo");e.innerHTML=`\n                <span class="itemInfo__type">project</span>\n                <div class="itemInfo__header">\n                    <h3>${t.data().title}</h3>\n                    <div class="itemInfo__header__ctaIcons">\n                        <i class="ri-edit-2-line" id="editItem"></i>\n                        <i class="ri-close-circle-line" id="deleteItem"></i>\n                    </div>\n                </div>\n                <p class="itemInfo__description">\n                    ${t.data().description} \n                </p>\n                <div class="itemInfo__meta">\n                    <h5>Color</h5>\n                    <div class="itemInfo__color" style="background-color: ${t.data().color}"></div>\n                </div>\n                <div class="itemInfo__meta">\n                    <h5>Completed Tasks</h5>\n                    <p>0/${t.data().tasks.length}</p>\n                </div>\n            `,e.querySelector("#deleteItem").addEventListener("click",(()=>{this.deleteItemFromCollection("project",t.id),this.clearSideBar()}))}),(t=>console.log(t)))}static displayProjects(){wp.collection("users").doc(_p.getUserID()).collection("projects").onSnapshot((t=>{const e=document.getElementById("userProjectsList");e.innerHTML="";const n=document.querySelector(".dropdown__list");n.innerHTML="",t.docs.forEach((t=>{const r=document.createElement("article");r.classList.add("dashboard__project"),r.innerHTML=`\n                    <div class="dashboard__project__colorMarkup" style="background-color:${t.data().color}"></div>\n                    <h5>${t.data().title}</h5>\n                    <p>${t.data().description.slice(0,140)}...</p>\n                    <p class="dashboard__project__completedTasks">0/${t.data().tasks.length}</p>\n                `,e.append(r);const i=document.createElement("li");i.innerHTML=`\n                    <span class="markup" style="background-color:${t.data().color}"></span>\n                    ${t.data().title}\n                `,n.append(i),r.addEventListener("click",(()=>this.displayProjectInfo(t.id))),i.addEventListener("click",(()=>this.displayProjectInfo(t.id)))}))}),(t=>console.log(t)))}static clearSideBar(){document.getElementById("itemInfo").innerHTML='\n        <div class="itemInfo__empty">\n            <img src="./assets/watering_plant.svg">\n            <h5>Clean here</h5>\n            <p>No task has been choose</p>\n        </div>\n    '}static deleteItemFromCollection(t,e){wp.collection("users").doc(_p.getUserID()).collection(t+"s").doc(e).delete().then((()=>{console.log("succesfully deleted")})).catch((t=>console.log(t)))}static createTask(t){wp.collection("users").doc(_p.getUserID()).collection("tasks").add({title:t.title,description:t.description,priority:t.priority,project:t.project,deadline:new Date(t.deadline),checked:!1}).then((t=>{this.clearSideBar()})).catch((t=>console.log(t)))}static clearInputFields(t){t.reset()}}bp.onAuthStateChanged((t=>{console.log(t),t?(Nv.rewriteDOM(Ip),Nv.displayUserCreds(t),Nv.displayUserTodaysTasks(t),Nv.displayProjects()):Nv.rewriteDOM(Tp)}))})();